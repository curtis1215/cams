# 資產監控功能實作任務清單

本文件列出實作資產監控功能的所有任務，按執行順序排列。

---

## 階段 1：基礎架構建立

### Task 1.1：創建 TypeScript 類型定義
**描述**：定義資產監控數據的 TypeScript 介面和類型

**步驟**：
1. 在 `src/types/` 目錄下創建 `assetMonitor.ts`
2. 定義 `AssetMonitorData` 介面
3. 匯出類型供其他模組使用

**驗證**：
- [ ] TypeScript 編譯無錯誤
- [ ] 類型定義包含所有必要欄位
- [ ] 欄位類型正確對應需求

**預估時間**：30 分鐘

---

### Task 1.2：創建 Mock 資料（用於前端 Demo 展示）
**描述**：創建完整的 mock 資料檔案用於前端 demo 展示

**重要說明**：此專案為前端 demo 展示用途，無後端 API 支援，所有資料皆為 mock 資料。

**步驟**：
1. 創建目錄 `src/mock/monitor/AssetMonitor/`
2. 創建 `assetMonitor.mock.json` 檔案
3. 添加至少 20-30 筆示範資料，涵蓋多種幣種和鏈路組合
4. 包含以下測試場景的資料：
   - 正常資產狀況（差額為正或接近零）
   - 異常資產狀況（負差額，用於展示警告效果）
   - 各種變化趨勢（正增長、負增長、無變化）
   - 多條鏈路的同一幣種（如 USDT 在 ETH、BSC、TRON）
   - 邊界情況（極大值、極小值、零值）

**Demo 資料範例結構**：
```json
[
  {
    "id": "usdt-eth-001",
    "currency": "USDT",
    "chain": "ETH",
    "totalHoldings": 1000000.12345678,
    "userHoldings": 800000.12345678,
    "projectHoldings": 199000.00000000,
    "difference": 1000.00000000,
    "hourChange": 2.35,
    "updateTime": "2025-10-24T10:30:00Z"
  },
  // ... 更多資料
]
```

**驗證**：
- [ ] JSON 格式正確
- [ ] 資料結構符合 TypeScript 定義
- [ ] 涵蓋各種展示場景（正常、異常、邊界）
- [ ] 至少包含 3-5 種主流幣種（USDT, BTC, ETH, BNB 等）
- [ ] 每種幣種至少包含 2-3 條鏈路的資料
- [ ] 資料具有展示說服力和真實感

**預估時間**：45 分鐘

---

### Task 1.3：創建多語言翻譯檔案
**描述**：創建繁體中文和英文的翻譯檔案

**步驟**：
1. 創建目錄 `src/locales/monitor/AssetMonitor/`
2. 創建 `zh.json` (繁體中文翻譯)
3. 創建 `en.json` (英文翻譯)
4. 添加所有介面文字的翻譯鍵值對

**翻譯內容**：
- 頁面標題
- 表格欄位標題
- 按鈕文字
- 提示訊息
- 篩選選項

**驗證**：
- [ ] JSON 格式正確
- [ ] 中英文翻譯完整對應
- [ ] 翻譯鍵值命名符合專案慣例

**預估時間**：30 分鐘

**相關檔案**：
- 參考 `src/locales/monitor/Dashboard/zh.json`
- 參考 `src/locales/monitor/Dashboard/en.json`

---

## 階段 2：頁面組件開發

### Task 2.1：創建資產監控頁面組件
**描述**：創建主要的 Vue 組件檔案

**步驟**：
1. 創建 `src/views/monitor/AssetMonitor.vue`
2. 設置基本的 Vue 3 Composition API 結構
3. 引入必要的依賴（vue-i18n, ant-design-vue, dayjs）
4. 設置 TypeScript 支援

**基本結構**：
```vue
<template>
  <div class="asset-monitor">
    <!-- 待實作 -->
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { useI18n } from 'vue-i18n'
import type { AssetMonitorData } from '@/types/assetMonitor'

const { t } = useI18n()
// 組件邏輯
</script>

<style scoped lang="scss">
// 樣式
</style>
```

**驗證**：
- [ ] 組件可正常渲染
- [ ] 無 TypeScript 編譯錯誤
- [ ] 可正確載入翻譯

**預估時間**：30 分鐘

---

### Task 2.2：實作表格基本結構（使用 Mock 資料）
**描述**：使用 Ant Design Vue Table 組件建立資料表格，載入 mock 資料進行展示

**重要說明**：此功能為純前端展示，直接從 mock JSON 檔案載入資料，無後端 API 呼叫。

**步驟**：
1. 定義表格欄位配置（columns）
2. **從 mock 檔案載入資料**到 `dataSource`（使用 `import` 或動態載入）
3. 配置基本的表格屬性（bordered, scroll）
4. 實作多語言欄位標題

**欄位配置**：
- 幣種 (currency)
- 鏈路 (chain)
- 持有資產數量 (totalHoldings)
- 平台用戶持有量 (userHoldings)
- 平台項目方持有量 (projectHoldings)
- 資產差額 (difference)
- 近一小時變化 (hourChange)

**Mock 資料載入方式**：
```typescript
import mockData from '@/mock/monitor/AssetMonitor/assetMonitor.mock.json'

const tableData = ref<AssetMonitorData[]>(mockData)
```

**驗證**：
- [ ] 表格正確顯示所有欄位
- [ ] 欄位標題支援多語言切換
- [ ] Mock 資料正確綁定到表格
- [ ] 資料顯示符合 demo 展示需求

**預估時間**：1 小時

**參考**：`src/views/monitor/NodeHeight.vue` 的表格實作

---

### Task 2.3：實作數字格式化
**描述**：實作資產數量的格式化顯示

**步驟**：
1. 創建數字格式化工具函數
2. 對持有量欄位套用格式化（千分位分隔，8 位小數）
3. 處理大數字的顯示（可選：使用縮寫如 K, M, B）

**格式化要求**：
- 保留 8 位小數
- 千分位使用逗號分隔
- 零值顯示為 "0.00000000"

**驗證**：
- [ ] 數字正確格式化
- [ ] 小數位數正確
- [ ] 千分位分隔正確

**預估時間**：30 分鐘

---

### Task 2.4：實作資產差額顯示邏輯
**描述**：實作資產差額的計算和顯示邏輯

**步驟**：
1. 實作差額計算函數
2. 根據差額正負值設定顏色樣式
3. 可選：添加警告圖標於異常差額

**顯示規則**：
- 正數：綠色文字
- 負數：紅色文字
- 零：灰色文字

**驗證**：
- [ ] 差額計算正確
- [ ] 顏色樣式正確應用
- [ ] 異常情況有視覺提示

**預估時間**：30 分鐘

---

### Task 2.5：實作變化趨勢顯示
**描述**：實作近一小時變化的顯示邏輯

**步驟**：
1. 格式化百分比顯示（保留 2 位小數）
2. 添加趨勢箭頭圖標（↑ ↓ →）
3. 根據變化方向設定顏色

**顯示規則**：
- 正數：綠色 + ↑
- 負數：紅色 + ↓
- 零：灰色 + →

**驗證**：
- [ ] 百分比格式正確
- [ ] 箭頭圖標正確顯示
- [ ] 顏色樣式正確

**預估時間**：30 分鐘

---

## 階段 3：互動功能實作

### Task 3.1：實作資料刷新功能（Mock 資料重新載入）
**描述**：添加手動刷新資料的功能（模擬資料重新載入效果）

**重要說明**：因為使用 mock 資料，刷新功能將模擬重新載入相同的 mock 資料，並更新時間戳，用於展示刷新互動效果。

**步驟**：
1. 添加刷新按鈕到頁面標題區域
2. 實作 `handleRefresh` 函數（重新載入 mock 資料）
3. 添加 loading 狀態模擬（延遲 500ms-1s）
4. 顯示最後更新時間

**功能要求**：
- 刷新時顯示 loading 動畫
- 刷新期間按鈕禁用
- 模擬網路延遲效果（使用 setTimeout）
- 更新最後更新時間戳為當前時間

**實作範例**：
```typescript
const handleRefresh = async () => {
  loading.value = true
  // 模擬網路延遲
  await new Promise(resolve => setTimeout(resolve, 800))
  // 重新載入 mock 資料
  tableData.value = [...mockData]
  lastUpdateTime.value = new Date().toISOString()
  loading.value = false
}
```

**驗證**：
- [ ] 點擊刷新按鈕可重新載入 mock 資料
- [ ] Loading 狀態正確顯示
- [ ] 更新時間正確更新為當前時間
- [ ] 刷新動畫效果流暢

**預估時間**：30 分鐘

---

### Task 3.2：實作鏈路篩選功能
**描述**：添加按鏈路篩選資料的下拉選單

**步驟**：
1. 添加鏈路下拉選單 (`<a-select>`)
2. 從資料中提取唯一的鏈路列表
3. 實作篩選邏輯
4. 添加「全部鏈路」選項

**功能要求**：
- 動態生成鏈路選項
- 篩選即時生效
- 支援清除篩選

**驗證**：
- [ ] 下拉選單正確顯示所有鏈路
- [ ] 篩選功能正確運作
- [ ] 可恢復顯示全部資料

**預估時間**：45 分鐘

---

### Task 3.3：實作幣種搜尋功能
**描述**：添加幣種名稱的搜尋輸入框

**步驟**：
1. 添加搜尋輸入框 (`<a-input-search>`)
2. 實作即時搜尋邏輯
3. 支援大小寫不敏感搜尋
4. 添加清除搜尋功能

**功能要求**：
- 即時搜尋（輸入時立即篩選）
- 不區分大小寫
- 支援部分匹配

**驗證**：
- [ ] 搜尋功能正確運作
- [ ] 即時更新搜尋結果
- [ ] 清除搜尋可恢復全部資料

**預估時間**：45 分鐘

---

### Task 3.4：實作分頁功能
**描述**：配置表格的分頁功能

**步驟**：
1. 配置表格的 pagination 屬性
2. 設定每頁顯示數量（預設 20 筆）
3. 添加總記錄數顯示
4. 可選：添加頁數跳轉功能

**配置參數**：
- pageSize: 20
- showSizeChanger: true
- showQuickJumper: true
- showTotal: true

**驗證**：
- [ ] 分頁控制元件正確顯示
- [ ] 切換頁碼正常運作
- [ ] 總記錄數正確顯示

**預估時間**：30 分鐘

---

## 階段 4：路由與導航整合

### Task 4.1：新增路由配置
**描述**：在路由配置中添加資產監控頁面

**步驟**：
1. 編輯 `src/router/index.ts`
2. 添加新路由配置
3. 配置路由元資訊（meta）

**路由配置**：
```typescript
{
  path: '/monitor/asset-monitor',
  name: 'AssetMonitor',
  component: () => import('@/views/monitor/AssetMonitor.vue'),
  meta: {
    title: 'nav.assetMonitor',
    requiresAuth: true
  }
}
```

**驗證**：
- [ ] 路由配置正確
- [ ] 可透過 URL 直接訪問頁面
- [ ] 路由守衛正常運作

**預估時間**：15 分鐘

---

### Task 4.2：更新導航選單
**描述**：在主導航選單中添加資產監控入口

**步驟**：
1. 編輯 `src/layouts/MainLayout.vue` 或相關導航組件
2. 在監控選單組下添加資產監控項目
3. 配置選單項的圖標和文字
4. 確保多語言支援

**選單配置位置**：
- 父選單：監控管理 (Monitor)
- 位置：在「告警管理」和「節點高度監控」之後

**驗證**：
- [ ] 選單項正確顯示
- [ ] 點擊可正確導航
- [ ] 多語言切換正常

**預估時間**：30 分鐘

---

### Task 4.3：更新多語言導航文字
**描述**：在全局多語言檔案中添加導航文字

**步驟**：
1. 編輯 `src/locales/zh.json`
2. 編輯 `src/locales/en.json`
3. 添加導航相關的翻譯鍵值

**翻譯內容**：
```json
{
  "zh": {
    "nav": {
      "assetMonitor": "資產監控"
    }
  },
  "en": {
    "nav": {
      "assetMonitor": "Asset Monitor"
    }
  }
}
```

**驗證**：
- [ ] 翻譯鍵值正確添加
- [ ] 導航文字支援語言切換

**預估時間**：15 分鐘

---

## 階段 5：樣式與優化

### Task 5.1：實作頁面樣式
**描述**：添加頁面的 CSS 樣式

**步驟**：
1. 設定頁面容器樣式
2. 設定表格區域樣式
3. 設定差額和變化欄位的顏色樣式
4. 設定響應式布局

**樣式要求**：
- 遵循現有的設計系統
- 確保在不同螢幕尺寸下可用
- 正負值顏色清晰區分

**驗證**：
- [ ] 頁面佈局美觀
- [ ] 顏色樣式符合需求
- [ ] 響應式設計正常

**預估時間**：1 小時

---

### Task 5.2：效能優化
**描述**：優化頁面載入和渲染效能

**步驟**：
1. 實作資料快取
2. 優化大資料集的渲染（如虛擬滾動）
3. 減少不必要的重新渲染
4. 可選：實作資料懶加載

**優化重點**：
- 使用 `computed` 計算衍生資料
- 避免在模板中使用複雜計算
- 適當使用 `v-memo` 或 `v-once`

**驗證**：
- [ ] 初始載入時間 < 2 秒
- [ ] 表格渲染流暢無卡頓
- [ ] 篩選和搜尋即時響應

**預估時間**：1 小時

---

## 階段 6：測試與文檔

### Task 6.1：功能測試
**描述**：對所有功能進行手動測試

**測試項目**：
1. 頁面正確載入和顯示
2. 所有欄位資料正確顯示
3. 資料刷新功能正常
4. 鏈路篩選功能正常
5. 幣種搜尋功能正常
6. 分頁功能正常
7. 多語言切換正常
8. 響應式設計正常

**測試環境**：
- 不同瀏覽器（Chrome, Firefox, Safari）
- 不同螢幕尺寸（桌面、平板、手機）

**驗證**：
- [ ] 所有測試項目通過
- [ ] 記錄測試結果
- [ ] 修復發現的問題

**預估時間**：2 小時

---

### Task 6.2：程式碼審查
**描述**：進行程式碼品質審查

**審查項目**：
1. TypeScript 類型定義完整
2. 遵循專案編碼規範
3. 無 console.log 等除錯程式碼
4. 註釋清晰適當
5. 無未使用的導入和變數

**工具檢查**：
- ESLint 檢查無錯誤
- TypeScript 編譯無錯誤
- 格式化符合 Prettier 規則

**驗證**：
- [ ] 程式碼品質符合標準
- [ ] 通過所有靜態檢查
- [ ] 程式碼可讀性良好

**預估時間**：1 小時

---

### Task 6.3：更新文檔
**描述**：更新相關技術文檔

**文檔內容**：
1. 功能說明文檔
2. 資料結構說明
3. API 介面文檔（當接入實際 API 時）
4. 使用者指南（可選）

**文檔位置**：
- 在 `docs/` 目錄或相關位置
- 可選：更新專案 README

**驗證**：
- [ ] 文檔內容完整準確
- [ ] 文檔格式清晰
- [ ] 包含必要的範例

**預估時間**：1 小時

---

## 任務依賴關係

```
階段 1（基礎架構）
├─ Task 1.1 → Task 2.1（組件需要類型定義）
├─ Task 1.2 → Task 2.2（表格需要 mock 資料）
└─ Task 1.3 → Task 2.1（組件需要翻譯）

階段 2（頁面組件）
└─ Task 2.1 → Task 2.2 → Task 2.3 → Task 2.4 → Task 2.5（順序執行）

階段 3（互動功能）
└─ Task 3.1, 3.2, 3.3, 3.4（可並行開發）

階段 4（路由導航）
└─ Task 4.1 → Task 4.2 → Task 4.3（順序執行）

階段 5（樣式優化）
└─ Task 5.1 → Task 5.2（順序執行）

階段 6（測試文檔）
└─ Task 6.1 → Task 6.2 → Task 6.3（順序執行）
```

## 預估總時間
- **階段 1**：1.5 小時
- **階段 2**：3.5 小時
- **階段 3**：2.5 小時
- **階段 4**：1 小時
- **階段 5**：2 小時
- **階段 6**：4 小時

**總計**：約 14.5 小時（約 2 個工作日）

## 可並行執行的任務
- Task 3.1, 3.2, 3.3, 3.4 可以並行開發
- Task 5.1 和部分 Task 6.1 可以並行進行

## 關鍵里程碑
1. ✅ 階段 1 完成：基礎架構就緒
2. ✅ 階段 2 完成：基本頁面可以顯示資料
3. ✅ 階段 3 完成：所有互動功能可用
4. ✅ 階段 4 完成：可從導航選單訪問
5. ✅ 階段 6 完成：功能完全就緒，可交付
