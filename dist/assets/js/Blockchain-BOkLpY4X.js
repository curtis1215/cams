import{v as e,K as l}from"./vendor-BhfxMwoc.js";import{_ as a}from"./ChainTypeSelect.vue_vue_type_style_index_0_lang-BnpxTwcj.js";import{d as t,J as i,X as o,P as n,b as r}from"./ant-design-BRHeEO20.js";import{d,f as c,r as s,w as u,o as p,a0 as h,k as m,Y as v,X as f,Z as k,u as g,G as y,a1 as T,_ as w,W as b,a4 as x}from"./vue-vendor-B-98Oggh.js";import{_ as C}from"./index-Cibaxni6.js";import"./lodash-CiXSdKEp.js";const U={title:{blockchainQuery:"區塊鏈查詢",blockchainList:"區塊鏈列表",addBlockchain:"新增區塊鏈",editBlockchain:"編輯區塊鏈"},tabs:{blockchainInfo:"區塊鏈資訊",nodeManagement:"節點管理",walletParameters:"錢包參數"},field:{chainType:"鏈類型",chainCode:"鏈代碼",chainName:"鏈路名稱",servicePath:"服務路徑",confirmBlocks:"上帳區塊確認數",unlockBlocks:"解鎖區塊確認數",explorer:"區塊瀏覽器",lastUpdateTime:"最後更新時間",expectedTime:"預期轉帳時間",isEvm:"是否為 EVM",addressRegex:"地址正則表達式",nodeUrl:"節點URL",priority:"優先順序",isCurrentUsing:"當前使用",smallTransactionFilter:"小額交易過濾",enableSmallTransactionFilter:"啟用小額交易過濾",smallTransactionThreshold:"小額交易閾值",amountUnit:"數量",collectionWalletStorageLimit:"歸集錢包儲存上限",withdrawWalletStorageLimit:"出款錢包儲存上限",collectionWalletAlertThreshold:"歸集錢包告警水位比例",withdrawWalletAlertThreshold:"出款錢包告警水位比例"},action:{add:"新增",edit:"編輯",delete:"刪除",action:"操作",search:"查詢",confirm:"確認",cancel:"取消",addNode:"新增節點"},prompt:{selectChainType:"請選擇鏈類型",inputChainName:"請輸入鏈路名稱",inputChainCode:"請輸入鏈代碼",inputServicePath:"請輸入服務路徑",inputConfirmBlocks:"請輸入上帳區塊確認數",inputUnlockBlocks:"請輸入解鎖區塊確認數",inputExplorer:"請輸入區塊瀏覽器地址",inputExpectedTime:"請輸入預期轉帳時間",inputAddressRegex:"請輸入地址正則表達式",inputNodeUrl:"請輸入節點URL",inputPriority:"請輸入優先順序",inputSmallTransactionThreshold:"請輸入小額交易閾值",minuteUnit:"分鐘",inputCollectionWalletStorageLimit:"請輸入歸集錢包儲存上限",inputWithdrawWalletStorageLimit:"請輸入出款錢包儲存上限",inputCollectionWalletAlertThreshold:"請輸入歸集錢包告警水位比例(0-100%)",inputWithdrawWalletAlertThreshold:"請輸入出款錢包告警水位比例(0-100%)"},description:{expectedTime:"轉帳上鏈超過該時間，則會觸發異常告警",addressRegex:"未符合正則表達式地址，在提幣請求時將會直接拒絕",explorer:"請添加{hash}於url中需帶入txhash值的位置",nodeUrl:"請輸入完整的節點URL，包含協議和端口",priority:"數字越小優先順序越高",smallTransactionFilter:"啟用後將過濾小於設定閾值的交易，避免處理微小金額的交易"},message:{addSuccess:"新增成功",editSuccess:"編輯成功",deleteSuccess:"刪除成功",deleteConfirm:"確定要刪除嗎？",operationSuccess:"操作成功",operationFailed:"操作失敗"},common:{pagination:{total:"共 {total} 條"}}},S={title:{blockchainQuery:"Blockchain Query",blockchainList:"Blockchain List",addBlockchain:"Add Blockchain",editBlockchain:"Edit Blockchain"},tabs:{blockchainInfo:"Blockchain Info",nodeManagement:"Node Management",walletParameters:"Wallet Parameters"},field:{chainType:"Chain Type",chainCode:"Chain Code",chainName:"Chain Name",servicePath:"Service Path",confirmBlocks:"Confirm Blocks",unlockBlocks:"Unlock Blocks",explorer:"Block Explorer",lastUpdateTime:"Last Update Time",expectedTime:"Expected Transfer Time",isEvm:"Is EVM",addressRegex:"Address Regex",nodeUrl:"Node URL",priority:"Priority",isCurrentUsing:"Current Using",smallTransactionFilter:"Small Transaction Filter",enableSmallTransactionFilter:"Enable Small Transaction Filter",smallTransactionThreshold:"Small Transaction Threshold",amountUnit:"Amount",collectionWalletStorageLimit:"Collection Wallet Storage Limit",withdrawWalletStorageLimit:"Withdraw Wallet Storage Limit",collectionWalletAlertThreshold:"Collection Wallet Alert Threshold",withdrawWalletAlertThreshold:"Withdraw Wallet Alert Threshold"},action:{add:"Add",edit:"Edit",delete:"Delete",action:"Action",search:"Search",confirm:"Confirm",cancel:"Cancel",addNode:"Add Node"},prompt:{selectChainType:"Please select chain type",inputChainName:"Please input chain name",inputChainCode:"Please input chain code",inputServicePath:"Please input service path",inputConfirmBlocks:"Please input confirm blocks",inputUnlockBlocks:"Please input unlock blocks",inputExplorer:"Please input block explorer URL",inputExpectedTime:"Please input expected transfer time",inputAddressRegex:"Please input address regex",inputNodeUrl:"Please input node URL",inputPriority:"Please input priority",inputSmallTransactionThreshold:"Please input small transaction threshold",minuteUnit:"minutes",inputCollectionWalletStorageLimit:"Please input collection wallet storage limit",inputWithdrawWalletStorageLimit:"Please input withdraw wallet storage limit",inputCollectionWalletAlertThreshold:"Please input collection wallet alert threshold (0-100%)",inputWithdrawWalletAlertThreshold:"Please input withdraw wallet alert threshold (0-100%)"},description:{expectedTime:"An alert will be triggered if the transfer time exceeds this value",addressRegex:"Withdrawal requests with addresses not matching the regex will be rejected",explorer:"Please add {hash} where the txhash value should be in the URL",nodeUrl:"Please input complete node URL including protocol and port",priority:"Lower number means higher priority",smallTransactionFilter:"When enabled, transactions below the threshold will be filtered to avoid processing micro transactions"},message:{addSuccess:"Added successfully",editSuccess:"Edited successfully",deleteSuccess:"Deleted successfully",deleteConfirm:"Are you sure you want to delete?",operationSuccess:"Operation successful",operationFailed:"Operation failed"},common:{pagination:{total:"Total {total} items"}}},W={class:"blockchain-management"},_={class:"card-title"},P={style:{display:"flex","justify-content":"space-between","align-items":"center"}},B={class:"card-title"},L={class:"table-container"},A={class:"node-management"},E={class:"node-table-header"},R=C(d({__name:"Blockchain",setup(d){const C={zh:U,en:S},{t:R}=e({messages:C,legacy:!1}),N=c({chainType:void 0}),F=[{title:R("field.chainName"),dataIndex:"chainName",key:"chainName",width:150},{title:R("field.chainCode"),dataIndex:"chainCode",key:"chainCode",width:150},{title:R("field.servicePath"),dataIndex:"servicePath",key:"servicePath",width:200},{title:R("field.isEvm"),dataIndex:"isEvm",key:"isEvm",width:100,customRender:({text:e})=>e?"✓":""},{title:R("field.confirmBlocks"),dataIndex:"confirmBlocks",key:"confirmBlocks",width:150},{title:R("field.unlockBlocks"),dataIndex:"unlockBlocks",key:"unlockBlocks",width:150},{title:R("field.explorer"),dataIndex:"explorer",key:"explorer",width:200},{title:R("field.lastUpdateTime"),dataIndex:"lastUpdateTime",key:"lastUpdateTime",width:180},{title:R("action.action"),key:"action",width:120,fixed:"right"}],I=[{title:R("field.nodeUrl"),dataIndex:"url",key:"url",width:300},{title:R("field.priority"),dataIndex:"priority",key:"priority",width:100},{title:R("field.isCurrentUsing"),dataIndex:"isCurrentUsing",key:"isCurrentUsing",width:100,customRender:({text:e})=>e?"✓":""},{title:R("action.action"),key:"action",width:80}],j=c([]),q=s({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>R("common.pagination.total",{total:e})}),z=c(!1),O=c(""),M=c(!1),V=c(null),Q=c(!1),K=c(1),D=s({chainName:"",chainCode:"",servicePath:"",confirmBlocks:void 0,unlockBlocks:void 0,explorer:"",isEvm:!1,expectedTime:void 0,addressRegex:"",enableSmallTransactionFilter:!1,smallTransactionThreshold:void 0,collectionWalletStorageLimit:void 0,collectionWalletAlertThreshold:void 0,withdrawWalletStorageLimit:void 0,withdrawWalletAlertThreshold:void 0,nodes:[]}),J={chainName:[{required:!0,message:R("prompt.inputChainName")}],chainCode:[{required:!0,message:R("prompt.inputChainCode")}],servicePath:[{required:!0,message:R("prompt.inputServicePath")}],confirmBlocks:[{required:!0,message:R("prompt.inputConfirmBlocks")}],unlockBlocks:[{required:!0,message:R("prompt.inputUnlockBlocks")}],expectedTime:[{required:!0,message:R("prompt.inputExpectedTime")}],nodes:[{required:!0,validator:(e,l)=>{if(!l||0===l.length)return Promise.reject(new Error(R("prompt.inputNodeUrl")));for(const a of l)if(!a.url)return Promise.reject(new Error(R("prompt.inputNodeUrl")));return Promise.resolve()}}]},X=async()=>{try{const e=(await l((async()=>{const{default:e}=await import("./list.mock-CnSXDrDW.js");return{default:e}}),[],import.meta.url)).default;j.value=e.list.map((e=>({...e,isEvm:e.isEvm||!1}))),q.total=e.total}catch(e){}},G=()=>{q.current=1,X()},Y=(e,l,a)=>{q.current=e.current||1,q.pageSize=e.pageSize||10,X()},Z=()=>{Q.value=!1,O.value=R("title.addBlockchain"),Object.assign(D,{chainName:"",chainCode:"",servicePath:"",confirmBlocks:void 0,unlockBlocks:void 0,explorer:"",isEvm:!1,expectedTime:void 0,addressRegex:"",enableSmallTransactionFilter:!1,smallTransactionThreshold:void 0,collectionWalletStorageLimit:void 0,collectionWalletAlertThreshold:void 0,withdrawWalletStorageLimit:void 0,withdrawWalletAlertThreshold:void 0,nodes:[]}),z.value=!0,K.value=1},$=async()=>{try{V.value&&(await V.value.validate(),M.value=!0,setTimeout((()=>{z.value=!1,M.value=!1,r.success(Q.value?R("message.editSuccess"):R("message.addSuccess")),X()}),1e3))}catch(e){}},H=()=>{z.value=!1,V.value&&V.value.resetFields()};u((()=>D.chainCode),(e=>{D.servicePath=e?`cryp-${e}`:""}));const ee=()=>{D.nodes||(D.nodes=[]),D.nodes.push({url:"",priority:D.nodes.length+1,isCurrentUsing:0===D.nodes.length})},le=e=>{e||(D.smallTransactionThreshold=void 0)};return p((()=>{X(),window.addEventListener("error",(e=>{"ResizeObserver loop completed with undelivered notifications."===e.message&&e.stopImmediatePropagation()}))})),(e,l)=>{const r=f("a-form-item"),d=f("a-button"),c=f("a-form"),s=f("a-card"),u=f("a-space"),p=f("a-table"),C=f("a-input"),U=f("a-input-number"),S=f("a-checkbox"),X=f("a-textarea"),ae=f("a-tab-pane"),te=f("a-tabs"),ie=f("a-modal");return k(),h("div",W,[m(s,{bordered:!1,class:"filter-card"},{title:v((()=>[w("span",_,T(g(R)("title.blockchainQuery")),1)])),default:v((()=>[m(c,{layout:"inline",model:N.value,class:"query-form"},{default:v((()=>[m(r,{label:g(R)("field.chainType"),class:"form-item"},{default:v((()=>[m(a,{modelValue:N.value.chainType,"onUpdate:modelValue":l[0]||(l[0]=e=>N.value.chainType=e),placeholder:g(R)("prompt.selectChainType"),style:{width:"180px"}},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),m(r,{class:"form-item"},{default:v((()=>[m(d,{type:"primary",onClick:G},{icon:v((()=>[m(g(t))])),default:v((()=>[y(" "+T(g(R)("action.search")),1)])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),m(s,{bordered:!1,bodyStyle:{padding:"20px 24px"},class:"table-card"},{title:v((()=>[w("div",P,[w("span",B,T(g(R)("title.blockchainList")),1),m(d,{type:"primary",onClick:Z},{icon:v((()=>[m(g(n))])),default:v((()=>[y(" "+T(g(R)("action.add")),1)])),_:1})])])),default:v((()=>[w("div",L,[m(p,{columns:F,"data-source":j.value,pagination:q,bordered:!0,scroll:{x:1400},onChange:Y},{bodyCell:v((({column:e,record:l})=>["action"===e.key?(k(),b(u,{key:0},{default:v((()=>[m(g(i),{class:"action-icon",onClick:e=>(e=>{Q.value=!0,O.value=R("title.editBlockchain"),Object.assign(D,e),z.value=!0,K.value=1})(l)},null,8,["onClick"]),m(g(o),{class:"action-icon",onClick:e=>{}},null,8,["onClick"])])),_:2},1024)):x("",!0)])),_:1},8,["data-source","pagination"])])])),_:1}),m(ie,{open:z.value,"onUpdate:open":l[17]||(l[17]=e=>z.value=e),title:O.value,onOk:$,onCancel:H,confirmLoading:M.value,width:"800px"},{default:v((()=>[m(te,{activeKey:K.value,"onUpdate:activeKey":l[16]||(l[16]=e=>K.value=e)},{default:v((()=>[(k(),b(ae,{key:1,tab:g(R)("tabs.blockchainInfo")},{default:v((()=>[m(c,{model:D,rules:J,ref_key:"formRef",ref:V,layout:"vertical"},{default:v((()=>[m(r,{label:g(R)("field.chainName"),name:"chainName"},{default:v((()=>[m(C,{value:D.chainName,"onUpdate:value":l[1]||(l[1]=e=>D.chainName=e),placeholder:g(R)("prompt.inputChainName")},null,8,["value","placeholder"])])),_:1},8,["label"]),m(r,{label:g(R)("field.chainCode"),name:"chainCode"},{default:v((()=>[m(C,{value:D.chainCode,"onUpdate:value":l[2]||(l[2]=e=>D.chainCode=e),placeholder:g(R)("prompt.inputChainCode")},null,8,["value","placeholder"])])),_:1},8,["label"]),m(r,{label:g(R)("field.servicePath"),name:"servicePath"},{default:v((()=>[m(C,{value:D.servicePath,"onUpdate:value":l[3]||(l[3]=e=>D.servicePath=e),placeholder:g(R)("prompt.inputServicePath"),disabled:!0},null,8,["value","placeholder"])])),_:1},8,["label"]),m(r,{label:g(R)("field.confirmBlocks"),name:"confirmBlocks"},{default:v((()=>[m(U,{value:D.confirmBlocks,"onUpdate:value":l[4]||(l[4]=e=>D.confirmBlocks=e),placeholder:g(R)("prompt.inputConfirmBlocks"),min:1,style:{width:"100%"}},null,8,["value","placeholder"])])),_:1},8,["label"]),m(r,{label:g(R)("field.unlockBlocks"),name:"unlockBlocks"},{default:v((()=>[m(U,{value:D.unlockBlocks,"onUpdate:value":l[5]||(l[5]=e=>D.unlockBlocks=e),placeholder:g(R)("prompt.inputUnlockBlocks"),min:1,style:{width:"100%"}},null,8,["value","placeholder"])])),_:1},8,["label"]),m(r,{label:g(R)("field.explorer"),name:"explorer",extra:g(R)("description.explorer")},{default:v((()=>[m(C,{value:D.explorer,"onUpdate:value":l[6]||(l[6]=e=>D.explorer=e),placeholder:g(R)("prompt.inputExplorer")},null,8,["value","placeholder"])])),_:1},8,["label","extra"]),m(r,{label:g(R)("field.isEvm"),name:"isEvm"},{default:v((()=>[m(S,{checked:D.isEvm,"onUpdate:checked":l[7]||(l[7]=e=>D.isEvm=e)},null,8,["checked"])])),_:1},8,["label"]),m(r,{label:g(R)("field.expectedTime"),name:"expectedTime",extra:g(R)("description.expectedTime")},{default:v((()=>[m(U,{value:D.expectedTime,"onUpdate:value":l[8]||(l[8]=e=>D.expectedTime=e),placeholder:g(R)("prompt.inputExpectedTime"),min:1,addonAfter:g(R)("prompt.minuteUnit"),style:{width:"100%"}},null,8,["value","placeholder","addonAfter"])])),_:1},8,["label","extra"]),m(r,{label:g(R)("field.addressRegex"),name:"addressRegex",extra:g(R)("description.addressRegex")},{default:v((()=>[m(X,{value:D.addressRegex,"onUpdate:value":l[9]||(l[9]=e=>D.addressRegex=e),placeholder:g(R)("prompt.inputAddressRegex"),"auto-size":{minRows:2,maxRows:6}},null,8,["value","placeholder"])])),_:1},8,["label","extra"]),m(r,{label:g(R)("field.smallTransactionFilter"),name:"enableSmallTransactionFilter",extra:g(R)("description.smallTransactionFilter")},{default:v((()=>[m(S,{checked:D.enableSmallTransactionFilter,"onUpdate:checked":l[10]||(l[10]=e=>D.enableSmallTransactionFilter=e),onChange:le},{default:v((()=>[y(T(g(R)("field.enableSmallTransactionFilter")),1)])),_:1},8,["checked"]),D.enableSmallTransactionFilter?(k(),b(U,{key:0,value:D.smallTransactionThreshold,"onUpdate:value":l[11]||(l[11]=e=>D.smallTransactionThreshold=e),placeholder:g(R)("prompt.inputSmallTransactionThreshold"),min:0,step:1e-6,precision:6,style:{width:"100%","margin-top":"8px"},addonAfter:g(R)("field.amountUnit")},null,8,["value","placeholder","addonAfter"])):x("",!0)])),_:1},8,["label","extra"])])),_:1},8,["model"])])),_:1},8,["tab"])),(k(),b(ae,{key:2,tab:g(R)("tabs.nodeManagement")},{default:v((()=>[w("div",A,[w("div",E,[m(d,{type:"primary",onClick:ee},{icon:v((()=>[m(g(n))])),default:v((()=>[y(" "+T(g(R)("action.addNode")),1)])),_:1})]),m(p,{columns:I,"data-source":D.nodes,pagination:!1,bordered:!0},{bodyCell:v((({column:e,record:l,index:a})=>["url"===e.key?(k(),b(C,{key:0,value:l.url,"onUpdate:value":e=>l.url=e,placeholder:g(R)("prompt.inputNodeUrl")},null,8,["value","onUpdate:value","placeholder"])):x("",!0),"priority"===e.key?(k(),b(U,{key:1,value:l.priority,"onUpdate:value":e=>l.priority=e,min:1,disabled:!0,style:{width:"100%"}},null,8,["value","onUpdate:value"])):x("",!0),"isCurrentUsing"===e.key?(k(),b(S,{key:2,checked:l.isCurrentUsing,"onUpdate:checked":e=>l.isCurrentUsing=e,onChange:e=>((e,l)=>{D.nodes.forEach(((e,a)=>{a!==l&&(e.isCurrentUsing=!1)}))})(0,a)},null,8,["checked","onUpdate:checked","onChange"])):x("",!0),"action"===e.key?(k(),b(g(o),{key:3,class:"action-icon",onClick:e=>(e=>{D.nodes.splice(e,1)})(a)},null,8,["onClick"])):x("",!0)])),_:1},8,["data-source"])])])),_:1},8,["tab"])),(k(),b(ae,{key:3,tab:g(R)("tabs.walletParameters")},{default:v((()=>[m(c,{model:D,layout:"vertical"},{default:v((()=>[m(r,{label:g(R)("field.collectionWalletStorageLimit"),name:"collectionWalletStorageLimit"},{default:v((()=>[m(U,{value:D.collectionWalletStorageLimit,"onUpdate:value":l[12]||(l[12]=e=>D.collectionWalletStorageLimit=e),placeholder:g(R)("prompt.inputCollectionWalletStorageLimit"),min:0,precision:2,style:{width:"100%"}},null,8,["value","placeholder"])])),_:1},8,["label"]),m(r,{label:g(R)("field.collectionWalletAlertThreshold"),name:"collectionWalletAlertThreshold"},{default:v((()=>[m(U,{value:D.collectionWalletAlertThreshold,"onUpdate:value":l[13]||(l[13]=e=>D.collectionWalletAlertThreshold=e),placeholder:g(R)("prompt.inputCollectionWalletAlertThreshold"),min:0,max:100,precision:0,"addon-after":"%",style:{width:"100%"}},null,8,["value","placeholder"])])),_:1},8,["label"]),m(r,{label:g(R)("field.withdrawWalletStorageLimit"),name:"withdrawWalletStorageLimit"},{default:v((()=>[m(U,{value:D.withdrawWalletStorageLimit,"onUpdate:value":l[14]||(l[14]=e=>D.withdrawWalletStorageLimit=e),placeholder:g(R)("prompt.inputWithdrawWalletStorageLimit"),min:0,precision:2,style:{width:"100%"}},null,8,["value","placeholder"])])),_:1},8,["label"]),m(r,{label:g(R)("field.withdrawWalletAlertThreshold"),name:"withdrawWalletAlertThreshold"},{default:v((()=>[m(U,{value:D.withdrawWalletAlertThreshold,"onUpdate:value":l[15]||(l[15]=e=>D.withdrawWalletAlertThreshold=e),placeholder:g(R)("prompt.inputWithdrawWalletAlertThreshold"),min:0,max:100,precision:0,"addon-after":"%",style:{width:"100%"}},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["tab"]))])),_:1},8,["activeKey"])])),_:1},8,["open","title","confirmLoading"])])}}}),[["__scopeId","data-v-6dc79be5"]]);export{R as default};
