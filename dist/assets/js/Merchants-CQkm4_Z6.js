import{d as e,r as a,f as t,c as l,o as i,a0 as c,k as n,Y as s,u as d,X as u,Z as r,G as o,a1 as m,_ as v,W as p,a4 as h,$ as f,F as y,a2 as b,B as T}from"./vue-vendor-B-98Oggh.js";import{v as C}from"./vendor-BhfxMwoc.js";import{d as k,f as S,_}from"./index-B2ZFid6D.js";import{b as g,d as w,P as E}from"./ant-design-0M0Sv-BJ.js";import"./lodash-CiXSdKEp.js";const U={merchantList:[{id:"M001",name:"測試商戶1",code:"TEST001",status:"active",updateTime:"2024-01-22 10:30:45"},{id:"M002",name:"測試商戶2",code:"TEST002",status:"inactive",updateTime:"2024-01-22 09:15:30"},{id:"M003",name:"測試商戶3",code:"TEST003",status:"active",updateTime:"2024-01-21 16:45:20"},{id:"M004",name:"測試商戶4",code:"TEST004",status:"active",updateTime:"2024-01-21 14:20:10"},{id:"M005",name:"測試商戶5",code:"TEST005",status:"inactive",updateTime:"2024-01-20 17:55:40"},{id:"M006",name:"測試商戶6",code:"TEST006",status:"active",updateTime:"2024-01-20 11:30:25"},{id:"M007",name:"測試商戶7",code:"TEST007",status:"active",updateTime:"2024-01-19 15:40:35"},{id:"M008",name:"測試商戶8",code:"TEST008",status:"inactive",updateTime:"2024-01-19 09:25:15"},{id:"M009",name:"測試商戶9",code:"TEST009",status:"active",updateTime:"2024-01-18 16:50:30"},{id:"M010",name:"測試商戶10",code:"TEST010",status:"active",updateTime:"2024-01-18 13:15:50"}]},M=[{code:"BTC",name:"Bitcoin"},{code:"ETH",name:"Ethereum"},{code:"USDT",name:"Tether"},{code:"BNB",name:"Binance Coin"},{code:"SOL",name:"Solana"},{code:"XRP",name:"Ripple"},{code:"ADA",name:"Cardano"},{code:"DOGE",name:"Dogecoin"},{code:"AVAX",name:"Avalanche"},{code:"DOT",name:"Polkadot"},{code:"MATIC",name:"Polygon"},{code:"UNI",name:"Uniswap"},{code:"LTC",name:"Litecoin"},{code:"LINK",name:"Chainlink"},{code:"ATOM",name:"Cosmos"},{code:"XLM",name:"Stellar"},{code:"NEAR",name:"NEAR Protocol"},{code:"ALGO",name:"Algorand"},{code:"FTM",name:"Fantom"},{code:"VET",name:"VeChain"},{code:"HBAR",name:"Hedera"},{code:"FIL",name:"Filecoin"},{code:"EOS",name:"EOS"},{code:"XTZ",name:"Tezos"},{code:"AAVE",name:"Aave"},{code:"EGLD",name:"MultiversX"},{code:"XMR",name:"Monero"},{code:"CAKE",name:"PancakeSwap"},{code:"NEO",name:"NEO"},{code:"QTUM",name:"Qtum"}],A={class:"merchants-container"},D={class:"table-container"},x={class:"currency-grid"},O={class:"select-all-wrapper"},$={class:"currency-columns"},B={class:"chain-type-list"},K=["onClick"],R={class:"chain-type-name"},I={class:"currency-list"},L={class:"currency-list-header"},j={class:"currency-list-content"},q=_(e({__name:"Merchants",setup(e){const _={zh:S,en:k},{t:q}=C({messages:_,legacy:!1}),X=[{title:q("field.name"),dataIndex:"name",key:"name"},{title:q("field.code"),dataIndex:"code",key:"code"},{title:q("field.status"),dataIndex:"status",key:"status"},{title:q("field.updateTime"),dataIndex:"updateTime",key:"updateTime"},{title:q("field.action"),key:"action",fixed:"right",width:150}],N=a({name:"",status:void 0}),P=t(U.merchantList),z=t(!1),F=t(!1),H=t(""),G=t(),V=t(1);t(M);const Q=a({id:"",name:"",code:"",status:"active",updateTime:"",retryCount:3,depositStatus:!0,withdrawStatus:!0,availableCurrencies:[]}),Z={name:[{required:!0,message:q("validation.nameRequired")}],code:[{required:!0,message:q("validation.codeRequired")}],status:[{required:!0,message:q("validation.statusRequired")}],retryCount:[{required:!0,message:q("validation.retryCountRequired")}]},J=a({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0}),W=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let t=0;t<32;t++)a+=e.charAt(Math.floor(62*Math.random()));Q.privateKey=a,g.success(q("message.generateKeySuccess"))},Y=()=>{const e=U.merchantList.filter((e=>!(N.name&&!e.name.includes(N.name))&&(!N.status||e.status===N.status)));P.value=e},ee=()=>{H.value=q("title.addMerchant"),Object.assign(Q,{id:"",name:"",code:"",status:"active",updateTime:"",retryCount:3,depositStatus:!0,withdrawStatus:!0,availableCurrencies:[]}),F.value=!0,V.value=1},ae=async()=>{try{await G.value.validate(),g.success(q("message.saveSuccess")),F.value=!1}catch(e){}},te=()=>{var e;null==(e=G.value)||e.resetFields(),F.value=!1},le=e=>{J.current=e.current,J.pageSize=e.pageSize,ie()},ie=async()=>{z.value=!0;try{P.value=U.merchantList,z.value=!1}catch(e){g.error(q("message.fetchError")),z.value=!1}},ce=["BSC","ETH","TRX","BTC"],ne={BSC:["USDT","USDC","BUSD","DAI"],ETH:["USDT","USDC","DAI"],TRX:["USDT","USDC"],BTC:["BTC"]},se=e=>ne[e].map((a=>`${e}_${a}`)).every((e=>Q.availableCurrencies.includes(e))),de=e=>{const a=ne[e].map((a=>`${e}_${a}`)),t=a.filter((e=>Q.availableCurrencies.includes(e))).length;return t>0&&t<a.length},ue=l((()=>Object.values(ne).flat().map(((e,a)=>`${a}_${e}`)).every((e=>Q.availableCurrencies.includes(e))))),re=l((()=>{const e=Object.values(ne).flat().map(((e,a)=>`${a}_${e}`)),a=e.filter((e=>Q.availableCurrencies.includes(e))).length;return a>0&&a<e.length})),oe=e=>{if(e.target.checked){const e=Object.entries(ne).flatMap((([e,a])=>a.map((a=>`${e}_${a}`))));Q.availableCurrencies=e}else Q.availableCurrencies=[]},me=t(ce[0]);return i((()=>{ie()})),(e,a)=>{const t=u("a-input"),l=u("a-form-item"),i=u("a-select-option"),C=u("a-select"),k=u("a-button"),S=u("a-form"),_=u("a-card"),U=u("a-space"),M=u("a-table"),ie=u("a-input-group"),ve=u("a-input-number"),pe=u("a-tab-pane"),he=u("a-switch"),fe=u("a-checkbox"),ye=u("a-checkbox-group"),be=u("a-tabs"),Te=u("a-modal");return r(),c("div",A,[n(_,{title:d(q)("title.queryCondition"),bordered:!1,class:"filter-card"},{default:s((()=>[n(S,{layout:"inline",model:N,class:"query-form"},{default:s((()=>[n(l,{label:d(q)("field.name"),class:"form-item"},{default:s((()=>[n(t,{value:N.name,"onUpdate:value":a[0]||(a[0]=e=>N.name=e),placeholder:d(q)("prompt.inputName"),"allow-clear":"",style:{width:"200px"}},null,8,["value","placeholder"])])),_:1},8,["label"]),n(l,{label:d(q)("field.status"),class:"form-item"},{default:s((()=>[n(C,{value:N.status,"onUpdate:value":a[1]||(a[1]=e=>N.status=e),placeholder:d(q)("prompt.selectStatus"),style:{width:"200px"},"allow-clear":""},{default:s((()=>[n(i,{value:"active"},{default:s((()=>[o(m(d(q)("status.active")),1)])),_:1}),n(i,{value:"inactive"},{default:s((()=>[o(m(d(q)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),n(l,{class:"form-item"},{default:s((()=>[n(k,{type:"primary",onClick:Y},{icon:s((()=>[n(d(w))])),default:s((()=>[o(" "+m(d(q)("action.search")),1)])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title"]),n(_,{title:d(q)("title.merchantManagement"),bordered:!1,class:"table-card"},{extra:s((()=>[n(k,{type:"primary",onClick:ee},{icon:s((()=>[n(d(E))])),default:s((()=>[o(" "+m(d(q)("action.add")),1)])),_:1})])),default:s((()=>[v("div",D,[n(M,{columns:X,"data-source":P.value,loading:z.value,rowKey:"id",pagination:J,bordered:!0,onChange:le},{bodyCell:s((({column:e,record:a})=>["action"===e.key?(r(),p(U,{key:0},{default:s((()=>[n(k,{type:"link",onClick:e=>(e=>{H.value=q("title.editMerchant"),Object.assign(Q,{...e,depositStatus:!0,withdrawStatus:!0,availableCurrencies:["BSC_USDT","ETH_USDT","TRX_USDT"]}),F.value=!0,V.value=1})(a)},{default:s((()=>[o(m(d(q)("action.edit")),1)])),_:2},1032,["onClick"]),n(k,{type:"link",danger:"",onClick:e=>(async()=>{g.success(q("message.deleteSuccess"))})()},{default:s((()=>[o(m(d(q)("action.delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)):"status"===e.key?(r(),c("span",{key:1,class:f(["status-tag","active"===a.status?"status-enabled":"status-disabled"])},m(d(q)(`status.${a.status}`)),3)):h("",!0)])),_:1},8,["data-source","loading","pagination"])])])),_:1},8,["title"]),n(Te,{open:F.value,"onUpdate:open":a[11]||(a[11]=e=>F.value=e),title:H.value,onOk:ae,onCancel:te,width:"800px"},{default:s((()=>[n(be,{activeKey:V.value,"onUpdate:activeKey":a[10]||(a[10]=e=>V.value=e)},{default:s((()=>[(r(),p(pe,{key:1,tab:d(q)("title.merchantInfo")},{default:s((()=>[n(S,{ref_key:"formRef",ref:G,model:Q,rules:Z,"label-col":{span:6},"wrapper-col":{span:16}},{default:s((()=>[n(l,{label:d(q)("field.name"),name:"name"},{default:s((()=>[n(t,{value:Q.name,"onUpdate:value":a[2]||(a[2]=e=>Q.name=e),placeholder:d(q)("prompt.inputName")},null,8,["value","placeholder"])])),_:1},8,["label"]),n(l,{label:d(q)("field.code"),name:"code"},{default:s((()=>[n(t,{value:Q.code,"onUpdate:value":a[3]||(a[3]=e=>Q.code=e),placeholder:d(q)("prompt.inputCode")},null,8,["value","placeholder"])])),_:1},8,["label"]),n(l,{label:d(q)("field.status"),name:"status"},{default:s((()=>[n(C,{value:Q.status,"onUpdate:value":a[4]||(a[4]=e=>Q.status=e),placeholder:d(q)("prompt.selectStatus")},{default:s((()=>[n(i,{value:"active"},{default:s((()=>[o(m(d(q)("status.active")),1)])),_:1}),n(i,{value:"inactive"},{default:s((()=>[o(m(d(q)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),n(l,{label:d(q)("field.privateKey"),name:"privateKey"},{default:s((()=>[n(ie,{compact:""},{default:s((()=>[n(t,{value:Q.privateKey,"onUpdate:value":a[5]||(a[5]=e=>Q.privateKey=e),placeholder:d(q)("field.privateKey"),style:{width:"calc(100% - 110px)"},readonly:""},null,8,["value","placeholder"]),n(k,{type:"primary",onClick:W},{default:s((()=>[o(m(d(q)("action.generateKey")),1)])),_:1})])),_:1})])),_:1},8,["label"]),n(l,{label:d(q)("field.retryCount"),name:"retryCount"},{default:s((()=>[n(ve,{value:Q.retryCount,"onUpdate:value":a[6]||(a[6]=e=>Q.retryCount=e),min:0,max:10,style:{width:"100%"}},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["tab"])),(r(),p(pe,{key:2,tab:d(q)("title.merchantPermission")},{default:s((()=>[n(S,{model:Q,"label-col":{span:6},"wrapper-col":{span:16}},{default:s((()=>[n(l,{label:d(q)("field.depositStatus"),name:"depositStatus"},{default:s((()=>[n(he,{checked:Q.depositStatus,"onUpdate:checked":a[7]||(a[7]=e=>Q.depositStatus=e),"checked-children":d(q)("status.active"),"un-checked-children":d(q)("status.inactive")},null,8,["checked","checked-children","un-checked-children"])])),_:1},8,["label"]),n(l,{label:d(q)("field.withdrawStatus"),name:"withdrawStatus"},{default:s((()=>[n(he,{checked:Q.withdrawStatus,"onUpdate:checked":a[8]||(a[8]=e=>Q.withdrawStatus=e),"checked-children":d(q)("status.active"),"un-checked-children":d(q)("status.inactive")},null,8,["checked","checked-children","un-checked-children"])])),_:1},8,["label"]),n(l,{label:d(q)("field.availableCurrencies"),name:"availableCurrencies"},{default:s((()=>{return[v("div",x,[v("div",O,[n(fe,{checked:ue.value,indeterminate:re.value,onChange:oe},{default:s((()=>[o(m(d(q)("action.selectAll")),1)])),_:1},8,["checked","indeterminate"])]),v("div",$,[v("div",B,[(r(),c(y,null,b(ce,(e=>v("div",{key:e,class:f(["chain-type-item",{active:me.value===e}]),onClick:a=>(e=>{me.value=e})(e)},[v("span",R,m(e),1),n(fe,{checked:se(e),indeterminate:de(e),onClick:T((a=>((e,a)=>{const t=ne[a].map((e=>`${a}_${e}`));if(e.target.checked){const e=[...new Set([...Q.availableCurrencies,...t])];Q.availableCurrencies=e}else Q.availableCurrencies=Q.availableCurrencies.filter((e=>!t.includes(e)))})(a,e)),["stop"])},null,8,["checked","indeterminate","onClick"])],10,K))),64))]),v("div",I,[v("div",L,m(me.value)+" "+m(d(q)("field.currencies")),1),v("div",j,[n(ye,{value:Q.availableCurrencies,"onUpdate:value":a[9]||(a[9]=e=>Q.availableCurrencies=e),options:(e=me.value,ne[e].map((a=>({label:a,value:`${e}_${a}`}))))},null,8,["value","options"])])])])])];var e})),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["tab"]))])),_:1},8,["activeKey"])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-ac9482f3"]]);export{q as default};
