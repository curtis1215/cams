import{v as e}from"./vendor-BhfxMwoc.js";import{_ as a}from"./index-Bm9Z6zrZ.js";import{P as t,b as i}from"./ant-design-0M0Sv-BJ.js";import{f as r,r as l,a0 as o,Z as s,k as d,Y as n,_ as c,X as p,W as u,a4 as m,G as k,a1 as y,u as h,F as f,a2 as g}from"./vue-vendor-B-98Oggh.js";import"./lodash-CiXSdKEp.js";const v={title:{roleList:"角色列表",roleManagement:"角色管理",addRole:"新增角色",editRole:"編輯角色"},field:{roleName:"角色名稱",roleDescription:"角色描述",permissions:"權限設置",createTime:"創建時間",updateTime:"更新時間",twoFactorAuth:"雙重認證",twoFactorAuthRequired:"是否啟用雙重認證"},action:{addRole:"新增角色",editRole:"編輯角色",deleteRole:"刪除角色",save:"保存",cancel:"取消",action:"操作"},permission:{read:"讀取",create:"新增",update:"編輯",delete:"刪除"},module:{monitor:{title:"監控管理",dashboard:"數據監控",alert:"告警監控"},wallet:{title:"錢包管理",query:"錢包查詢",detail:"錢包詳情",privateKey:"私鑰管理",transfer:"錢包轉賬",tokenExchange:"代幣兌換管理"},order:{title:"訂單管理",deposit:"充值訂單查詢",withdraw:"提現訂單查詢",transfer:"轉賬訂單查詢",exchange:"兌換訂單查詢",transaction:"交易明細查詢"},reconciliation:{title:"對帳管理",walletBalance:"對帳明細查詢"},params:{title:"參數管理",blockchain:"區塊鏈管理",contractCoin:"合約幣種管理"},system:{title:"系統管理",users:"用戶管理",roles:"角色管理",merchants:"商戶管理"}},message:{deleteConfirm:"確定要刪除此角色嗎？",deleteSuccess:"角色刪除成功",saveFailed:"保存失敗",saveSuccess:"保存成功",roleNameRequired:"請輸入角色名稱",roleDescriptionRequired:"請輸入角色描述"},prompt:{inputRoleName:"請輸入角色名稱",inputRoleDescription:"請輸入角色描述"}},R={title:{roleList:"Role List",roleManagement:"Role Management",addRole:"Add Role",editRole:"Edit Role"},field:{roleName:"Role Name",roleDescription:"Role Description",permissions:"Permissions",createTime:"Create Time",updateTime:"Update Time",twoFactorAuth:"Two-Factor Authentication",twoFactorAuthRequired:"Enable Two-Factor Authentication"},action:{addRole:"Add Role",editRole:"Edit Role",deleteRole:"Delete Role",save:"Save",cancel:"Cancel",action:"Actions"},permission:{read:"Read",create:"Create",update:"Update",delete:"Delete"},module:{monitor:{title:"Monitoring",dashboard:"Data Monitoring",alert:"Alert Monitoring"},wallet:{title:"Wallet Management",query:"Wallet Query",detail:"Wallet Detail",privateKey:"Private Key Management",transfer:"Wallet Transfer",tokenExchange:"Token Exchange"},order:{title:"Order Management",deposit:"Deposit Orders",withdraw:"Withdraw Orders",transfer:"Transfer Orders",exchange:"Exchange Orders",transaction:"Transaction Details"},reconciliation:{title:"Reconciliation",walletBalance:"Balance Query"},params:{title:"Parameters",blockchain:"Blockchain",contractCoin:"Contract Coins"},system:{title:"System",users:"Users",roles:"Roles",merchants:"Merchants"}},message:{deleteConfirm:"Are you sure you want to delete this role?",deleteSuccess:"Role deleted successfully",saveFailed:"Save failed",saveSuccess:"Save successful",roleNameRequired:"Please input role name",roleDescriptionRequired:"Please input role description"},prompt:{inputRoleName:"Please input role name",inputRoleDescription:"Please input role description"}},w=[{id:1,roleName:"超級管理員",roleDescription:"系統最高權限管理員，可以管理所有功能",createTime:"2024-03-20 10:00:00",updateTime:"2024-03-20 10:00:00"},{id:2,roleName:"財務管理員",roleDescription:"負責處理錢包轉賬、訂單管理和對帳等財務相關操作",createTime:"2024-03-20 11:30:00",updateTime:"2024-03-20 14:15:00"},{id:3,roleName:"運維人員",roleDescription:"負責系統監控和告警處理",createTime:"2024-03-20 13:45:00",updateTime:"2024-03-20 16:20:00"},{id:4,roleName:"商戶管理員",roleDescription:"負責商戶管理和商戶相關配置",createTime:"2024-03-21 09:00:00",updateTime:"2024-03-21 09:00:00"},{id:5,roleName:"查詢人員",roleDescription:"擁有所有模塊的只讀權限",createTime:"2024-03-21 10:30:00",updateTime:"2024-03-21 10:30:00"}],D={class:"roles-management"},T={style:{display:"flex","justify-content":"space-between","align-items":"center"}},b={class:"card-title"},N={class:"table-container"},C={class:"permission-module"},_={class:"module-title"},q={class:"permission-pages"},F={class:"page-title"},x={class:"permission-items"},A=a({__name:"Roles",setup(a){const A={zh:v,en:R},{t:S}=e({messages:A,legacy:!1}),E=[{title:S("field.roleName"),dataIndex:"roleName",key:"roleName",width:200},{title:S("field.roleDescription"),dataIndex:"roleDescription",key:"roleDescription",width:300},{title:S("field.createTime"),dataIndex:"createTime",key:"createTime",width:200},{title:S("field.updateTime"),dataIndex:"updateTime",key:"updateTime",width:200},{title:S("action.action"),key:"action",width:200,fixed:"right"}],M=r(w),U=[{key:"monitor",pages:[{key:"dashboard",permissions:["read"]},{key:"alert",permissions:["read","create","update","delete"]}]},{key:"wallet",pages:[{key:"query",permissions:["read","create","update"]},{key:"detail",permissions:["read","create","update"]},{key:"privateKey",permissions:["read"]},{key:"transfer",permissions:["read","create","update"]},{key:"tokenExchange",permissions:["read","create","update"]}]},{key:"order",pages:[{key:"deposit",permissions:["read","create","update"]},{key:"withdraw",permissions:["read","create","update"]},{key:"transfer",permissions:["read","create","update"]},{key:"exchange",permissions:["read","create","update"]},{key:"transaction",permissions:["read","create","update"]}]},{key:"reconciliation",pages:[{key:"walletBalance",permissions:["read","update"]}]},{key:"params",pages:[{key:"blockchain",permissions:["read","create","update","delete"]},{key:"contractCoin",permissions:["read","create","update","delete"]}]},{key:"system",pages:[{key:"users",permissions:["read","create","update","delete"]},{key:"roles",permissions:["read","create","update","delete"]},{key:"merchants",permissions:["read","create","update","delete"]}]}],P=r(!1),j=r(!1),L=r(null),O=r(!1),W=()=>{const e={};return U.forEach((a=>{e[a.key]={},a.pages.forEach((t=>{e[a.key][t.key]={},t.permissions.forEach((i=>{e[a.key][t.key][i]=!1}))}))})),e},z=l({roleName:"",roleDescription:"",twoFactorAuthRequired:!1,permissions:W()}),B={roleName:[{required:!0,message:S("message.roleNameRequired"),trigger:"blur"}],roleDescription:[{required:!0,message:S("message.roleDescriptionRequired"),trigger:"blur"}]},I=()=>{O.value=!1,z.roleName="",z.roleDescription="",z.twoFactorAuthRequired=!1,z.permissions=W(),P.value=!0},K=async()=>{try{await L.value.validate(),j.value=!0,setTimeout((()=>{i.success(S("message.saveSuccess")),P.value=!1,j.value=!1,L.value.resetFields()}),1e3)}catch(e){}},$=()=>{P.value=!1,L.value.resetFields()},Q=(e,a,t)=>{};return(e,a)=>{const r=p("a-button"),l=p("a-space"),v=p("a-table"),R=p("a-card"),w=p("a-input"),A=p("a-form-item"),W=p("a-textarea"),V=p("a-switch"),G=p("a-checkbox"),J=p("a-divider"),X=p("a-form"),Y=p("a-modal");return s(),o("div",D,[d(R,{bordered:!1,class:"table-card"},{title:n((()=>[c("div",T,[c("span",b,y(h(S)("title.roleList")),1),d(r,{type:"primary",onClick:I},{icon:n((()=>[d(h(t))])),default:n((()=>[k(" "+y(h(S)("action.addRole")),1)])),_:1})])])),default:n((()=>[c("div",N,[d(v,{columns:E,"data-source":M.value,pagination:{total:100,pageSize:10,showSizeChanger:!1,showQuickJumper:!0},bordered:!0,onChange:Q},{bodyCell:n((({column:e,record:a})=>["action"===e.key?(s(),u(l,{key:0},{default:n((()=>[d(r,{type:"link",size:"small",onClick:e=>(e=>{O.value=!0,z.roleName=e.roleName,z.roleDescription=e.roleDescription,P.value=!0})(a)},{default:n((()=>[k(y(h(S)("action.editRole")),1)])),_:2},1032,["onClick"]),d(r,{type:"link",status:"danger",size:"small",onClick:e=>{i.success(S("message.deleteSuccess"))}},{default:n((()=>[k(y(h(S)("action.deleteRole")),1)])),_:2},1032,["onClick"])])),_:2},1024)):m("",!0)])),_:1},8,["data-source"])])])),_:1}),d(Y,{open:P.value,"onUpdate:open":a[3]||(a[3]=e=>P.value=e),title:O.value?h(S)("title.editRole"):h(S)("title.addRole"),onOk:K,onCancel:$,confirmLoading:j.value,width:"800px"},{default:n((()=>[d(X,{model:z,rules:B,ref_key:"roleFormRef",ref:L,layout:"vertical"},{default:n((()=>[d(A,{label:h(S)("field.roleName"),name:"roleName"},{default:n((()=>[d(w,{value:z.roleName,"onUpdate:value":a[0]||(a[0]=e=>z.roleName=e),placeholder:h(S)("prompt.inputRoleName"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),d(A,{label:h(S)("field.roleDescription"),name:"roleDescription"},{default:n((()=>[d(W,{value:z.roleDescription,"onUpdate:value":a[1]||(a[1]=e=>z.roleDescription=e),placeholder:h(S)("prompt.inputRoleDescription"),rows:4,"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),d(A,{label:h(S)("field.twoFactorAuth"),name:"twoFactorAuthRequired"},{default:n((()=>[d(V,{checked:z.twoFactorAuthRequired,"onUpdate:checked":a[2]||(a[2]=e=>z.twoFactorAuthRequired=e),checkedValue:!0,unCheckedValue:!1},{checkedChildren:n((()=>[k(y(h(S)("field.twoFactorAuthRequired")),1)])),unCheckedChildren:n((()=>[k(y(h(S)("field.twoFactorAuthRequired")),1)])),_:1},8,["checked"])])),_:1},8,["label"]),d(A,{label:h(S)("field.permissions")},{default:n((()=>[d(R,{bordered:!1,class:"permissions-card"},{default:n((()=>[(s(),o(f,null,g(U,(e=>(s(),o(f,{key:e.key},[c("div",C,[c("div",_,y(h(S)(`module.${e.key}.title`)),1),c("div",q,[(s(!0),o(f,null,g(e.pages,(a=>(s(),o("div",{key:a.key,class:"permission-page"},[c("div",F,y(h(S)(`module.${e.key}.${a.key}`)),1),c("div",x,[(s(!0),o(f,null,g(a.permissions,(t=>(s(),u(G,{key:t,checked:z.permissions[e.key][a.key][t],"onUpdate:checked":i=>z.permissions[e.key][a.key][t]=i},{default:n((()=>[k(y(h(S)(`permission.${t}`)),1)])),_:2},1032,["checked","onUpdate:checked"])))),128))])])))),128))])]),e.key!==U[U.length-1].key?(s(),u(J,{key:0})):m("",!0)],64)))),64))])),_:1})])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["open","title","confirmLoading"])])}}},[["__scopeId","data-v-9e0511f7"]]);export{A as default};
