import{v as e}from"./vendor-BhfxMwoc.js";import{_ as a}from"./DateRangeSelect-BgOmWin7.js";import{a as t,_ as s}from"./index-B2ZFid6D.js";import{c as l,X as r,W as n,Z as i,Y as d,a0 as o,F as c,a2 as u,G as f,a1 as m,a3 as p,u as y,d as v,f as h,k as I,_ as b,a4 as g,$ as T}from"./vue-vendor-B-98Oggh.js";/* empty css               */import{c as S,y as x,J as O,b as k}from"./ant-design-0M0Sv-BJ.js";import"./lodash-CiXSdKEp.js";const C={prompt:{selectStatus:"請選擇狀態"},status:{confirming:"確認中",success:"成功",failed:"失敗"}},w={prompt:{selectStatus:"Please select status"},status:{confirming:"Confirming",success:"Successful",failed:"Failed"}},_={__name:"OrderStatusSelect",props:{modelValue:{type:String,default:void 0},style:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(a,{emit:t}){const s={zh:C,en:w},{t:v}=e({messages:s,legacy:!1}),h=t,I=l((()=>[{value:"confirming",label:v("status.confirming")},{value:"successful",label:v("status.success")},{value:"failed",label:v("status.failed")}])),b=e=>{h("update:modelValue",e)};return(e,t)=>{const s=r("a-select-option"),l=r("a-select");return i(),n(l,{value:a.modelValue,placeholder:y(v)("prompt.selectStatus"),style:p(a.style),"allow-clear":"","onUpdate:value":b},{default:d((()=>[(i(!0),o(c,null,u(I.value,(e=>(i(),n(s,{key:e.value,value:e.value},{default:d((()=>[f(m(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","placeholder","style"])}}},H={title:{depositOrderQuery:"充值訂單查詢",orderList:"充值訂單列表",notifyDetail:"通知詳情",notifyHistory:"通知歷史"},field:{dateRange:"日期範圍",merchant:"商戶",status:"狀態",orderId:"訂單號",userId:"用戶 ID",address:"地址",createTime:"創建時間",successTime:"成功時間",notifyTime:"通知時間",notifyUrl:"通知地址",notifyContent:"通知內容",errorContent:"錯誤內容",platformOrderId:"平台訂單號",merchantOrderId:"商戶訂單號",transferId:"轉帳單號",notifyReason:"通知原因",notifyResult:"通知結果"},prompt:{pleaseSelect:"請選擇",pleaseInput:"請輸入",pleaseInputOrderId:"請輸入訂單號",pleaseInputUserId:"請輸入用戶 ID",pleaseInputAddress:"請輸入地址",pleaseInputTxHash:"請輸入交易哈希"},action:{search:"搜索",reset:"重置",query:"查詢",download:"下載數據",retry:"重試",cancel:"取消"},status:{confirming:"確認中",processing:"處理中",successful:"成功",failed:"失敗",timeout:"超時",retrying:"重試中"},message:{copySuccess:"複製成功",copyFailed:"複製失敗",downloadSuccess:"下載成功",downloadFailed:"下載失敗"},table:{merchant:"商戶",transactionDocument:"交易單據",transactionAmount:"交易數量",usdtValue:"價值(USDT)",receivingAddress:"收款地址",orderStatus:"訂單狀態",notifyStatus:"通知狀態",timeInfo:"時間信息"}},D={title:{depositOrderQuery:"Deposit Order Query",orderList:"Deposit Order List",notifyDetail:"Notification Details",notifyHistory:"Notification History"},field:{dateRange:"Date Range",merchant:"Merchant",status:"Status",orderId:"Order ID",userId:"User ID",address:"Address",createTime:"Create Time",successTime:"Success Time",notifyTime:"Notification Time",notifyUrl:"Notification URL",notifyContent:"Notification Content",errorContent:"Error Content",platformOrderId:"Platform Order ID",merchantOrderId:"Merchant Order ID",transferId:"Transfer ID",notifyReason:"Notification Reason",notifyResult:"Notification Result"},prompt:{pleaseSelect:"Please select",pleaseInput:"Please input",pleaseInputOrderId:"Please input order ID",pleaseInputUserId:"Please input user ID",pleaseInputAddress:"Please input address",pleaseInputTxHash:"Please input transaction hash"},action:{search:"Search",reset:"Reset",query:"Query",download:"Download Data",retry:"Retry",cancel:"Cancel"},status:{confirming:"Confirming",processing:"Processing",successful:"Successful",failed:"Failed",timeout:"Timeout",retrying:"Retrying"},message:{copySuccess:"Copy successful",copyFailed:"Copy failed",downloadSuccess:"Download successful",downloadFailed:"Download failed"},table:{merchant:"Merchant",transactionDocument:"Transaction Document",transactionAmount:"Transaction Amount",usdtValue:"USDT Value",receivingAddress:"Receiving Address",orderStatus:"Order Status",notifyStatus:"Notification Status",timeInfo:"Time Info"}},V=100,R=10,U=1,$=[{key:"1",merchant:"商戶A",platformOrderId:"PO2024011500001",merchantOrderId:"MO2024011500001",transferId:"T2024011500001",txHash:"0x1234567890abcdef1234567890abcdef12345678",amount:"1000.00",usdtValue:"1000.00",address:"0xabcdef1234567890abcdef1234567890abcdef12",orderStatus:"confirming",confirmations:3,requiredConfirmations:6,notifyStatus:"retrying",createTime:"2024-01-15 10:00:00",successTime:null,notifyTime:"2024-01-15 10:05:00"},{key:"2",merchant:"商戶B",platformOrderId:"PO2024011500002",merchantOrderId:"MO2024011500002",transferId:"T2024011500002",txHash:"0x2345678901abcdef2345678901abcdef23456789",amount:"2000.00",usdtValue:"2000.00",address:"0xbcdef2345678901abcdef2345678901abcdef23",orderStatus:"success",confirmations:6,requiredConfirmations:6,notifyStatus:"success",createTime:"2024-01-15 09:00:00",successTime:"2024-01-15 09:30:00",notifyTime:"2024-01-15 09:35:00"},{key:"3",merchant:"商戶C",platformOrderId:"PO2024011500003",merchantOrderId:"MO2024011500003",transferId:"T2024011500003",txHash:"0x3456789012abcdef3456789012abcdef34567890",amount:"3000.00",usdtValue:"3000.00",address:"0xcdef3456789012abcdef3456789012abcdef34",orderStatus:"failed",confirmations:0,requiredConfirmations:6,notifyStatus:"timeout",createTime:"2024-01-15 08:00:00",successTime:null,notifyTime:"2024-01-15 08:30:00"},{key:"4",merchant:"商戶A",platformOrderId:"PO2024011500004",merchantOrderId:"MO2024011500004",transferId:"T2024011500004",txHash:"0x4567890123abcdef4567890123abcdef45678901",amount:"4000.00",usdtValue:"4000.00",address:"0xdef45678901234abcdef45678901234abcdef45",orderStatus:"confirming",confirmations:2,requiredConfirmations:6,notifyStatus:"retrying",createTime:"2024-01-15 07:00:00",successTime:null,notifyTime:"2024-01-15 07:05:00"},{key:"5",merchant:"商戶B",platformOrderId:"PO2024011500005",merchantOrderId:"MO2024011500005",transferId:"T2024011500005",txHash:"0x5678901234abcdef5678901234abcdef56789012",amount:"5000.00",usdtValue:"5000.00",address:"0xef567890123456abcdef56789012345abcdef56",orderStatus:"success",confirmations:6,requiredConfirmations:6,notifyStatus:"success",createTime:"2024-01-15 06:00:00",successTime:"2024-01-15 06:30:00",notifyTime:"2024-01-15 06:35:00"},{key:"6",merchant:"商戶C",platformOrderId:"PO2024011500006",merchantOrderId:"MO2024011500006",transferId:"T2024011500006",txHash:"0x6789012345abcdef6789012345abcdef67890123",amount:"6000.00",usdtValue:"6000.00",address:"0xf6789012345678abcdef67890123456abcdef67",orderStatus:"failed",confirmations:0,requiredConfirmations:6,notifyStatus:"timeout",createTime:"2024-01-15 05:00:00",successTime:null,notifyTime:"2024-01-15 05:30:00"},{key:"7",merchant:"商戶A",platformOrderId:"PO2024011500007",merchantOrderId:"MO2024011500007",transferId:"T2024011500007",txHash:"0x7890123456abcdef7890123456abcdef78901234",amount:"7000.00",usdtValue:"7000.00",address:"0x789012345678901abcdef78901234567abcdef78",orderStatus:"confirming",confirmations:4,requiredConfirmations:6,notifyStatus:"retrying",createTime:"2024-01-15 04:00:00",successTime:null,notifyTime:"2024-01-15 04:05:00"},{key:"8",merchant:"商戶B",platformOrderId:"PO2024011500008",merchantOrderId:"MO2024011500008",transferId:"T2024011500008",txHash:"0x8901234567abcdef8901234567abcdef89012345",amount:"8000.00",usdtValue:"8000.00",address:"0x890123456789012abcdef89012345678abcdef89",orderStatus:"success",confirmations:6,requiredConfirmations:6,notifyStatus:"success",createTime:"2024-01-15 03:00:00",successTime:"2024-01-15 03:30:00",notifyTime:"2024-01-15 03:35:00"},{key:"9",merchant:"商戶C",platformOrderId:"PO2024011500009",merchantOrderId:"MO2024011500009",transferId:"T2024011500009",txHash:"0x9012345678abcdef9012345678abcdef90123456",amount:"9000.00",usdtValue:"9000.00",address:"0x901234567890123abcdef90123456789abcdef90",orderStatus:"failed",confirmations:0,requiredConfirmations:6,notifyStatus:"timeout",createTime:"2024-01-15 02:00:00",successTime:null,notifyTime:"2024-01-15 02:30:00"},{key:"10",merchant:"商戶A",platformOrderId:"PO2024011500010",merchantOrderId:"MO2024011500010",transferId:"T2024011500010",txHash:"0x0123456789abcdef0123456789abcdef01234567",amount:"10000.00",usdtValue:"10000.00",address:"0x012345678901234abcdef01234567890abcdef01",orderStatus:"confirming",confirmations:1,requiredConfirmations:6,notifyStatus:"retrying",createTime:"2024-01-15 01:00:00",successTime:null,notifyTime:"2024-01-15 01:05:00"}],A={class:"deposit-order"},P={class:"form-row"},M={class:"form-row"},j={class:"form-item-sm button-group"},q={class:"table-container"},N={key:1,class:"order-info"},L={class:"info-item"},z={class:"label"},F={class:"info-item"},J={class:"label"},Q={class:"info-item"},B={class:"label"},E=["onClick"],Z={class:"info-item"},G={class:"txhash-container"},W={key:2,class:"address-container"},X={key:4,class:"notify-status-container"},Y={key:5,class:"time-info"},K={class:"info-item"},ee={class:"label"},ae={class:"info-item"},te={class:"label"},se={class:"info-item"},le={class:"label"},re={class:"info-item notify-history"},ne={class:"notify-detail"},ie={class:"detail-item"},de={class:"detail-label"},oe={class:"detail-item"},ce={class:"detail-label"},ue={class:"code-block-wrapper"},fe={class:"code-header"},me={class:"code-block json"},pe=["innerHTML"],ye={class:"detail-item"},ve={class:"detail-label"},he={class:"code-block-wrapper"},Ie={class:"code-header"},be={class:"code-block json"},ge=["innerHTML"],Te=s(v({__name:"Deposit",setup(s){const u={zh:H,en:D},{t:p}=e({messages:u,legacy:!1}),v=h({dateRange:[],merchant:void 0,status:void 0,orderId:"",address:"",txHash:"",userId:""}),C=()=>{v.value={dateRange:[],merchant:void 0,status:void 0,orderId:"",address:"",txHash:"",userId:""}},w=()=>{},Te=l((()=>[{title:p("table.merchant"),dataIndex:"merchant",key:"merchant",width:120},{title:p("table.transactionDocument"),dataIndex:"orderInfo",key:"orderInfo",width:300},{title:p("table.transactionAmount"),dataIndex:"amount",key:"amount",align:"right",width:120},{title:p("table.usdtValue"),dataIndex:"usdtValue",key:"usdtValue",align:"right",width:120},{title:p("table.receivingAddress"),dataIndex:"address",key:"address",width:200},{title:p("table.orderStatus"),dataIndex:"orderStatus",key:"orderStatus",width:120},{title:p("table.notifyStatus"),dataIndex:"notifyStatus",key:"notifyStatus",width:120},{title:p("table.timeInfo"),dataIndex:"timeInfo",key:"timeInfo",width:300}])),Se=h($),xe=h({total:V,current:U,pageSize:R,showSizeChanger:!0,showQuickJumper:!0}),Oe=(e,a,t)=>{e.current&&(xe.value.current=e.current),e.pageSize&&(xe.value.pageSize=e.pageSize)},ke=e=>{const{orderStatus:a,confirmations:t,requiredConfirmations:s}=e;switch(a){case"confirming":return`${p("status.confirming")}(${t}/${s})`;case"success":return`${p("status.successful")}(${s}/${s})`;case"failed":return p("status.failed");default:return a}},Ce=h(!1),we=h(""),_e=h({}),He=h({}),De=h(null),Ve=()=>{Ce.value=!1,De.value=null},Re=()=>{Ce.value=!1,De.value=null},Ue=e=>JSON.stringify(e,null,2).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(e=>{let a="number";return/^"/.test(e)?a=/:$/.test(e)?"key":"string":/true|false/.test(e)?a="boolean":/null/.test(e)&&(a="null"),`<span class="json-${a}">${e}</span>`})),$e=async e=>{try{await navigator.clipboard.writeText(JSON.stringify(e,null,2)),k.success(p("message.copySuccess"))}catch(a){k.error(p("message.copyFailed"))}},Ae=()=>{const e=Te.value,a=[e.map((e=>e.title)).join(","),...Se.value.map((a=>e.map((e=>`"${a[e.dataIndex]||""}"`)).join(",")))].join("\n"),t=new Blob([a],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),l=URL.createObjectURL(t);s.setAttribute("href",l),s.setAttribute("download",`deposit_${(new Date).toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),k.success(p("message.downloadSuccess"))},Pe=h(!1),Me=h([]),je=l((()=>[{title:p("field.notifyReason"),dataIndex:"reason",key:"reason",width:200},{title:p("field.notifyTime"),dataIndex:"notifyTime",key:"notifyTime",width:180},{title:p("field.notifyResult"),dataIndex:"result",key:"result",width:120}]));return(e,s)=>{var l;const u=r("a-input"),h=r("a-form-item"),H=r("a-button"),D=r("a-space"),V=r("a-form"),R=r("a-card"),U=r("a-tag"),$=r("a-table"),qe=r("a-modal");return i(),o("div",A,[I(R,{title:y(p)("title.depositOrderQuery"),class:"filter-card"},{default:d((()=>[I(V,{layout:"vertical",model:v.value,class:"query-form"},{default:d((()=>[b("div",P,[I(h,{label:y(p)("field.orderId"),class:"form-item-lg"},{default:d((()=>[I(u,{value:v.value.orderId,"onUpdate:value":s[0]||(s[0]=e=>v.value.orderId=e),placeholder:y(p)("prompt.pleaseInputOrderId"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),I(h,{label:y(p)("field.dateRange"),class:"form-item-lg"},{default:d((()=>[I(a,{modelValue:v.value.dateRange,"onUpdate:modelValue":s[1]||(s[1]=e=>v.value.dateRange=e),style:{width:"100%"}},null,8,["modelValue"])])),_:1},8,["label"]),I(h,{label:y(p)("field.merchant"),class:"form-item-md"},{default:d((()=>[I(t,{modelValue:v.value.merchant,"onUpdate:modelValue":s[2]||(s[2]=e=>v.value.merchant=e),style:{width:"100%"}},null,8,["modelValue"])])),_:1},8,["label"]),I(h,{label:y(p)("field.status"),class:"form-item-sm"},{default:d((()=>[I(_,{modelValue:v.value.status,"onUpdate:modelValue":s[3]||(s[3]=e=>v.value.status=e),style:{width:"100%"}},null,8,["modelValue"])])),_:1},8,["label"]),I(h,{label:y(p)("field.userId"),class:"form-item-md"},{default:d((()=>[I(u,{value:v.value.userId,"onUpdate:value":s[4]||(s[4]=e=>v.value.userId=e),placeholder:y(p)("prompt.pleaseInputUserId"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"])]),b("div",M,[I(h,{label:y(p)("field.address"),class:"form-item-xl"},{default:d((()=>[I(u,{value:v.value.address,"onUpdate:value":s[5]||(s[5]=e=>v.value.address=e),placeholder:y(p)("prompt.pleaseInputAddress"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),I(h,{label:"TxHash",class:"form-item-xl"},{default:d((()=>[I(u,{value:v.value.txHash,"onUpdate:value":s[6]||(s[6]=e=>v.value.txHash=e),placeholder:y(p)("prompt.pleaseInputTxHash"),"allow-clear":""},null,8,["value","placeholder"])])),_:1}),b("div",j,[I(D,null,{default:d((()=>[I(H,{onClick:C},{default:d((()=>[f(m(y(p)("action.reset")),1)])),_:1}),I(H,{type:"primary",onClick:w},{default:d((()=>[f(m(y(p)("action.query")),1)])),_:1})])),_:1})])])])),_:1},8,["model"])])),_:1},8,["title"]),I(R,{title:y(p)("title.orderList"),class:"list-card"},{extra:d((()=>[I(H,{type:"primary",onClick:Ae},{icon:d((()=>[I(y(O))])),default:d((()=>[f(" "+m(y(p)("action.download")),1)])),_:1})])),default:d((()=>[b("div",q,[I($,{columns:Te.value,"data-source":Se.value,pagination:xe.value,bordered:!0,scroll:{x:1500},onChange:Oe},{bodyCell:d((({column:e,text:a,record:t})=>{return["merchant"===e.key?(i(),o(c,{key:0},[f(m(a),1)],64)):"orderInfo"===e.key?(i(),o("div",N,[b("div",L,[b("span",z,m(y(p)("field.platformOrderId"))+":",1),b("span",null,m(t.platformOrderId),1)]),b("div",F,[b("span",J,m(y(p)("field.merchantOrderId"))+":",1),b("span",null,m(t.merchantOrderId),1)]),b("div",Q,[b("span",B,m(y(p)("field.transferId"))+":",1),b("a",{onClick:e=>{t.transferId}},m(t.transferId),9,E)]),b("div",Z,[s[12]||(s[12]=b("span",{class:"label"},"TxHash:",-1)),b("div",G,[b("span",null,m((r=t.txHash,r?`${r.slice(0,6)}****${r.slice(-6)}`:"")),1),I(y(S),{class:"action-icon",onClick:e=>(async e=>{try{await navigator.clipboard.writeText(e),k.success(p("message.copySuccess"))}catch(a){k.error(p("message.copyFailed"))}})(t.txHash)},null,8,["onClick"]),I(y(x),{class:"action-icon",onClick:e=>{t.txHash}},null,8,["onClick"])])])])):"address"===e.key?(i(),o("div",W,[b("span",null,m((l=a,l?`${l.slice(0,4)}****${l.slice(-4)}`:"")),1),I(y(S),{class:"copy-icon",onClick:e=>(async e=>{try{await navigator.clipboard.writeText(e),k.success(p("message.copySuccess"))}catch(a){k.error(p("message.copyFailed"))}})(a)},null,8,["onClick"])])):"orderStatus"===e.key?(i(),n(U,{key:3,class:T(["status-tag",`status-${t.orderStatus}`])},{default:d((()=>[f(m(ke(t)),1)])),_:2},1032,["class"])):"notifyStatus"===e.key?(i(),o("div",X,[I(U,{class:T(["status-tag",`notify-${t.notifyStatus}`])},{default:d((()=>{return[f(m((e=t.notifyStatus,{success:p("status.successful"),timeout:p("status.timeout"),retrying:p("status.retrying")}[e]||e)),1)];var e})),_:2},1032,["class"]),"timeout"===t.notifyStatus?(i(),n(H,{key:0,type:"link",size:"small",class:"retry-button",onClick:e=>(e=>{De.value=e,we.value="https://api.example.com/callback",_e.value={orderId:e.platformOrderId,merchantId:e.merchant,status:e.orderStatus,amount:e.amount,txHash:e.txHash},He.value={code:500,message:"Internal Server Error",timestamp:"2024-01-15 10:05:00"},Ce.value=!0})(t)},{default:d((()=>[f(m(y(p)("action.retry")),1)])),_:2},1032,["onClick"])):g("",!0)])):"timeInfo"===e.key?(i(),o("div",Y,[b("div",K,[b("span",ee,m(y(p)("field.createTime"))+":",1),b("span",null,m(t.createTime),1)]),b("div",ae,[b("span",te,m(y(p)("field.successTime"))+":",1),b("span",null,m(t.successTime||"-"),1)]),b("div",se,[b("span",le,m(y(p)("field.notifyTime"))+":",1),b("span",null,m(t.notifyTime||"-"),1)]),b("div",re,[I(H,{type:"link",size:"small",onClick:e=>(e=>{De.value=e,Pe.value=!0,Me.value=[{reason:"首次通知",notifyTime:"2024-03-15 10:00:00",result:"成功"},{reason:"重試通知",notifyTime:"2024-03-15 10:05:00",result:"失敗"},{reason:"最終通知",notifyTime:"2024-03-15 10:10:00",result:"成功"}]})(t)},{default:d((()=>[f(m(y(p)("title.notifyHistory")),1)])),_:2},1032,["onClick"])])])):g("",!0)];var l,r})),_:1},8,["columns","data-source","pagination"])])])),_:1},8,["title"]),I(qe,{open:Pe.value,"onUpdate:open":s[7]||(s[7]=e=>Pe.value=e),title:`${(null==(l=De.value)?void 0:l.platformOrderId)||""} ${y(p)("title.notifyHistory")}`,footer:null,width:"600px"},{default:d((()=>[I($,{columns:je.value,"data-source":Me.value,pagination:!1,bordered:!0},null,8,["columns","data-source"])])),_:1},8,["open","title"]),I(qe,{open:Ce.value,"onUpdate:open":s[11]||(s[11]=e=>Ce.value=e),title:y(p)("title.notifyDetail"),width:800,onCancel:Ve},{footer:d((()=>[I(D,null,{default:d((()=>[I(H,{onClick:Ve},{default:d((()=>[f(m(y(p)("action.cancel")),1)])),_:1}),I(H,{type:"primary",onClick:Re},{default:d((()=>[f(m(y(p)("action.retry")),1)])),_:1})])),_:1})])),default:d((()=>[b("div",ne,[b("div",ie,[b("div",de,m(y(p)("field.notifyUrl"))+":",1),I(u,{value:we.value,"onUpdate:value":s[8]||(s[8]=e=>we.value=e),class:"notify-url-input"},null,8,["value"])]),b("div",oe,[b("div",ce,m(y(p)("field.notifyContent"))+":",1),b("div",ue,[b("div",fe,[s[13]||(s[13]=b("span",null,"JSON",-1)),I(y(S),{class:"copy-icon",onClick:s[9]||(s[9]=e=>$e(_e.value))})]),I(R,{class:"code-card"},{default:d((()=>[b("pre",me,[b("code",{innerHTML:Ue(_e.value)},null,8,pe)])])),_:1})])]),b("div",ye,[b("div",ve,m(y(p)("field.errorContent"))+":",1),b("div",he,[b("div",Ie,[s[14]||(s[14]=b("span",null,"JSON",-1)),I(y(S),{class:"copy-icon",onClick:s[10]||(s[10]=e=>$e(He.value))})]),I(R,{class:"code-card"},{default:d((()=>[b("pre",be,[b("code",{innerHTML:Ue(He.value)},null,8,ge)])])),_:1})])])])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-6fff5d73"]]);export{Te as default};
