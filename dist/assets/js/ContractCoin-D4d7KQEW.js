import{v as e}from"./vendor-BhfxMwoc.js";import{_ as a}from"./CurrencySelect-BCxrVlg4.js";import{_ as l}from"./ChainTypeSelect.vue_vue_type_style_index_0_lang-BnpxTwcj.js";import{J as i,X as t,P as r,b as o}from"./ant-design-BRHeEO20.js";import{d as c,f as d,o as s,a0 as n,_ as u,k as m,a1 as p,u as v,Y as f,X as y,Z as C,G as b,W as g,a4 as L,F as S,a2 as h}from"./vue-vendor-B-98Oggh.js";import{_ as T}from"./index-CkWAryqU.js";import"./lodash-CiXSdKEp.js";const _={data:[{id:"1",recordType:"ERC20",coinName:"Tether USD",coinCode:"USDT",contractAddress:"0xdac17f958d2ee523a2206206994597c13d831ec7",decimals:6,price:"1.0000",priceSource:"Binance",sourcePair:"USDT/USD",updateTime:"2024-03-15 10:00:00"},{id:"2",recordType:"ERC20",coinName:"USD Coin",coinCode:"USDC",contractAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,price:"0.9998",priceSource:"Coinbase",sourcePair:"USDC/USD",updateTime:"2024-03-15 10:01:00"},{id:"3",recordType:"BEP20",coinName:"Binance USD",coinCode:"BUSD",contractAddress:"0x4fabb145d64652a948d72533023f6e7a623c7c53",decimals:18,price:"1.0001",priceSource:"Binance",sourcePair:"BUSD/USD",updateTime:"2024-03-15 10:02:00"},{id:"4",recordType:"ERC20",coinName:"Wrapped Bitcoin",coinCode:"WBTC",contractAddress:"0x2260fac5e5542a773aa44fbcfedf7c193bc2c599",decimals:8,price:"67890.50",priceSource:"Kraken",sourcePair:"WBTC/USD",updateTime:"2024-03-15 10:03:00"},{id:"5",recordType:"ERC20",coinName:"Wrapped Ether",coinCode:"WETH",contractAddress:"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",decimals:18,price:"3456.78",priceSource:"Binance",sourcePair:"WETH/USD",updateTime:"2024-03-15 10:04:00"},{id:"6",recordType:"BEP20",coinName:"BNB",coinCode:"BNB",contractAddress:"0xB8c77482e45F1F44dE1745F52C74426C631bDD52",decimals:18,price:"567.89",priceSource:"Binance",sourcePair:"BNB/USD",updateTime:"2024-03-15 10:05:00"},{id:"7",recordType:"ERC20",coinName:"Chainlink",coinCode:"LINK",contractAddress:"0x514910771af9ca656af840dff83e8264ecf986ca",decimals:18,price:"18.45",priceSource:"Coinbase",sourcePair:"LINK/USD",updateTime:"2024-03-15 10:06:00"},{id:"8",recordType:"ERC20",coinName:"Uniswap",coinCode:"UNI",contractAddress:"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984",decimals:18,price:"12.34",priceSource:"Huobi",sourcePair:"UNI/USD",updateTime:"2024-03-15 10:07:00"},{id:"9",recordType:"BEP20",coinName:"PancakeSwap",coinCode:"CAKE",contractAddress:"0x0e09fabb73bd3ade0a17ecc321fd13a19e81ce82",decimals:18,price:"3.45",priceSource:"Binance",sourcePair:"CAKE/USD",updateTime:"2024-03-15 10:08:00"},{id:"10",recordType:"ERC20",coinName:"Aave",coinCode:"AAVE",contractAddress:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",decimals:18,price:"98.76",priceSource:"Kraken",sourcePair:"AAVE/USD",updateTime:"2024-03-15 10:09:00"}]},w={contractCoinManagement:"合約幣管理",search:{title:"幣種查詢",searchButton:"查詢",resetButton:"重置",chainType:"鏈類型",coinCode:"幣種"},list:{title:"幣種列表",addButton:"新增幣種",editButton:"編輯幣種",columns:{recordType:"鏈類型",coinName:"幣種名稱",coinCode:"幣種代碼",contractAddress:"合約地址",decimals:"精度",price:"幣價",priceSource:"幣價來源",sourcePair:"來源幣對",updateTime:"更新時間",actions:"操作",edit:"編輯",delete:"刪除",isMainCoin:"主幣"}},modal:{tabs:{basicInfo:"幣種基本資訊",walletParams:"錢包參數"},form:{contractAddress:"合約地址",coinName:"幣種名稱",coinCode:"幣種代碼",isMainCoin:"主幣設置",isMainCoinLabel:"設為主幣",decimals:"精度",gasLimitMax:"燃料上限",gasLimitMin:"燃料下限",gasPrice:"燃料價格",transferFee:"轉帳提交手續費",priceSource:"幣價來源",sourcePair:"幣兌選擇",storageLimit:"儲存上限",reserveAmount:"錢包保留數量",transferLimit:"單筆轉帳上限",userStorageLimit:"用戶錢包儲存上限",collectionStorageLimit:"歸集錢包儲存上限",withdrawalStorageLimit:"出款錢包儲存上限",userReserveAmount:"用戶錢包保留數量",collectionReserveAmount:"歸集錢包保留數量",withdrawalReserveAmount:"出款錢包保留數量",userTransferLimit:"用戶錢包單筆轉帳上限",collectionTransferLimit:"歸集錢包單筆轉帳上限",withdrawalTransferLimit:"出款錢包單筆轉帳上限"},walletType:{user:"用戶錢包",collection:"歸集錢包",withdrawal:"出款錢包"},button:{query:"查詢"},placeholder:{contractAddress:"請輸入合約地址",enterAmount:"請輸入金額"},message:{enterContractAddress:"請輸入合約地址",querySuccess:"查詢成功",queryFailed:"查詢失敗",addSuccess:"新增成功",addFailed:"新增失敗",editSuccess:"編輯成功",editFailed:"編輯失敗"}}},A={contractCoinManagement:"Contract Coin Management",search:{title:"Coin Search",searchButton:"Search",resetButton:"Reset",chainType:"Chain Type",coinCode:"Coin"},list:{title:"Coin List",addButton:"Add Coin",editButton:"Edit Coin",columns:{recordType:"Chain Type",coinName:"Coin Name",coinCode:"Coin Code",contractAddress:"Contract Address",decimals:"Decimals",price:"Price",priceSource:"Price Source",sourcePair:"Source Pair",updateTime:"Update Time",actions:"Actions",edit:"Edit",delete:"Delete"}},modal:{tabs:{basicInfo:"Basic Information",walletParams:"Wallet Parameters"},form:{contractAddress:"Contract Address",coinName:"Coin Name",coinCode:"Coin Code",decimals:"Decimals",gasLimitMax:"Gas Limit Max",gasLimitMin:"Gas Limit Min",gasPrice:"Gas Price",transferFee:"Transfer Fee",priceSource:"Price Source",sourcePair:"Source Pair",storageLimit:"Storage Limit",reserveAmount:"Reserve Amount",transferLimit:"Transfer Limit",userStorageLimit:"User Wallet Storage Limit",collectionStorageLimit:"Collection Wallet Storage Limit",withdrawalStorageLimit:"Withdrawal Wallet Storage Limit",userReserveAmount:"User Wallet Reserve Amount",collectionReserveAmount:"Collection Wallet Reserve Amount",withdrawalReserveAmount:"Withdrawal Wallet Reserve Amount",userTransferLimit:"User Wallet Transfer Limit",collectionTransferLimit:"Collection Wallet Transfer Limit",withdrawalTransferLimit:"Withdrawal Wallet Transfer Limit"},walletType:{user:"User Wallet",collection:"Collection Wallet",withdrawal:"Withdrawal Wallet"},button:{query:"Query"},placeholder:{contractAddress:"Please enter contract address",enterAmount:"Please enter amount"},message:{enterContractAddress:"Please enter contract address",querySuccess:"Query successful",queryFailed:"Query failed",addSuccess:"Add successful",addFailed:"Add failed",editSuccess:"Edit successful",editFailed:"Edit failed"}}},k={class:"contract-coin-management"},U={class:"search-form"},P=T(c({__name:"ContractCoin",setup(c){const T={zh:w,en:A},{t:P}=e({messages:T,legacy:!1}),x=d({chainType:void 0,coinCode:void 0}),N=d([]),M=[{title:P("list.columns.recordType"),dataIndex:"recordType",key:"recordType"},{title:P("list.columns.coinName"),dataIndex:"coinName",key:"coinName"},{title:P("list.columns.coinCode"),dataIndex:"coinCode",key:"coinCode"},{title:P("list.columns.contractAddress"),dataIndex:"contractAddress",key:"contractAddress"},{title:P("list.columns.decimals"),dataIndex:"decimals",key:"decimals"},{title:P("list.columns.price"),dataIndex:"price",key:"price"},{title:P("list.columns.priceSource"),dataIndex:"priceSource",key:"priceSource"},{title:P("list.columns.sourcePair"),dataIndex:"sourcePair",key:"sourcePair"},{title:P("list.columns.updateTime"),dataIndex:"updateTime",key:"updateTime"},{title:P("list.columns.actions"),key:"actions",width:120,fixed:"right",align:"center"}],B=()=>{x.value={chainType:void 0,coinCode:void 0},D()},D=()=>{x.value.coinCode||x.value.chainType?N.value=_.data.filter((e=>{const a=!x.value.coinCode||e.coinCode.toLowerCase().includes(x.value.coinCode.toLowerCase()),l=!x.value.chainType||e.chainType===x.value.chainType;return a&&l})):N.value=_.data},F=d(!1),E=d(1),W=[{key:"user",label:P("modal.walletType.user")},{key:"collection",label:P("modal.walletType.collection")},{key:"withdrawal",label:P("modal.walletType.withdrawal")}],I=d({id:void 0,contractAddress:"",coinName:"",coinCode:"",decimals:"",gasLimitMax:"",gasLimitMin:"",gasPrice:"",transferFee:"",priceSource:void 0,sourcePair:void 0,price:"0",walletLimits:{},isMainCoin:!1}),R=d(!1),q=()=>{R.value=!1,F.value=!0},K=async()=>{if(I.value.contractAddress)try{const e={coinName:"Ethereum",coinCode:"ETH",decimals:"18",gasLimitMax:"21000",gasLimitMin:"21000",gasPrice:"30",price:"125"};Object.assign(I.value,e);const a=parseFloat(e.gasLimitMax),l=parseFloat(e.gasPrice);I.value.transferFee=(a*l/1e9).toString(),o.success(P("modal.message.querySuccess"))}catch(e){o.error(P("modal.message.queryFailed"))}else o.warning(P("modal.message.enterContractAddress"))},j=e=>{if(!e||!I.value.price)return 0;const a=parseFloat(I.value.price);return isNaN(a)?0:Number((e*a).toFixed(8))},V=e=>{const a=parseFloat(e||"0");return isNaN(a)?`1 USDT = 0 ${I.value.coinCode||""}`:`1 USDT = ${a} ${I.value.coinCode||""}`},z=(e,a,l)=>{I.value.walletLimits[a]||(I.value.walletLimits[a]={storageLimit:0,transferLimit:0}),I.value.walletLimits[a][e]=l},G=async()=>{try{const e=R.value?P("modal.message.editSuccess"):P("modal.message.addSuccess");o.success(e),F.value=!1}catch(e){const a=R.value?P("modal.message.editFailed"):P("modal.message.addFailed");o.error(a)}},$=()=>{F.value=!1,R.value=!1,I.value={id:void 0,contractAddress:"",coinName:"",coinCode:"",decimals:"",gasLimitMax:"",gasLimitMin:"",gasPrice:"",transferFee:"",priceSource:void 0,sourcePair:void 0,price:"0",walletLimits:{},isMainCoin:!1}};return s((()=>{N.value=_.data})),(e,o)=>{const c=y("a-form-item"),d=y("a-button"),s=y("a-space"),T=y("a-form"),_=y("a-card"),w=y("a-table"),A=y("a-input"),H=y("a-input-group"),Q=y("a-checkbox"),X=y("a-col"),O=y("a-row"),J=y("a-select-option"),Y=y("a-select"),Z=y("a-tab-pane"),ee=y("a-divider"),ae=y("a-input-number"),le=y("a-tabs"),ie=y("a-modal");return C(),n("div",k,[u("h2",null,p(v(P)("contractCoinManagement")),1),m(_,{title:v(P)("search.title"),class:"search-card"},{default:f((()=>[u("div",U,[m(T,{layout:"inline"},{default:f((()=>[m(c,{label:v(P)("search.chainType")},{default:f((()=>[m(l,{modelValue:x.value.chainType,"onUpdate:modelValue":o[0]||(o[0]=e=>x.value.chainType=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(c,{label:v(P)("search.coinCode")},{default:f((()=>[m(a,{modelValue:x.value.coinCode,"onUpdate:modelValue":o[1]||(o[1]=e=>x.value.coinCode=e)},null,8,["modelValue"])])),_:1},8,["label"]),m(c,null,{default:f((()=>[m(s,null,{default:f((()=>[m(d,{type:"primary",onClick:D},{default:f((()=>[b(p(v(P)("search.searchButton")),1)])),_:1}),m(d,{onClick:B},{default:f((()=>[b(p(v(P)("search.resetButton")),1)])),_:1})])),_:1})])),_:1})])),_:1})])])),_:1},8,["title"]),m(_,{title:v(P)("list.title"),class:"list-card"},{extra:f((()=>[m(d,{type:"primary",onClick:q},{icon:f((()=>[m(v(r))])),default:f((()=>[b(" "+p(v(P)("list.addButton")),1)])),_:1})])),default:f((()=>[m(w,{columns:M,"data-source":N.value,"row-key":e=>e.id,pagination:{pageSize:10},scroll:{x:1500}},{bodyCell:f((({column:e,record:a})=>["actions"===e.key?(C(),g(s,{key:0},{default:f((()=>[m(d,{type:"link",size:"small",onClick:e=>(e=>{R.value=!0,I.value={id:e.id,contractAddress:e.contractAddress,coinName:e.coinName,coinCode:e.coinCode,decimals:String(e.decimals),gasLimitMax:e.gasLimitMax||"",gasLimitMin:e.gasLimitMin||"",gasPrice:e.gasPrice||"",transferFee:e.transferFee||"",priceSource:e.priceSource,sourcePair:e.sourcePair,price:e.price,walletLimits:{},isMainCoin:!1},F.value=!0,E.value=1})(a)},{default:f((()=>[m(v(i))])),_:2},1032,["onClick"]),m(d,{type:"link",size:"small",onClick:e=>{},danger:""},{default:f((()=>[m(v(t))])),_:2},1032,["onClick"])])),_:2},1024)):L("",!0)])),_:1},8,["data-source","row-key"])])),_:1},8,["title"]),m(ie,{open:F.value,"onUpdate:open":o[14]||(o[14]=e=>F.value=e),title:I.value.id?v(P)("list.editButton"):v(P)("list.addButton"),width:800,onOk:G,onCancel:$},{default:f((()=>[m(le,{activeKey:E.value,"onUpdate:activeKey":o[13]||(o[13]=e=>E.value=e)},{default:f((()=>[(C(),g(Z,{key:1,tab:v(P)("modal.tabs.basicInfo")},{default:f((()=>[m(T,{model:I.value,layout:"vertical"},{default:f((()=>[m(c,{label:v(P)("modal.form.contractAddress")},{default:f((()=>[m(H,{compact:""},{default:f((()=>[m(A,{value:I.value.contractAddress,"onUpdate:value":o[2]||(o[2]=e=>I.value.contractAddress=e),style:{width:"calc(100% - 100px)"},placeholder:v(P)("modal.placeholder.contractAddress")},null,8,["value","placeholder"]),m(d,{type:"primary",onClick:K},{default:f((()=>[b(p(v(P)("modal.button.query")),1)])),_:1})])),_:1})])),_:1},8,["label"]),m(c,{label:v(P)("modal.form.coinName")},{default:f((()=>[m(A,{value:I.value.coinName,"onUpdate:value":o[3]||(o[3]=e=>I.value.coinName=e),disabled:""},null,8,["value"])])),_:1},8,["label"]),m(c,{label:v(P)("modal.form.coinCode")},{default:f((()=>[m(A,{value:I.value.coinCode,"onUpdate:value":o[4]||(o[4]=e=>I.value.coinCode=e),disabled:""},null,8,["value"])])),_:1},8,["label"]),m(c,{label:v(P)("modal.form.isMainCoin")},{default:f((()=>[m(Q,{checked:I.value.isMainCoin,"onUpdate:checked":o[5]||(o[5]=e=>I.value.isMainCoin=e)},{default:f((()=>[b(p(v(P)("modal.form.isMainCoinLabel")),1)])),_:1},8,["checked"])])),_:1},8,["label"]),m(c,{label:v(P)("modal.form.decimals")},{default:f((()=>[m(A,{value:I.value.decimals,"onUpdate:value":o[6]||(o[6]=e=>I.value.decimals=e),disabled:""},null,8,["value"])])),_:1},8,["label"]),m(O,{gutter:16},{default:f((()=>[m(X,{span:12},{default:f((()=>[m(c,{label:v(P)("modal.form.gasLimitMax")},{default:f((()=>[m(A,{value:I.value.gasLimitMax,"onUpdate:value":o[7]||(o[7]=e=>I.value.gasLimitMax=e),disabled:""},null,8,["value"])])),_:1},8,["label"])])),_:1}),m(X,{span:12},{default:f((()=>[m(c,{label:v(P)("modal.form.gasLimitMin")},{default:f((()=>[m(A,{value:I.value.gasLimitMin,"onUpdate:value":o[8]||(o[8]=e=>I.value.gasLimitMin=e),disabled:""},null,8,["value"])])),_:1},8,["label"])])),_:1})])),_:1}),m(c,{label:v(P)("modal.form.gasPrice")},{default:f((()=>[m(A,{value:I.value.gasPrice,"onUpdate:value":o[9]||(o[9]=e=>I.value.gasPrice=e),disabled:""},null,8,["value"])])),_:1},8,["label"]),m(c,{label:v(P)("modal.form.transferFee")},{default:f((()=>[m(A,{value:I.value.transferFee,"onUpdate:value":o[10]||(o[10]=e=>I.value.transferFee=e),disabled:""},null,8,["value"])])),_:1},8,["label"]),m(c,{label:v(P)("modal.form.priceSource")},{default:f((()=>[m(Y,{value:I.value.priceSource,"onUpdate:value":o[11]||(o[11]=e=>I.value.priceSource=e)},{default:f((()=>[m(J,{value:"binance"},{default:f((()=>o[15]||(o[15]=[b("Binance")]))),_:1}),m(J,{value:"mexc"},{default:f((()=>o[16]||(o[16]=[b("MEXC")]))),_:1}),m(J,{value:"gate"},{default:f((()=>o[17]||(o[17]=[b("Gate.io")]))),_:1})])),_:1},8,["value"])])),_:1},8,["label"]),m(c,{label:v(P)("modal.form.sourcePair")},{default:f((()=>[m(Y,{value:I.value.sourcePair,"onUpdate:value":o[12]||(o[12]=e=>I.value.sourcePair=e)},{default:f((()=>[m(J,{value:"USDT"},{default:f((()=>o[18]||(o[18]=[b("USDT")]))),_:1}),m(J,{value:"USD"},{default:f((()=>o[19]||(o[19]=[b("USD")]))),_:1})])),_:1},8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["tab"])),(C(),g(Z,{key:2,tab:v(P)("modal.tabs.walletParams")},{default:f((()=>[m(T,{model:I.value,layout:"vertical"},{default:f((()=>[m(ee,null,{default:f((()=>[b(p(v(P)("modal.form.storageLimit")),1)])),_:1}),(C(),n(S,null,h(W,(e=>m(c,{key:e.key,label:v(P)(`modal.form.${e.key}StorageLimit`)},{default:f((()=>[m(O,{gutter:16},{default:f((()=>[m(X,{span:8},{default:f((()=>{var a;return[m(ae,{value:null==(a=I.value.walletLimits[e.key])?void 0:a.storageLimit,"onUpdate:value":a=>{I.value.walletLimits[e.key]||(I.value.walletLimits[e.key]={storageLimit:0,transferLimit:0}),I.value.walletLimits[e.key].storageLimit=a??0},onChange:a=>z("storageLimit",e.key,a??0),precision:2,style:{width:"100%"}},null,8,["value","onUpdate:value","onChange"])]})),_:2},1024),m(X,{span:8},{default:f((()=>[m(A,{value:V(I.value.price),style:{"text-align":"center"},disabled:""},null,8,["value"])])),_:1}),m(X,{span:8},{default:f((()=>[m(H,{compact:""},{default:f((()=>{var a;return[m(ae,{value:j(null==(a=I.value.walletLimits[e.key])?void 0:a.storageLimit),style:{width:"calc(100% - 60px)"},disabled:"","value-type":"number"},null,8,["value"]),m(A,{style:{width:"60px","text-align":"center"},value:"USDT",disabled:""})]})),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["label"]))),64)),m(ee,null,{default:f((()=>[b(p(v(P)("modal.form.transferLimit")),1)])),_:1}),(C(),n(S,null,h(W,(e=>m(c,{key:e.key,label:v(P)(`modal.form.${e.key}TransferLimit`)},{default:f((()=>[m(O,{gutter:16},{default:f((()=>[m(X,{span:8},{default:f((()=>{var a;return[m(ae,{value:null==(a=I.value.walletLimits[e.key])?void 0:a.transferLimit,"onUpdate:value":a=>{I.value.walletLimits[e.key]||(I.value.walletLimits[e.key]={storageLimit:0,transferLimit:0}),I.value.walletLimits[e.key].transferLimit=a??0},onChange:a=>z("transferLimit",e.key,a??0),precision:2,placeholder:v(P)("modal.placeholder.enterAmount"),"value-type":"number",style:{width:"100%"}},null,8,["value","onUpdate:value","onChange","placeholder"])]})),_:2},1024),m(X,{span:8},{default:f((()=>[m(A,{value:V(I.value.price),style:{"text-align":"center"},disabled:""},null,8,["value"])])),_:1}),m(X,{span:8},{default:f((()=>[m(H,{compact:""},{default:f((()=>{var a;return[m(ae,{value:j(null==(a=I.value.walletLimits[e.key])?void 0:a.transferLimit),style:{width:"calc(100% - 60px)"},disabled:"","value-type":"number"},null,8,["value"]),m(A,{style:{width:"60px","text-align":"center"},value:"USDT",disabled:""})]})),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["label"]))),64))])),_:1},8,["model"])])),_:1},8,["tab"]))])),_:1},8,["activeKey"])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-af539c36"]]);export{P as default};
