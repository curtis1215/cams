import{v as e,J as a}from"./vendor-Dyo7sIqZ.js";import{_ as l}from"./ChainTypeSelect.vue_vue_type_style_index_0_lang-BnpxTwcj.js";import{d as t,E as i,Q as n,P as o,b as r}from"./ant-design-CqfBI87A.js";import{d,f as s,r as c,w as u,o as p,a0 as m,k as h,Y as v,X as k,Z as f,u as y,G as x,a1 as b,_ as g,W as T,a4 as C}from"./vue-vendor-B-98Oggh.js";import{_ as U}from"./index-B8eEKoFF.js";import"./lodash-CiXSdKEp.js";const B={title:{blockchainQuery:"區塊鏈查詢",blockchainList:"區塊鏈列表",addBlockchain:"新增區塊鏈",editBlockchain:"編輯區塊鏈"},tabs:{blockchainInfo:"區塊鏈資訊",nodeManagement:"節點管理"},field:{chainType:"鏈類型",chainCode:"鏈代碼",chainName:"鏈路名稱",servicePath:"服務路徑",confirmBlocks:"上帳區塊確認數",unlockBlocks:"解鎖區塊確認數",explorer:"區塊瀏覽器",lastUpdateTime:"最後更新時間",expectedTime:"預期轉帳時間",isEvm:"是否為 EVM",addressRegex:"地址正則表達式",nodeUrl:"節點URL",priority:"優先順序",isCurrentUsing:"當前使用",smallTransactionFilter:"小額交易過濾",enableSmallTransactionFilter:"啟用小額交易過濾",smallTransactionThreshold:"小額交易閾值",amountUnit:"數量"},action:{add:"新增",edit:"編輯",delete:"刪除",action:"操作",search:"查詢",confirm:"確認",cancel:"取消",addNode:"新增節點"},prompt:{selectChainType:"請選擇鏈類型",inputChainName:"請輸入鏈路名稱",inputChainCode:"請輸入鏈代碼",inputServicePath:"請輸入服務路徑",inputConfirmBlocks:"請輸入上帳區塊確認數",inputUnlockBlocks:"請輸入解鎖區塊確認數",inputExplorer:"請輸入區塊瀏覽器地址",inputExpectedTime:"請輸入預期轉帳時間",inputAddressRegex:"請輸入地址正則表達式",inputNodeUrl:"請輸入節點URL",inputPriority:"請輸入優先順序",inputSmallTransactionThreshold:"請輸入小額交易閾值",minuteUnit:"分鐘"},description:{expectedTime:"轉帳上鏈超過該時間，則會觸發異常告警",addressRegex:"未符合正則表達式地址，在提幣請求時將會直接拒絕",explorer:"請添加{hash}於url中需帶入txhash值的位置",nodeUrl:"請輸入完整的節點URL，包含協議和端口",priority:"數字越小優先順序越高",smallTransactionFilter:"啟用後將過濾小於設定閾值的交易，避免處理微小金額的交易"},message:{addSuccess:"新增成功",editSuccess:"編輯成功",deleteSuccess:"刪除成功",deleteConfirm:"確定要刪除嗎？",operationSuccess:"操作成功",operationFailed:"操作失敗"},common:{pagination:{total:"共 {total} 條"}}},_={title:{blockchainQuery:"Blockchain Query",blockchainList:"Blockchain List",addBlockchain:"Add Blockchain",editBlockchain:"Edit Blockchain"},tabs:{blockchainInfo:"Blockchain Info",nodeManagement:"Node Management"},field:{chainType:"Chain Type",chainCode:"Chain Code",chainName:"Chain Name",servicePath:"Service Path",confirmBlocks:"Confirm Blocks",unlockBlocks:"Unlock Blocks",explorer:"Block Explorer",lastUpdateTime:"Last Update Time",expectedTime:"Expected Transfer Time",isEvm:"Is EVM",addressRegex:"Address Regex",nodeUrl:"Node URL",priority:"Priority",isCurrentUsing:"Current Using",smallTransactionFilter:"Small Transaction Filter",enableSmallTransactionFilter:"Enable Small Transaction Filter",smallTransactionThreshold:"Small Transaction Threshold",amountUnit:"Amount"},action:{add:"Add",edit:"Edit",delete:"Delete",action:"Action",search:"Search",confirm:"Confirm",cancel:"Cancel",addNode:"Add Node"},prompt:{selectChainType:"Please select chain type",inputChainName:"Please input chain name",inputChainCode:"Please input chain code",inputServicePath:"Please input service path",inputConfirmBlocks:"Please input confirm blocks",inputUnlockBlocks:"Please input unlock blocks",inputExplorer:"Please input block explorer URL",inputExpectedTime:"Please input expected transfer time",inputAddressRegex:"Please input address regex",inputNodeUrl:"Please input node URL",inputPriority:"Please input priority",inputSmallTransactionThreshold:"Please input small transaction threshold",minuteUnit:"minutes"},description:{expectedTime:"An alert will be triggered if the transfer time exceeds this value",addressRegex:"Withdrawal requests with addresses not matching the regex will be rejected",explorer:"Please add {hash} where the txhash value should be in the URL",nodeUrl:"Please input complete node URL including protocol and port",priority:"Lower number means higher priority",smallTransactionFilter:"When enabled, transactions below the threshold will be filtered to avoid processing micro transactions"},message:{addSuccess:"Added successfully",editSuccess:"Edited successfully",deleteSuccess:"Deleted successfully",deleteConfirm:"Are you sure you want to delete?",operationSuccess:"Operation successful",operationFailed:"Operation failed"},common:{pagination:{total:"Total {total} items"}}},w={class:"blockchain-management"},P={class:"card-title"},S={style:{display:"flex","justify-content":"space-between","align-items":"center"}},E={class:"card-title"},R={class:"table-container"},N={class:"node-management"},F={class:"node-table-header"},I=U(d({__name:"Blockchain",setup(d){const U={zh:B,en:_},{t:I}=e({messages:U,legacy:!1}),A=s({chainType:void 0}),L=[{title:I("field.chainName"),dataIndex:"chainName",key:"chainName",width:150},{title:I("field.chainCode"),dataIndex:"chainCode",key:"chainCode",width:150},{title:I("field.servicePath"),dataIndex:"servicePath",key:"servicePath",width:200},{title:I("field.isEvm"),dataIndex:"isEvm",key:"isEvm",width:100,customRender:({text:e})=>e?"✓":""},{title:I("field.confirmBlocks"),dataIndex:"confirmBlocks",key:"confirmBlocks",width:150},{title:I("field.unlockBlocks"),dataIndex:"unlockBlocks",key:"unlockBlocks",width:150},{title:I("field.explorer"),dataIndex:"explorer",key:"explorer",width:200},{title:I("field.lastUpdateTime"),dataIndex:"lastUpdateTime",key:"lastUpdateTime",width:180},{title:I("action.action"),key:"action",width:120,fixed:"right"}],j=[{title:I("field.nodeUrl"),dataIndex:"url",key:"url",width:300},{title:I("field.priority"),dataIndex:"priority",key:"priority",width:100},{title:I("field.isCurrentUsing"),dataIndex:"isCurrentUsing",key:"isCurrentUsing",width:100,customRender:({text:e})=>e?"✓":""},{title:I("action.action"),key:"action",width:80}],q=s([]),z=c({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>I("common.pagination.total",{total:e})}),O=s(!1),M=s(""),Q=s(!1),V=s(null),D=s(!1),K=s(1),W=c({chainName:"",chainCode:"",servicePath:"",confirmBlocks:void 0,unlockBlocks:void 0,explorer:"",isEvm:!1,expectedTime:void 0,addressRegex:"",enableSmallTransactionFilter:!1,smallTransactionThreshold:void 0,nodes:[]}),J={chainName:[{required:!0,message:I("prompt.inputChainName")}],chainCode:[{required:!0,message:I("prompt.inputChainCode")}],servicePath:[{required:!0,message:I("prompt.inputServicePath")}],confirmBlocks:[{required:!0,message:I("prompt.inputConfirmBlocks")}],unlockBlocks:[{required:!0,message:I("prompt.inputUnlockBlocks")}],expectedTime:[{required:!0,message:I("prompt.inputExpectedTime")}],nodes:[{required:!0,validator:(e,a)=>{if(!a||0===a.length)return Promise.reject(new Error(I("prompt.inputNodeUrl")));for(const l of a)if(!l.url)return Promise.reject(new Error(I("prompt.inputNodeUrl")));return Promise.resolve()}}]},G=async()=>{try{const e=(await a((async()=>{const{default:e}=await import("./list.mock-DjGrwD03.js");return{default:e}}),[],import.meta.url)).default;q.value=e.list.map((e=>({...e,isEvm:e.isEvm||!1}))),z.total=e.total}catch(e){}},X=()=>{z.current=1,G()},Y=(e,a,l)=>{z.current=e.current||1,z.pageSize=e.pageSize||10,G()},Z=()=>{D.value=!1,M.value=I("title.addBlockchain"),Object.assign(W,{chainName:"",chainCode:"",servicePath:"",confirmBlocks:void 0,unlockBlocks:void 0,explorer:"",isEvm:!1,expectedTime:void 0,addressRegex:"",enableSmallTransactionFilter:!1,smallTransactionThreshold:void 0,nodes:[]}),O.value=!0,K.value=1},$=async()=>{try{V.value&&(await V.value.validate(),Q.value=!0,setTimeout((()=>{O.value=!1,Q.value=!1,r.success(D.value?I("message.editSuccess"):I("message.addSuccess")),G()}),1e3))}catch(e){}},H=()=>{O.value=!1,V.value&&V.value.resetFields()};u((()=>W.chainCode),(e=>{W.servicePath=e?`cryp-${e}`:""}));const ee=()=>{W.nodes||(W.nodes=[]),W.nodes.push({url:"",priority:W.nodes.length+1,isCurrentUsing:0===W.nodes.length})},ae=e=>{e||(W.smallTransactionThreshold=void 0)};return p((()=>{G(),window.addEventListener("error",(e=>{"ResizeObserver loop completed with undelivered notifications."===e.message&&e.stopImmediatePropagation()}))})),(e,a)=>{const r=k("a-form-item"),d=k("a-button"),s=k("a-form"),c=k("a-card"),u=k("a-space"),p=k("a-table"),U=k("a-input"),B=k("a-input-number"),_=k("a-checkbox"),G=k("a-textarea"),le=k("a-tab-pane"),te=k("a-tabs"),ie=k("a-modal");return f(),m("div",w,[h(c,{bordered:!1,class:"filter-card"},{title:v((()=>[g("span",P,b(y(I)("title.blockchainQuery")),1)])),default:v((()=>[h(s,{layout:"inline",model:A.value,class:"query-form"},{default:v((()=>[h(r,{label:y(I)("field.chainType"),class:"form-item"},{default:v((()=>[h(l,{modelValue:A.value.chainType,"onUpdate:modelValue":a[0]||(a[0]=e=>A.value.chainType=e),placeholder:y(I)("prompt.selectChainType"),style:{width:"180px"}},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),h(r,{class:"form-item"},{default:v((()=>[h(d,{type:"primary",onClick:X},{icon:v((()=>[h(y(t))])),default:v((()=>[x(" "+b(y(I)("action.search")),1)])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),h(c,{bordered:!1,bodyStyle:{padding:"20px 24px"},class:"table-card"},{title:v((()=>[g("div",S,[g("span",E,b(y(I)("title.blockchainList")),1),h(d,{type:"primary",onClick:Z},{icon:v((()=>[h(y(o))])),default:v((()=>[x(" "+b(y(I)("action.add")),1)])),_:1})])])),default:v((()=>[g("div",R,[h(p,{columns:L,"data-source":q.value,pagination:z,bordered:!0,scroll:{x:1400},onChange:Y},{bodyCell:v((({column:e,record:a})=>["action"===e.key?(f(),T(u,{key:0},{default:v((()=>[h(y(i),{class:"action-icon",onClick:e=>(e=>{D.value=!0,M.value=I("title.editBlockchain"),Object.assign(W,e),O.value=!0,K.value=1})(a)},null,8,["onClick"]),h(y(n),{class:"action-icon",onClick:e=>{}},null,8,["onClick"])])),_:2},1024)):C("",!0)])),_:1},8,["data-source","pagination"])])])),_:1}),h(ie,{open:O.value,"onUpdate:open":a[13]||(a[13]=e=>O.value=e),title:M.value,onOk:$,onCancel:H,confirmLoading:Q.value,width:"800px"},{default:v((()=>[h(te,{activeKey:K.value,"onUpdate:activeKey":a[12]||(a[12]=e=>K.value=e)},{default:v((()=>[(f(),T(le,{key:1,tab:y(I)("tabs.blockchainInfo")},{default:v((()=>[h(s,{model:W,rules:J,ref_key:"formRef",ref:V,layout:"vertical"},{default:v((()=>[h(r,{label:y(I)("field.chainName"),name:"chainName"},{default:v((()=>[h(U,{value:W.chainName,"onUpdate:value":a[1]||(a[1]=e=>W.chainName=e),placeholder:y(I)("prompt.inputChainName")},null,8,["value","placeholder"])])),_:1},8,["label"]),h(r,{label:y(I)("field.chainCode"),name:"chainCode"},{default:v((()=>[h(U,{value:W.chainCode,"onUpdate:value":a[2]||(a[2]=e=>W.chainCode=e),placeholder:y(I)("prompt.inputChainCode")},null,8,["value","placeholder"])])),_:1},8,["label"]),h(r,{label:y(I)("field.servicePath"),name:"servicePath"},{default:v((()=>[h(U,{value:W.servicePath,"onUpdate:value":a[3]||(a[3]=e=>W.servicePath=e),placeholder:y(I)("prompt.inputServicePath"),disabled:!0},null,8,["value","placeholder"])])),_:1},8,["label"]),h(r,{label:y(I)("field.confirmBlocks"),name:"confirmBlocks"},{default:v((()=>[h(B,{value:W.confirmBlocks,"onUpdate:value":a[4]||(a[4]=e=>W.confirmBlocks=e),placeholder:y(I)("prompt.inputConfirmBlocks"),min:1,style:{width:"100%"}},null,8,["value","placeholder"])])),_:1},8,["label"]),h(r,{label:y(I)("field.unlockBlocks"),name:"unlockBlocks"},{default:v((()=>[h(B,{value:W.unlockBlocks,"onUpdate:value":a[5]||(a[5]=e=>W.unlockBlocks=e),placeholder:y(I)("prompt.inputUnlockBlocks"),min:1,style:{width:"100%"}},null,8,["value","placeholder"])])),_:1},8,["label"]),h(r,{label:y(I)("field.explorer"),name:"explorer",extra:y(I)("description.explorer")},{default:v((()=>[h(U,{value:W.explorer,"onUpdate:value":a[6]||(a[6]=e=>W.explorer=e),placeholder:y(I)("prompt.inputExplorer")},null,8,["value","placeholder"])])),_:1},8,["label","extra"]),h(r,{label:y(I)("field.isEvm"),name:"isEvm"},{default:v((()=>[h(_,{checked:W.isEvm,"onUpdate:checked":a[7]||(a[7]=e=>W.isEvm=e)},null,8,["checked"])])),_:1},8,["label"]),h(r,{label:y(I)("field.expectedTime"),name:"expectedTime",extra:y(I)("description.expectedTime")},{default:v((()=>[h(B,{value:W.expectedTime,"onUpdate:value":a[8]||(a[8]=e=>W.expectedTime=e),placeholder:y(I)("prompt.inputExpectedTime"),min:1,addonAfter:y(I)("prompt.minuteUnit"),style:{width:"100%"}},null,8,["value","placeholder","addonAfter"])])),_:1},8,["label","extra"]),h(r,{label:y(I)("field.addressRegex"),name:"addressRegex",extra:y(I)("description.addressRegex")},{default:v((()=>[h(G,{value:W.addressRegex,"onUpdate:value":a[9]||(a[9]=e=>W.addressRegex=e),placeholder:y(I)("prompt.inputAddressRegex"),"auto-size":{minRows:2,maxRows:6}},null,8,["value","placeholder"])])),_:1},8,["label","extra"]),h(r,{label:y(I)("field.smallTransactionFilter"),name:"enableSmallTransactionFilter",extra:y(I)("description.smallTransactionFilter")},{default:v((()=>[h(_,{checked:W.enableSmallTransactionFilter,"onUpdate:checked":a[10]||(a[10]=e=>W.enableSmallTransactionFilter=e),onChange:ae},{default:v((()=>[x(b(y(I)("field.enableSmallTransactionFilter")),1)])),_:1},8,["checked"]),W.enableSmallTransactionFilter?(f(),T(B,{key:0,value:W.smallTransactionThreshold,"onUpdate:value":a[11]||(a[11]=e=>W.smallTransactionThreshold=e),placeholder:y(I)("prompt.inputSmallTransactionThreshold"),min:0,step:1e-6,precision:6,style:{width:"100%","margin-top":"8px"},addonAfter:y(I)("field.amountUnit")},null,8,["value","placeholder","addonAfter"])):C("",!0)])),_:1},8,["label","extra"])])),_:1},8,["model"])])),_:1},8,["tab"])),(f(),T(le,{key:2,tab:y(I)("tabs.nodeManagement")},{default:v((()=>[g("div",N,[g("div",F,[h(d,{type:"primary",onClick:ee},{icon:v((()=>[h(y(o))])),default:v((()=>[x(" "+b(y(I)("action.addNode")),1)])),_:1})]),h(p,{columns:j,"data-source":W.nodes,pagination:!1,bordered:!0},{bodyCell:v((({column:e,record:a,index:l})=>["url"===e.key?(f(),T(U,{key:0,value:a.url,"onUpdate:value":e=>a.url=e,placeholder:y(I)("prompt.inputNodeUrl")},null,8,["value","onUpdate:value","placeholder"])):C("",!0),"priority"===e.key?(f(),T(B,{key:1,value:a.priority,"onUpdate:value":e=>a.priority=e,min:1,disabled:!0,style:{width:"100%"}},null,8,["value","onUpdate:value"])):C("",!0),"isCurrentUsing"===e.key?(f(),T(_,{key:2,checked:a.isCurrentUsing,"onUpdate:checked":e=>a.isCurrentUsing=e,onChange:e=>((e,a)=>{W.nodes.forEach(((e,l)=>{l!==a&&(e.isCurrentUsing=!1)}))})(0,l)},null,8,["checked","onUpdate:checked","onChange"])):C("",!0),"action"===e.key?(f(),T(y(n),{key:3,class:"action-icon",onClick:e=>(e=>{W.nodes.splice(e,1)})(l)},null,8,["onClick"])):C("",!0)])),_:1},8,["data-source"])])])),_:1},8,["tab"]))])),_:1},8,["activeKey"])])),_:1},8,["open","title","confirmLoading"])])}}}),[["__scopeId","data-v-80636622"]]);export{I as default};
