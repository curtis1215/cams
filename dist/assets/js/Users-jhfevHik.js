import{v as e}from"./vendor-BhfxMwoc.js";import{X as a,W as l,Z as s,Y as t,a0 as r,F as o,a2 as i,k as d,G as u,a1 as n,d as m,f as p,r as c,o as f,u as v,_ as b,a4 as w}from"./vue-vendor-B-98Oggh.js";import{d as h,R as g,b as y}from"./ant-design-DorZdoiW.js";import{_}from"./index-BCb4CLWl.js";import"./lodash-CiXSdKEp.js";const T={__name:"RoleSelect",props:{modelValue:{type:String,default:void 0},placeholder:{type:String,default:""}},emits:["update:modelValue","change"],setup(e,{emit:m}){const p=m,c=[{value:"admin",label:"系統管理員"},{value:"operator",label:"操作員"},{value:"viewer",label:"查看者"}],f=e=>{p("update:modelValue",e),p("change",e)};return(m,p)=>{const v=a("a-select-option"),b=a("a-select");return s(),l(b,{value:e.modelValue,placeholder:e.placeholder,style:{width:"180px"},onChange:f,allowClear:""},{default:t((()=>[(s(),r(o,null,i(c,(e=>d(v,{key:e.value,value:e.value},{default:t((()=>[u(n(e.label),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value","placeholder"])}}},S={title:{userList:"用戶列表",queryCondition:"查詢條件",addUser:"新增用戶",editUser:"編輯用戶"},field:{username:"登入帳號",password:"登入密碼",confirmPassword:"確認密碼",name:"用戶姓名",email:"電子郵件",role:"角色",status:"狀態",lastLoginTime:"最後登入時間",createTime:"創建時間",updateTime:"更新時間",action:"操作"},status:{enabled:"啟用",disabled:"停用"},action:{search:"查詢",reset:"重置",add:"新增",edit:"編輯",delete:"刪除",enable:"啟用",disable:"停用",viewHistory:"查看歷程"},prompt:{pleaseInputUsername:"請輸入登入帳號",pleaseInputPassword:"請輸入登入密碼",pleaseConfirmPassword:"請再次輸入密碼",pleaseInputName:"請輸入用戶姓名",pleaseInputEmail:"請輸入電子郵件",pleaseSelectRole:"請選擇角色",confirmDelete:"確定要刪除此用戶嗎？",confirmEnable:"確定要啟用此用戶嗎？",confirmDisable:"確定要停用此用戶嗎？"},message:{addSuccess:"新增用戶成功",editSuccess:"編輯用戶成功",deleteSuccess:"刪除用戶成功",enableSuccess:"啟用用戶成功",disableSuccess:"停用用戶成功",passwordNotMatch:"兩次輸入的密碼不一致"}},U={title:{userList:"User List",queryCondition:"Query Condition",addUser:"Add User",editUser:"Edit User"},field:{username:"Username",password:"Password",confirmPassword:"Confirm Password",name:"Name",email:"Email",role:"Role",status:"Status",lastLoginTime:"Last Login Time",createTime:"Create Time",updateTime:"Update Time",action:"Action"},status:{enabled:"Enabled",disabled:"Disabled"},action:{search:"Search",reset:"Reset",add:"Add",edit:"Edit",delete:"Delete",enable:"Enable",disable:"Disable",viewHistory:"View History"},prompt:{pleaseInputUsername:"Please input username",pleaseInputPassword:"Please input password",pleaseConfirmPassword:"Please confirm password",pleaseInputName:"Please input name",pleaseInputEmail:"Please input email",pleaseSelectRole:"Please select role",confirmDelete:"Are you sure to delete this user?",confirmEnable:"Are you sure to enable this user?",confirmDisable:"Are you sure to disable this user?"},message:{addSuccess:"Add user successfully",editSuccess:"Edit user successfully",deleteSuccess:"Delete user successfully",enableSuccess:"Enable user successfully",disableSuccess:"Disable user successfully",passwordNotMatch:"The two passwords do not match"}},C={total:100,data:[{id:1,username:"admin",name:"系統管理員",email:"admin@example.com",role:"admin",status:"enabled",lastLoginTime:"2024-03-20 10:30:00",createTime:"2024-01-01 00:00:00"},{id:2,username:"operator",name:"運營人員",email:"operator@example.com",role:"operator",status:"enabled",lastLoginTime:"2024-03-19 15:45:00",createTime:"2024-01-02 09:00:00"},{id:3,username:"viewer",name:"查看者",email:"viewer@example.com",role:"viewer",status:"disabled",lastLoginTime:"2024-03-18 11:20:00",createTime:"2024-01-03 14:30:00"},{id:4,username:"finance",name:"財務人員",email:"finance@example.com",role:"finance",status:"enabled",lastLoginTime:"2024-03-20 09:15:00",createTime:"2024-01-04 10:00:00"},{id:5,username:"support",name:"客服人員",email:"support@example.com",role:"support",status:"enabled",lastLoginTime:"2024-03-19 16:40:00",createTime:"2024-01-05 11:20:00"}]},I={class:"users-page"},k={class:"card-title"},P={class:"table-title"},L=_(m({__name:"Users",setup(o){const i={zh:S,en:U},{t:m}=e({messages:i,legacy:!1}),_=p({email:"",name:"",role:void 0,status:void 0}),L=[{title:m("field.username"),dataIndex:"username",key:"username",width:150},{title:m("field.name"),dataIndex:"name",key:"name",width:150},{title:m("field.email"),dataIndex:"email",key:"email",width:200},{title:m("field.role"),dataIndex:"role",key:"role",width:150},{title:m("field.status"),dataIndex:"status",key:"status",width:100},{title:m("field.lastLoginTime"),dataIndex:"lastLoginTime",key:"lastLoginTime",width:180},{title:m("field.createTime"),dataIndex:"createTime",key:"createTime",width:180},{title:m("field.action"),key:"action",width:200,fixed:"right"}],x=p([]),E=p(!1),q=c({current:1,pageSize:10,total:C.total,showSizeChanger:!0,showQuickJumper:!0}),D=()=>{E.value=!0,setTimeout((()=>{const{email:e,name:a,role:l,status:s}=_.value;let t=C.data.filter((t=>!(e&&!t.email.toLowerCase().includes(e.toLowerCase()))&&(!(a&&!t.name.includes(a))&&((!l||t.role===l)&&(!s||t.status===s)))));q.total=t.length;const r=(q.current-1)*q.pageSize,o=r+q.pageSize;x.value=t.slice(r,o),E.value=!1}),300)},R=()=>{_.value={email:"",name:"",role:void 0,status:void 0},q.current=1,D()},N=(e,a,l)=>{q.current=e.current||1,q.pageSize=e.pageSize||10,D()},z=p(!1),A=p(!1),j=p(!1),V=p(),H=c({username:"",password:"",confirmPassword:"",name:"",email:"",role:void 0,status:"enabled"}),F={username:[{required:!0,message:m("prompt.pleaseInputUsername")}],password:[{required:!0,message:m("prompt.pleaseInputPassword")}],confirmPassword:[{required:!0,message:m("prompt.pleaseConfirmPassword")},{validator:async(e,a)=>{if(a&&a!==H.password)throw new Error(m("message.passwordNotMatch"))}}],name:[{required:!0,message:m("prompt.pleaseInputName")}],email:[{required:!0,message:m("prompt.pleaseInputEmail")},{type:"email",message:m("prompt.pleaseInputEmail")}],role:[{required:!0,message:m("prompt.pleaseSelectRole")}],status:[{required:!0}]},M=async()=>{if(V.value)try{await V.value.validate(),A.value=!0,setTimeout((()=>{A.value=!1,z.value=!1,y.success(j.value?m("message.editSuccess"):m("message.addSuccess")),D()}),300)}catch(e){}},O=()=>{var e;z.value=!1,null==(e=V.value)||e.resetFields()};return f((()=>{E.value=!0,setTimeout((()=>{x.value=C.data,E.value=!1}),300)})),(e,o)=>{const i=a("a-input"),p=a("a-form-item"),c=a("a-select-option"),f=a("a-select"),S=a("a-button"),U=a("a-space"),C=a("a-form"),Q=a("a-card"),G=a("a-tag"),J=a("a-popconfirm"),W=a("a-table"),X=a("a-input-password"),Y=a("a-modal");return s(),r("div",I,[d(Q,{bordered:!1,class:"filter-card"},{title:t((()=>[b("span",k,n(v(m)("title.queryCondition")),1)])),default:t((()=>[d(C,{layout:"inline",model:_.value,class:"query-form"},{default:t((()=>[d(p,{label:v(m)("field.email"),class:"form-item"},{default:t((()=>[d(i,{value:_.value.email,"onUpdate:value":o[0]||(o[0]=e=>_.value.email=e),placeholder:v(m)("prompt.pleaseInputEmail"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),d(p,{label:v(m)("field.name"),class:"form-item"},{default:t((()=>[d(i,{value:_.value.name,"onUpdate:value":o[1]||(o[1]=e=>_.value.name=e),placeholder:v(m)("prompt.pleaseInputName"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),d(p,{label:v(m)("field.role"),class:"form-item"},{default:t((()=>[d(T,{value:_.value.role,"onUpdate:value":o[2]||(o[2]=e=>_.value.role=e),placeholder:v(m)("prompt.pleaseSelectRole")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(p,{label:v(m)("field.status"),class:"form-item"},{default:t((()=>[d(f,{value:_.value.status,"onUpdate:value":o[3]||(o[3]=e=>_.value.status=e),allowClear:""},{default:t((()=>[d(c,{value:"enabled"},{default:t((()=>[u(n(v(m)("status.enabled")),1)])),_:1}),d(c,{value:"disabled"},{default:t((()=>[u(n(v(m)("status.disabled")),1)])),_:1})])),_:1},8,["value"])])),_:1},8,["label"]),d(p,{class:"form-item"},{default:t((()=>[d(U,null,{default:t((()=>[d(S,{type:"primary",onClick:D},{icon:t((()=>[d(v(h))])),default:t((()=>[u(" "+n(v(m)("action.search")),1)])),_:1}),d(S,{onClick:R},{icon:t((()=>[d(v(g))])),default:t((()=>[u(" "+n(v(m)("action.reset")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),d(Q,{bordered:!1,class:"table-card"},{title:t((()=>[b("div",P,[b("span",null,n(v(m)("title.userList")),1)])])),default:t((()=>[d(W,{columns:L,"data-source":x.value,pagination:q,loading:E.value,onChange:N},{bodyCell:t((({column:e,record:a})=>["status"===e.key?(s(),l(G,{key:0,color:"enabled"===a.status?"success":"error"},{default:t((()=>[u(n(v(m)(`status.${a.status}`)),1)])),_:2},1032,["color"])):w("",!0),"action"===e.key?(s(),l(U,{key:1},{default:t((()=>[d(S,{type:"link",onClick:e=>(e=>{j.value=!0,Object.assign(H,e),z.value=!0})(a)},{default:t((()=>[u(n(v(m)("action.edit")),1)])),_:2},1032,["onClick"]),d(S,{type:"link",onClick:e=>{}},{default:t((()=>[u(n(v(m)("action.viewHistory")),1)])),_:2},1032,["onClick"]),d(J,{title:v(m)("prompt.confirmDelete"),onConfirm:e=>{setTimeout((()=>{y.success(m("message.deleteSuccess")),D()}),300)}},{default:t((()=>[d(S,{type:"link",danger:""},{default:t((()=>[u(n(v(m)("action.delete")),1)])),_:1})])),_:2},1032,["title","onConfirm"])])),_:2},1024)):w("",!0)])),_:1},8,["data-source","pagination","loading"])])),_:1}),d(Y,{open:z.value,"onUpdate:open":o[11]||(o[11]=e=>z.value=e),title:j.value?v(m)("title.editUser"):v(m)("title.addUser"),onOk:M,onCancel:O,confirmLoading:A.value},{default:t((()=>[d(C,{ref_key:"userFormRef",ref:V,model:H,rules:F,"label-col":{span:6},"wrapper-col":{span:16}},{default:t((()=>[d(p,{label:v(m)("field.username"),name:"username"},{default:t((()=>[d(i,{value:H.username,"onUpdate:value":o[4]||(o[4]=e=>H.username=e),placeholder:v(m)("prompt.pleaseInputUsername"),disabled:j.value},null,8,["value","placeholder","disabled"])])),_:1},8,["label"]),d(p,{label:v(m)("field.password"),name:"password",required:!j.value},{default:t((()=>[d(X,{value:H.password,"onUpdate:value":o[5]||(o[5]=e=>H.password=e),placeholder:v(m)("prompt.pleaseInputPassword")},null,8,["value","placeholder"])])),_:1},8,["label","required"]),d(p,{label:v(m)("field.confirmPassword"),name:"confirmPassword",required:!j.value},{default:t((()=>[d(X,{value:H.confirmPassword,"onUpdate:value":o[6]||(o[6]=e=>H.confirmPassword=e),placeholder:v(m)("prompt.pleaseConfirmPassword")},null,8,["value","placeholder"])])),_:1},8,["label","required"]),d(p,{label:v(m)("field.name"),name:"name"},{default:t((()=>[d(i,{value:H.name,"onUpdate:value":o[7]||(o[7]=e=>H.name=e),placeholder:v(m)("prompt.pleaseInputName")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(p,{label:v(m)("field.email"),name:"email"},{default:t((()=>[d(i,{value:H.email,"onUpdate:value":o[8]||(o[8]=e=>H.email=e),placeholder:v(m)("prompt.pleaseInputEmail")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(p,{label:v(m)("field.role"),name:"role"},{default:t((()=>[d(T,{value:H.role,"onUpdate:value":o[9]||(o[9]=e=>H.role=e),placeholder:v(m)("prompt.pleaseSelectRole")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(p,{label:v(m)("field.status"),name:"status"},{default:t((()=>[d(f,{value:H.status,"onUpdate:value":o[10]||(o[10]=e=>H.status=e)},{default:t((()=>[d(c,{value:"enabled"},{default:t((()=>[u(n(v(m)("status.enabled")),1)])),_:1}),d(c,{value:"disabled"},{default:t((()=>[u(n(v(m)("status.disabled")),1)])),_:1})])),_:1},8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["open","title","confirmLoading"])])}}}),[["__scopeId","data-v-1657004b"]]);export{L as default};
