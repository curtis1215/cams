import{v as e}from"./vendor-BhfxMwoc.js";import{_ as a}from"./index-Cibaxni6.js";import{P as t,b as r}from"./ant-design-BRHeEO20.js";import{f as i,r as l,a0 as s,Z as o,k as n,Y as d,_ as c,X as m,W as u,a4 as p,G as f,a1 as y,u as g,F as k,a2 as h}from"./vue-vendor-B-98Oggh.js";import"./lodash-CiXSdKEp.js";const v={title:{roleList:"角色列表",roleManagement:"角色管理",addRole:"新增角色",editRole:"編輯角色",walletTransferConfig:"參數配置"},field:{roleName:"角色名稱",roleDescription:"角色描述",permissions:"權限設置",createTime:"創建時間",updateTime:"更新時間",twoFactorAuth:"雙重認證",twoFactorAuthRequired:"是否啟用雙重認證",generalTransferLimit:"單日錢包轉帳限額",dailyWalletTransferLimit:"單日錢包轉帳限額"},action:{addRole:"新增角色",editRole:"編輯角色",deleteRole:"刪除角色",configParams:"參數配置",save:"保存",cancel:"取消",action:"操作"},permission:{read:"讀取",create:"新增",update:"編輯",delete:"刪除",largeAmountTransfer:"大額轉帳"},module:{monitor:{title:"監控管理",dashboard:"數據監控",alert:"告警監控"},wallet:{title:"錢包管理",query:"錢包查詢",detail:"錢包詳情",privateKey:"私鑰管理",transfer:"錢包轉賬",tokenExchange:"代幣兌換管理"},order:{title:"訂單管理",deposit:"充值訂單查詢",withdraw:"提現訂單查詢",transfer:"轉賬訂單查詢",exchange:"兌換訂單查詢",transaction:"交易明細查詢"},reconciliation:{title:"對帳管理",walletBalance:"對帳明細查詢"},params:{title:"參數管理",blockchain:"區塊鏈管理",contractCoin:"合約幣種管理"},system:{title:"系統管理",users:"用戶管理",roles:"角色管理",merchants:"商戶管理",systemParams:"系統參數管理"}},message:{deleteConfirm:"確定要刪除此角色嗎？",deleteSuccess:"角色刪除成功",saveFailed:"保存失敗",saveSuccess:"保存成功",roleNameRequired:"請輸入角色名稱",roleDescriptionRequired:"請輸入角色描述",transferLimitRequired:"請輸入轉帳限額",transferLimitMinimum:"轉帳限額必須大於等於0"},prompt:{inputRoleName:"請輸入角色名稱",inputRoleDescription:"請輸入角色描述",inputTransferLimit:"請輸入單日錢包轉帳限額"}},R={title:{roleList:"Role List",roleManagement:"Role Management",addRole:"Add Role",editRole:"Edit Role",walletTransferConfig:"Parameter Configuration"},field:{roleName:"Role Name",roleDescription:"Role Description",permissions:"Permissions",createTime:"Create Time",updateTime:"Update Time",twoFactorAuth:"Two-Factor Authentication",twoFactorAuthRequired:"Enable Two-Factor Authentication",generalTransferLimit:"Daily Wallet Transfer Limit",dailyWalletTransferLimit:"Daily Wallet Transfer Limit"},action:{addRole:"Add Role",editRole:"Edit Role",deleteRole:"Delete Role",configParams:"Config Params",save:"Save",cancel:"Cancel",action:"Actions"},permission:{read:"Read",create:"Create",update:"Update",delete:"Delete",largeAmountTransfer:"Large Amount Transfer"},module:{monitor:{title:"Monitoring",dashboard:"Data Monitoring",alert:"Alert Monitoring"},wallet:{title:"Wallet Management",query:"Wallet Query",detail:"Wallet Detail",privateKey:"Private Key Management",transfer:"Wallet Transfer",tokenExchange:"Token Exchange"},order:{title:"Order Management",deposit:"Deposit Orders",withdraw:"Withdraw Orders",transfer:"Transfer Orders",exchange:"Exchange Orders",transaction:"Transaction Details"},reconciliation:{title:"Reconciliation",walletBalance:"Balance Query"},params:{title:"Parameters",blockchain:"Blockchain",contractCoin:"Contract Coins"},system:{title:"System",users:"Users",roles:"Roles",merchants:"Merchants",systemParams:"System Parameters Management"}},message:{deleteConfirm:"Are you sure you want to delete this role?",deleteSuccess:"Role deleted successfully",saveFailed:"Save failed",saveSuccess:"Save successful",roleNameRequired:"Please input role name",roleDescriptionRequired:"Please input role description",transferLimitRequired:"Please input transfer limit",transferLimitMinimum:"Transfer limit must be greater than or equal to 0"},prompt:{inputRoleName:"Please input role name",inputRoleDescription:"Please input role description",inputTransferLimit:"Please input daily wallet transfer limit"}},T=[{id:1,roleName:"超級管理員",roleDescription:"系統最高權限管理員，可以管理所有功能",createTime:"2024-03-20 10:00:00",updateTime:"2024-03-20 10:00:00"},{id:2,roleName:"財務管理員",roleDescription:"負責處理錢包轉賬、訂單管理和對帳等財務相關操作",createTime:"2024-03-20 11:30:00",updateTime:"2024-03-20 14:15:00"},{id:3,roleName:"運維人員",roleDescription:"負責系統監控和告警處理",createTime:"2024-03-20 13:45:00",updateTime:"2024-03-20 16:20:00"},{id:4,roleName:"商戶管理員",roleDescription:"負責商戶管理和商戶相關配置",createTime:"2024-03-21 09:00:00",updateTime:"2024-03-21 09:00:00"},{id:5,roleName:"查詢人員",roleDescription:"擁有所有模塊的只讀權限",createTime:"2024-03-21 10:30:00",updateTime:"2024-03-21 10:30:00"}],w={class:"roles-management"},b={style:{display:"flex","justify-content":"space-between","align-items":"center"}},D={class:"card-title"},C={class:"table-container"},L={class:"permission-module"},_={class:"module-title"},N={class:"permission-pages"},q={class:"page-title"},A={class:"permission-items"},F=a({__name:"Roles",setup(a){const F={zh:v,en:R},{t:x}=e({messages:F,legacy:!1}),P=[{title:x("field.roleName"),dataIndex:"roleName",key:"roleName",width:200},{title:x("field.roleDescription"),dataIndex:"roleDescription",key:"roleDescription",width:300},{title:x("field.createTime"),dataIndex:"createTime",key:"createTime",width:200},{title:x("field.updateTime"),dataIndex:"updateTime",key:"updateTime",width:200},{title:x("action.action"),key:"action",width:200,fixed:"right"}],S=i(T),M=[{key:"monitor",pages:[{key:"dashboard",permissions:["read"]},{key:"alert",permissions:["read","create","update","delete"]}]},{key:"wallet",pages:[{key:"query",permissions:["read","create","update"]},{key:"detail",permissions:["read","create","update"]},{key:"privateKey",permissions:["read"]},{key:"transfer",permissions:["read","create","update","largeAmountTransfer"]},{key:"tokenExchange",permissions:["read","create","update"]}]},{key:"order",pages:[{key:"deposit",permissions:["read","create","update"]},{key:"withdraw",permissions:["read","create","update"]},{key:"transfer",permissions:["read","create","update"]},{key:"exchange",permissions:["read","create","update"]},{key:"transaction",permissions:["read","create","update"]}]},{key:"reconciliation",pages:[{key:"walletBalance",permissions:["read","update"]}]},{key:"params",pages:[{key:"blockchain",permissions:["read","create","update","delete"]},{key:"contractCoin",permissions:["read","create","update","delete"]}]},{key:"system",pages:[{key:"users",permissions:["read","create","update","delete"]},{key:"roles",permissions:["read","create","update","delete"]},{key:"merchants",permissions:["read","create","update","delete"]},{key:"systemParams",permissions:["read","update"]}]}],U=i(!1),E=i(!1),W=i(null),O=i(!1),j=i(!1),z=i(!1),B=i(null),I=i(null),K=()=>{const e={};return M.forEach((a=>{e[a.key]={},a.pages.forEach((t=>{e[a.key][t.key]={},t.permissions.forEach((r=>{e[a.key][t.key][r]=!1}))}))})),e},$=l({roleName:"",roleDescription:"",twoFactorAuthRequired:!1,permissions:K()}),Q={roleName:[{required:!0,message:x("message.roleNameRequired"),trigger:"blur"}],roleDescription:[{required:!0,message:x("message.roleDescriptionRequired"),trigger:"blur"}]},V=l({generalTransferLimit:1e4}),G={generalTransferLimit:[{required:!0,message:x("message.transferLimitRequired"),trigger:"blur"},{type:"number",min:0,message:x("message.transferLimitMinimum"),trigger:"blur"}]},J=()=>{O.value=!1,$.roleName="",$.roleDescription="",$.twoFactorAuthRequired=!1,$.permissions=K(),U.value=!0},X=async()=>{try{await W.value.validate(),E.value=!0,setTimeout((()=>{r.success(x("message.saveSuccess")),U.value=!1,E.value=!1,W.value.resetFields()}),1e3)}catch(e){}},Y=()=>{U.value=!1,W.value.resetFields()},Z=(e,a,t)=>{},H=async()=>{try{await B.value.validate(),z.value=!0,setTimeout((()=>{r.success(x("message.saveSuccess")),j.value=!1,z.value=!1}),1e3)}catch(e){}},ee=()=>{j.value=!1,B.value.resetFields()};return(e,a)=>{const i=m("a-button"),l=m("a-space"),v=m("a-table"),R=m("a-card"),T=m("a-input"),F=m("a-form-item"),K=m("a-textarea"),ae=m("a-switch"),te=m("a-checkbox"),re=m("a-divider"),ie=m("a-form"),le=m("a-modal"),se=m("a-input-number");return o(),s("div",w,[n(R,{bordered:!1,class:"table-card"},{title:d((()=>[c("div",b,[c("span",D,y(g(x)("title.roleList")),1),n(i,{type:"primary",onClick:J},{icon:d((()=>[n(g(t))])),default:d((()=>[f(" "+y(g(x)("action.addRole")),1)])),_:1})])])),default:d((()=>[c("div",C,[n(v,{columns:P,"data-source":S.value,pagination:{total:100,pageSize:10,showSizeChanger:!1,showQuickJumper:!0},bordered:!0,onChange:Z},{bodyCell:d((({column:e,record:a})=>["action"===e.key?(o(),u(l,{key:0},{default:d((()=>[n(i,{type:"link",size:"small",onClick:e=>(e=>{O.value=!0,$.roleName=e.roleName,$.roleDescription=e.roleDescription,U.value=!0})(a)},{default:d((()=>[f(y(g(x)("action.editRole")),1)])),_:2},1032,["onClick"]),n(i,{type:"link",size:"small",onClick:e=>(e=>{I.value=e,V.generalTransferLimit=1e4,j.value=!0})(a)},{default:d((()=>[f(y(g(x)("action.configParams")),1)])),_:2},1032,["onClick"]),n(i,{type:"link",status:"danger",size:"small",onClick:e=>{r.success(x("message.deleteSuccess"))}},{default:d((()=>[f(y(g(x)("action.deleteRole")),1)])),_:2},1032,["onClick"])])),_:2},1024)):p("",!0)])),_:1},8,["data-source"])])])),_:1}),n(le,{open:U.value,"onUpdate:open":a[3]||(a[3]=e=>U.value=e),title:O.value?g(x)("title.editRole"):g(x)("title.addRole"),onOk:X,onCancel:Y,confirmLoading:E.value,width:"800px"},{default:d((()=>[n(ie,{model:$,rules:Q,ref_key:"roleFormRef",ref:W,layout:"vertical"},{default:d((()=>[n(F,{label:g(x)("field.roleName"),name:"roleName"},{default:d((()=>[n(T,{value:$.roleName,"onUpdate:value":a[0]||(a[0]=e=>$.roleName=e),placeholder:g(x)("prompt.inputRoleName"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),n(F,{label:g(x)("field.roleDescription"),name:"roleDescription"},{default:d((()=>[n(K,{value:$.roleDescription,"onUpdate:value":a[1]||(a[1]=e=>$.roleDescription=e),placeholder:g(x)("prompt.inputRoleDescription"),rows:4,"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),n(F,{label:g(x)("field.twoFactorAuth"),name:"twoFactorAuthRequired"},{default:d((()=>[n(ae,{checked:$.twoFactorAuthRequired,"onUpdate:checked":a[2]||(a[2]=e=>$.twoFactorAuthRequired=e),checkedValue:!0,unCheckedValue:!1},{checkedChildren:d((()=>[f(y(g(x)("field.twoFactorAuthRequired")),1)])),unCheckedChildren:d((()=>[f(y(g(x)("field.twoFactorAuthRequired")),1)])),_:1},8,["checked"])])),_:1},8,["label"]),n(F,{label:g(x)("field.permissions")},{default:d((()=>[n(R,{bordered:!1,class:"permissions-card"},{default:d((()=>[(o(),s(k,null,h(M,(e=>(o(),s(k,{key:e.key},[c("div",L,[c("div",_,y(g(x)(`module.${e.key}.title`)),1),c("div",N,[(o(!0),s(k,null,h(e.pages,(a=>(o(),s("div",{key:a.key,class:"permission-page"},[c("div",q,y(g(x)(`module.${e.key}.${a.key}`)),1),c("div",A,[(o(!0),s(k,null,h(a.permissions,(t=>(o(),u(te,{key:t,checked:$.permissions[e.key][a.key][t],"onUpdate:checked":r=>$.permissions[e.key][a.key][t]=r},{default:d((()=>[f(y(g(x)(`permission.${t}`)),1)])),_:2},1032,["checked","onUpdate:checked"])))),128))])])))),128))])]),e.key!==M[M.length-1].key?(o(),u(re,{key:0})):p("",!0)],64)))),64))])),_:1})])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["open","title","confirmLoading"]),n(le,{open:j.value,"onUpdate:open":a[5]||(a[5]=e=>j.value=e),title:g(x)("title.walletTransferConfig"),onOk:H,onCancel:ee,confirmLoading:z.value,width:"600px"},{default:d((()=>[n(ie,{model:V,rules:G,ref_key:"paramsFormRef",ref:B,layout:"vertical"},{default:d((()=>[n(F,{label:g(x)("field.generalTransferLimit"),name:"generalTransferLimit"},{default:d((()=>[n(se,{value:V.generalTransferLimit,"onUpdate:value":a[4]||(a[4]=e=>V.generalTransferLimit=e),min:0,max:999999999,precision:2,placeholder:g(x)("prompt.inputTransferLimit"),"addon-after":"USDT",style:{width:"100%"}},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["open","title","confirmLoading"])])}}},[["__scopeId","data-v-a71bcbfd"]]);export{F as default};
