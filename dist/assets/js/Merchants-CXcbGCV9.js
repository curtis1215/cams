import{d as e,f as a,r as l,c as t,o as i,a0 as d,k as u,Y as s,u as n,X as o,Z as r,G as c,a1 as p,_ as v,W as m,a4 as f,$ as h,F as y,a2 as S,B as w}from"./vue-vendor-B-98Oggh.js";import{v as b}from"./vendor-BhfxMwoc.js";import{d as U,f as g,_}from"./index-Cb7_ky96.js";import{b as T,d as N,P as C}from"./ant-design-0M0Sv-BJ.js";import"./lodash-CiXSdKEp.js";const k={merchantList:[{id:"M001",name:"測試商戶1",code:"TEST001",status:"active",updateTime:"2024-01-22 10:30:45"},{id:"M002",name:"測試商戶2",code:"TEST002",status:"inactive",updateTime:"2024-01-22 09:15:30"},{id:"M003",name:"測試商戶3",code:"TEST003",status:"active",updateTime:"2024-01-21 16:45:20"},{id:"M004",name:"測試商戶4",code:"TEST004",status:"active",updateTime:"2024-01-21 14:20:10"},{id:"M005",name:"測試商戶5",code:"TEST005",status:"inactive",updateTime:"2024-01-20 17:55:40"},{id:"M006",name:"測試商戶6",code:"TEST006",status:"active",updateTime:"2024-01-20 11:30:25"},{id:"M007",name:"測試商戶7",code:"TEST007",status:"active",updateTime:"2024-01-19 15:40:35"},{id:"M008",name:"測試商戶8",code:"TEST008",status:"inactive",updateTime:"2024-01-19 09:25:15"},{id:"M009",name:"測試商戶9",code:"TEST009",status:"active",updateTime:"2024-01-18 16:50:30"},{id:"M010",name:"測試商戶10",code:"TEST010",status:"active",updateTime:"2024-01-18 13:15:50"}]},E=[{code:"BTC",name:"Bitcoin"},{code:"ETH",name:"Ethereum"},{code:"USDT",name:"Tether"},{code:"BNB",name:"Binance Coin"},{code:"SOL",name:"Solana"},{code:"XRP",name:"Ripple"},{code:"ADA",name:"Cardano"},{code:"DOGE",name:"Dogecoin"},{code:"AVAX",name:"Avalanche"},{code:"DOT",name:"Polkadot"},{code:"MATIC",name:"Polygon"},{code:"UNI",name:"Uniswap"},{code:"LTC",name:"Litecoin"},{code:"LINK",name:"Chainlink"},{code:"ATOM",name:"Cosmos"},{code:"XLM",name:"Stellar"},{code:"NEAR",name:"NEAR Protocol"},{code:"ALGO",name:"Algorand"},{code:"FTM",name:"Fantom"},{code:"VET",name:"VeChain"},{code:"HBAR",name:"Hedera"},{code:"FIL",name:"Filecoin"},{code:"EOS",name:"EOS"},{code:"XTZ",name:"Tezos"},{code:"AAVE",name:"Aave"},{code:"EGLD",name:"MultiversX"},{code:"XMR",name:"Monero"},{code:"CAKE",name:"PancakeSwap"},{code:"NEO",name:"NEO"},{code:"QTUM",name:"Qtum"}],M={class:"merchants-container"},x={class:"table-container"},L={class:"currency-management-container"},A={class:"currency-grid"},D={class:"select-all-wrapper"},O={class:"currency-columns"},H={class:"chain-type-list"},B=["onClick"],K={class:"chain-type-name"},R={class:"currency-list"},W={class:"currency-list-header"},I={class:"currency-list-content"},$={class:"currency-config-list"},j={class:"currency-header"},q={key:0,class:"currency-settings"},X={class:"setting-row-inline"},z={class:"setting-field"},P={class:"setting-label"},F={class:"setting-field"},G={class:"setting-label"},V=_(e({__name:"Merchants",setup(e){const _={zh:g,en:U},{t:V}=b({messages:_,legacy:!1}),Q=[{title:V("field.name"),dataIndex:"name",key:"name"},{title:V("field.code"),dataIndex:"code",key:"code"},{title:V("field.status"),dataIndex:"status",key:"status"},{title:V("field.updateTime"),dataIndex:"updateTime",key:"updateTime"},{title:V("field.action"),key:"action",fixed:"right",width:200}],Z=["BSC","ETH","TRX","BTC"],J={BSC:["USDT","USDC","BUSD","DAI"],ETH:["USDT","USDC","DAI"],TRX:["USDT","USDC"],BTC:["BTC"]},Y=a(Z[0]),ee=a({}),ae=l({name:"",status:void 0}),le=a(k.merchantList),te=a(!1),ie=a(!1),de=a(""),ue=a(),se=a(1);a(E);const ne=a(!1),oe=a(""),re=a(""),ce=l({id:"",name:"",code:"",status:"active",updateTime:"",retryCount:3,depositStatus:!0,withdrawStatus:!0,swapStatus:!0,lpStatus:!0,depositNotifyUrl:"",withdrawNotifyUrl:"",swapNotifyUrl:"",lpNotifyUrl:"",swapSlippage:.5,lpSlippage:.5,txHashNotifyUrl:"",availableCurrencies:[]}),pe={name:[{required:!0,message:V("validation.nameRequired")}],code:[{required:!0,message:V("validation.codeRequired")}],status:[{required:!0,message:V("validation.statusRequired")}],retryCount:[{required:!0,message:V("validation.retryCountRequired")}]},ve=l({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0}),me=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let l=0;l<32;l++)a+=e.charAt(Math.floor(62*Math.random()));ce.privateKey=a,T.success(V("message.generateKeySuccess"))},fe=()=>{const e=k.merchantList.filter((e=>!(ae.name&&!e.name.includes(ae.name))&&(!ae.status||e.status===ae.status)));le.value=e},he=()=>{de.value=V("title.addMerchant"),Object.assign(ce,{id:"",name:"",code:"",status:"active",updateTime:"",retryCount:3,depositStatus:!0,withdrawStatus:!0,swapStatus:!0,lpStatus:!0,depositNotifyUrl:"",withdrawNotifyUrl:"",swapNotifyUrl:"",lpNotifyUrl:"",swapSlippage:.5,lpSlippage:.5,txHashNotifyUrl:"",availableCurrencies:[]}),ie.value=!0,se.value=1},ye=()=>{T.success(V("message.currencyConfigSaved")),ne.value=!1},Se=()=>{ne.value=!1},we=(e,a,l)=>{ee.value[e]&&(ee.value[e][a]=l)},be=e=>J[e].map((a=>`${e}_${a}`)).every((e=>{var a;return null==(a=ee.value[e])?void 0:a.enabled})),Ue=e=>{const a=J[e].map((a=>`${e}_${a}`)),l=a.filter((e=>{var a;return null==(a=ee.value[e])?void 0:a.enabled})).length;return l>0&&l<a.length},ge=t((()=>{const e=Object.values(ee.value);return 0!==e.length&&e.every((e=>null==e?void 0:e.enabled))})),_e=t((()=>{const e=Object.values(ee.value);if(0===e.length)return!1;const a=e.filter((e=>null==e?void 0:e.enabled)).length;return a>0&&a<e.length})),Te=e=>{Object.keys(ee.value).forEach((a=>{ee.value[a]&&(ee.value[a].enabled=e.target.checked)}))},Ne=async()=>{try{await ue.value.validate(),T.success(V("message.saveSuccess")),ie.value=!1}catch(e){}},Ce=()=>{var e;null==(e=ue.value)||e.resetFields(),ie.value=!1},ke=e=>{ve.current=e.current,ve.pageSize=e.pageSize,Ee()},Ee=async()=>{te.value=!0;try{le.value=k.merchantList,te.value=!1}catch(e){T.error(V("message.fetchError")),te.value=!1}};return i((()=>{Ee()})),(e,a)=>{const l=o("a-input"),t=o("a-form-item"),i=o("a-select-option"),b=o("a-select"),U=o("a-button"),g=o("a-form"),_=o("a-card"),T=o("a-space"),k=o("a-table"),E=o("a-input-group"),Ee=o("a-input-number"),Me=o("a-tab-pane"),xe=o("a-tabs"),Le=o("a-modal"),Ae=o("a-checkbox");return r(),d("div",M,[u(_,{title:n(V)("title.queryCondition"),bordered:!1,class:"filter-card"},{default:s((()=>[u(g,{layout:"inline",model:ae,class:"query-form"},{default:s((()=>[u(t,{label:n(V)("field.name"),class:"form-item"},{default:s((()=>[u(l,{value:ae.name,"onUpdate:value":a[0]||(a[0]=e=>ae.name=e),placeholder:n(V)("prompt.inputName"),"allow-clear":"",style:{width:"200px"}},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.status"),class:"form-item"},{default:s((()=>[u(b,{value:ae.status,"onUpdate:value":a[1]||(a[1]=e=>ae.status=e),placeholder:n(V)("prompt.selectStatus"),style:{width:"200px"},"allow-clear":""},{default:s((()=>[u(i,{value:"active"},{default:s((()=>[c(p(n(V)("status.active")),1)])),_:1}),u(i,{value:"inactive"},{default:s((()=>[c(p(n(V)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{class:"form-item"},{default:s((()=>[u(U,{type:"primary",onClick:fe},{icon:s((()=>[u(n(N))])),default:s((()=>[c(" "+p(n(V)("action.search")),1)])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title"]),u(_,{title:n(V)("title.merchantManagement"),bordered:!1,class:"table-card"},{extra:s((()=>[u(U,{type:"primary",onClick:he},{icon:s((()=>[u(n(C))])),default:s((()=>[c(" "+p(n(V)("action.add")),1)])),_:1})])),default:s((()=>[v("div",x,[u(k,{columns:Q,"data-source":le.value,loading:te.value,rowKey:"id",pagination:ve,bordered:!0,onChange:ke},{bodyCell:s((({column:e,record:a})=>["action"===e.key?(r(),m(T,{key:0},{default:s((()=>[u(U,{type:"link",onClick:e=>(e=>{de.value=V("title.editMerchant"),Object.assign(ce,{...e,depositStatus:e.depositStatus??!0,withdrawStatus:e.withdrawStatus??!0,swapStatus:e.swapStatus??!0,lpStatus:e.lpStatus??!0,depositNotifyUrl:e.depositNotifyUrl??"",withdrawNotifyUrl:e.withdrawNotifyUrl??"",swapNotifyUrl:e.swapNotifyUrl??"",lpNotifyUrl:e.lpNotifyUrl??"",swapSlippage:e.swapSlippage??.5,lpSlippage:e.lpSlippage??.5,txHashNotifyUrl:e.txHashNotifyUrl??"",availableCurrencies:e.availableCurrencies??["BSC_USDT","ETH_USDT","TRX_USDT"]}),ie.value=!0,se.value=1})(a)},{default:s((()=>[c(p(n(V)("action.edit")),1)])),_:2},1032,["onClick"]),u(U,{type:"link",onClick:e=>(e=>{oe.value=V("title.currencyManagement")+` - ${e.name}`,re.value=e.id;const a={};Object.entries(J).forEach((([e,l])=>{l.forEach((l=>{a[`${e}_${l}`]={enabled:Math.random()>.3,collectionWalletLimit:Math.floor(1e4*Math.random())+1e3,withdrawWalletLimit:Math.floor(5e3*Math.random())+500}}))})),ee.value=a,ne.value=!0})(a)},{default:s((()=>[c(p(n(V)("action.currencyManagement")),1)])),_:2},1032,["onClick"])])),_:2},1024)):"status"===e.key?(r(),d("span",{key:1,class:h(["status-tag","active"===a.status?"status-enabled":"status-disabled"])},p(n(V)(`status.${a.status}`)),3)):f("",!0)])),_:1},8,["data-source","loading","pagination"])])])),_:1},8,["title"]),u(Le,{open:ie.value,"onUpdate:open":a[19]||(a[19]=e=>ie.value=e),title:de.value,onOk:Ne,onCancel:Ce,width:"800px"},{default:s((()=>[u(xe,{activeKey:se.value,"onUpdate:activeKey":a[18]||(a[18]=e=>se.value=e)},{default:s((()=>[(r(),m(Me,{key:1,tab:n(V)("title.merchantInfo")},{default:s((()=>[u(g,{ref_key:"formRef",ref:ue,model:ce,rules:pe,"label-col":{span:6},"wrapper-col":{span:16}},{default:s((()=>[u(t,{label:n(V)("field.name"),name:"name"},{default:s((()=>[u(l,{value:ce.name,"onUpdate:value":a[2]||(a[2]=e=>ce.name=e),placeholder:n(V)("prompt.inputName")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.code"),name:"code"},{default:s((()=>[u(l,{value:ce.code,"onUpdate:value":a[3]||(a[3]=e=>ce.code=e),placeholder:n(V)("prompt.inputCode")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.status"),name:"status"},{default:s((()=>[u(b,{value:ce.status,"onUpdate:value":a[4]||(a[4]=e=>ce.status=e),placeholder:n(V)("prompt.selectStatus")},{default:s((()=>[u(i,{value:"active"},{default:s((()=>[c(p(n(V)("status.active")),1)])),_:1}),u(i,{value:"inactive"},{default:s((()=>[c(p(n(V)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.privateKey"),name:"privateKey"},{default:s((()=>[u(E,{compact:""},{default:s((()=>[u(l,{value:ce.privateKey,"onUpdate:value":a[5]||(a[5]=e=>ce.privateKey=e),placeholder:n(V)("field.privateKey"),style:{width:"calc(100% - 110px)"},readonly:""},null,8,["value","placeholder"]),u(U,{type:"primary",onClick:me},{default:s((()=>[c(p(n(V)("action.generateKey")),1)])),_:1})])),_:1})])),_:1},8,["label"]),u(t,{label:n(V)("field.retryCount"),name:"retryCount"},{default:s((()=>[u(Ee,{value:ce.retryCount,"onUpdate:value":a[6]||(a[6]=e=>ce.retryCount=e),min:0,max:10,style:{width:"100%"}},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["tab"])),(r(),m(Me,{key:2,tab:n(V)("title.merchantPermission")},{default:s((()=>[u(g,{model:ce,"label-col":{span:6},"wrapper-col":{span:16}},{default:s((()=>[u(t,{label:n(V)("field.depositStatus"),name:"depositStatus"},{default:s((()=>[u(b,{value:ce.depositStatus,"onUpdate:value":a[7]||(a[7]=e=>ce.depositStatus=e),placeholder:n(V)("prompt.selectStatus")},{default:s((()=>[u(i,{value:!0},{default:s((()=>[c(p(n(V)("status.active")),1)])),_:1}),u(i,{value:!1},{default:s((()=>[c(p(n(V)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.depositNotifyUrl"),name:"depositNotifyUrl"},{default:s((()=>[u(l,{value:ce.depositNotifyUrl,"onUpdate:value":a[8]||(a[8]=e=>ce.depositNotifyUrl=e),placeholder:n(V)("prompt.inputDepositNotifyUrl")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.withdrawStatus"),name:"withdrawStatus"},{default:s((()=>[u(b,{value:ce.withdrawStatus,"onUpdate:value":a[9]||(a[9]=e=>ce.withdrawStatus=e),placeholder:n(V)("prompt.selectStatus")},{default:s((()=>[u(i,{value:!0},{default:s((()=>[c(p(n(V)("status.active")),1)])),_:1}),u(i,{value:!1},{default:s((()=>[c(p(n(V)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.withdrawNotifyUrl"),name:"withdrawNotifyUrl"},{default:s((()=>[u(l,{value:ce.withdrawNotifyUrl,"onUpdate:value":a[10]||(a[10]=e=>ce.withdrawNotifyUrl=e),placeholder:n(V)("prompt.inputWithdrawNotifyUrl")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.swapStatus"),name:"swapStatus"},{default:s((()=>[u(b,{value:ce.swapStatus,"onUpdate:value":a[11]||(a[11]=e=>ce.swapStatus=e),placeholder:n(V)("prompt.selectStatus")},{default:s((()=>[u(i,{value:!0},{default:s((()=>[c(p(n(V)("status.active")),1)])),_:1}),u(i,{value:!1},{default:s((()=>[c(p(n(V)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.swapNotifyUrl"),name:"swapNotifyUrl"},{default:s((()=>[u(l,{value:ce.swapNotifyUrl,"onUpdate:value":a[12]||(a[12]=e=>ce.swapNotifyUrl=e),placeholder:n(V)("prompt.inputSwapNotifyUrl")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.swapSlippage"),name:"swapSlippage"},{default:s((()=>[u(Ee,{value:ce.swapSlippage,"onUpdate:value":a[13]||(a[13]=e=>ce.swapSlippage=e),min:0,max:100,step:.1,precision:1,style:{width:"100%"},placeholder:n(V)("prompt.inputSwapSlippage"),"addon-after":"%"},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.lpStatus"),name:"lpStatus"},{default:s((()=>[u(b,{value:ce.lpStatus,"onUpdate:value":a[14]||(a[14]=e=>ce.lpStatus=e),placeholder:n(V)("prompt.selectStatus")},{default:s((()=>[u(i,{value:!0},{default:s((()=>[c(p(n(V)("status.active")),1)])),_:1}),u(i,{value:!1},{default:s((()=>[c(p(n(V)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.lpNotifyUrl"),name:"lpNotifyUrl"},{default:s((()=>[u(l,{value:ce.lpNotifyUrl,"onUpdate:value":a[15]||(a[15]=e=>ce.lpNotifyUrl=e),placeholder:n(V)("prompt.inputLpNotifyUrl")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.lpSlippage"),name:"lpSlippage"},{default:s((()=>[u(Ee,{value:ce.lpSlippage,"onUpdate:value":a[16]||(a[16]=e=>ce.lpSlippage=e),min:0,max:100,step:.1,precision:1,style:{width:"100%"},placeholder:n(V)("prompt.inputLpSlippage"),"addon-after":"%"},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:n(V)("field.txHashNotifyUrl"),name:"txHashNotifyUrl"},{default:s((()=>[u(l,{value:ce.txHashNotifyUrl,"onUpdate:value":a[17]||(a[17]=e=>ce.txHashNotifyUrl=e),placeholder:n(V)("prompt.inputTxHashNotifyUrl")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["tab"]))])),_:1},8,["activeKey"])])),_:1},8,["open","title"]),u(Le,{open:ne.value,"onUpdate:open":a[20]||(a[20]=e=>ne.value=e),title:oe.value,onOk:ye,onCancel:Se,width:"1000px",bodyStyle:{maxHeight:"700px",overflow:"auto"}},{default:s((()=>{return[v("div",L,[v("div",A,[v("div",D,[u(Ae,{checked:ge.value,indeterminate:_e.value,onChange:Te},{default:s((()=>[c(p(n(V)("action.selectAll")),1)])),_:1},8,["checked","indeterminate"])]),v("div",O,[v("div",H,[(r(),d(y,null,S(Z,(e=>v("div",{key:e,class:h(["chain-type-item",{active:Y.value===e}]),onClick:a=>(e=>{Y.value=e})(e)},[v("span",K,p(e),1),u(Ae,{checked:be(e),indeterminate:Ue(e),onClick:w((a=>((e,a)=>{J[a].map((e=>`${a}_${e}`)).forEach((a=>{ee.value[a]&&(ee.value[a].enabled=e.target.checked)}))})(a,e)),["stop"])},null,8,["checked","indeterminate","onClick"])],10,B))),64))]),v("div",R,[v("div",W,p(Y.value)+" "+p(n(V)("field.currencies")),1),v("div",I,[v("div",$,[(r(!0),d(y,null,S((e=Y.value,J[e].map((a=>({label:a,value:`${e}_${a}`})))),(e=>{var a,l,t,i;return r(),d("div",{key:e.value,class:"currency-config-item"},[v("div",j,[u(Ae,{checked:(null==(a=ee.value[e.value])?void 0:a.enabled)||!1,onChange:a=>{return l=e.value,t=a.target.checked,void(ee.value[l]&&(ee.value[l].enabled=t));var l,t}},{default:s((()=>[c(p(e.label),1)])),_:2},1032,["checked","onChange"])]),(null==(l=ee.value[e.value])?void 0:l.enabled)?(r(),d("div",q,[v("div",X,[v("div",z,[v("label",P,p(n(V)("field.collectionWalletLimit")),1),u(Ee,{value:(null==(t=ee.value[e.value])?void 0:t.collectionWalletLimit)||0,"onUpdate:value":a=>we(e.value,"collectionWalletLimit",a),min:0,precision:4,size:"small",placeholder:n(V)("prompt.inputCollectionWalletLimit"),style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])]),v("div",F,[v("label",G,p(n(V)("field.withdrawWalletLimit")),1),u(Ee,{value:(null==(i=ee.value[e.value])?void 0:i.withdrawWalletLimit)||0,"onUpdate:value":a=>we(e.value,"withdrawWalletLimit",a),min:0,precision:4,size:"small",placeholder:n(V)("prompt.inputWithdrawWalletLimit"),style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])])])])):f("",!0)])})),128))])])])])])])];var e})),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-2f87bc36"]]);export{V as default};
