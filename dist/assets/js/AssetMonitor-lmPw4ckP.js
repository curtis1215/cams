import{v as e,j as n,Y as t}from"./vendor-BhfxMwoc.js";import{R as r,E as s}from"./ant-design-BRHeEO20.js";import{d as i,f as a,c as d,w as c,o as l,a0 as o,k as f,Y as u,X as g,u as p,Z as m,_ as h,a1 as H,G as D,a4 as v,F as y,a2 as T,W as A,$ as k,n as x}from"./vue-vendor-B-98Oggh.js";import{_ as j}from"./index-CkWAryqU.js";import"./lodash-CiXSdKEp.js";const w=[{id:"usdt-001",currency:"USDT",chainHoldings:{ETH:1250000.12345678,BSC:875000.5,TRON:2100000.75,POLYGON:45e4},userHoldings:3930000.87345678,projectHoldings:744800.25,reserveAmount:5e3,assetDifference:-4774.75,netAssetDifference:225.25,difference:225.25,differenceUsdt:225.25,trendData:[467e4,4671e3,4672500,4673e3,4674e3,4675500,4676e3,4675e3,4674500,4673500,4674e3,4675001],updateTime:"2025-10-24T10:30:00Z"},{id:"btc-002",currency:"BTC",chainHoldings:{ETH:125.456789,BSC:87.654321},userHoldings:170.42345678,projectHoldings:42.55,reserveAmount:1,assetDifference:-.86234478,netAssetDifference:.13765522,difference:.13765522,differenceUsdt:13765.52,trendData:[210,211,212,213,212.5,212,211.5,212,212.8,213,213.2,213.11],updateTime:"2025-10-24T10:30:00Z"},{id:"eth-003",currency:"ETH",chainHoldings:{ETH:5420.87654321,BSC:3200.25,POLYGON:1850.12345678},userHoldings:9071.25,projectHoldings:1400,reserveAmount:2,assetDifference:-2,netAssetDifference:0,difference:0,differenceUsdt:0,trendData:[10450,10455,10460,10465,10470,10472,10471,10470,10471,10470.5,10471,10471.25],updateTime:"2025-10-24T10:30:00Z"},{id:"bnb-004",currency:"BNB",chainHoldings:{BSC:8500.5,ETH:3250.75},userHoldings:10000.75,projectHoldings:1750,reserveAmount:1.5,assetDifference:-1,netAssetDifference:.5,difference:.5,differenceUsdt:300,trendData:[11740,11742,11745,11748,11750,11751,11752,11751.5,11751,11751.2,11751.1,11751.25],updateTime:"2025-10-24T10:30:00Z"},{id:"trx-005",currency:"TRX",chainHoldings:{TRON:15e6},userHoldings:125e5,projectHoldings:25e5,reserveAmount:5e4,assetDifference:-5e4,netAssetDifference:0,difference:0,differenceUsdt:0,trendData:[1499e4,14992e3,14995e3,14997e3,14999e3,15e6,15001e3,15000500,15000200,15000100,15000050,15e6],updateTime:"2025-10-24T10:30:00Z"},{id:"matic-006",currency:"MATIC",chainHoldings:{POLYGON:2500000.5,ETH:1200000.75},userHoldings:3100000.75,projectHoldings:6e5,reserveAmount:2e4,assetDifference:-19999.5,netAssetDifference:.5,difference:.5,differenceUsdt:.4,trendData:[3695e3,3696e3,3697500,3698500,3699500,37e5,3700500,3700200,3700100,3700050,37e5,3700001],updateTime:"2025-10-24T10:30:00Z"},{id:"usdc-007",currency:"USDC",chainHoldings:{ETH:95e4,BSC:625000.5,POLYGON:380000.25},userHoldings:1650000.5,projectHoldings:305e3,reserveAmount:3e3,assetDifference:-2999.75,netAssetDifference:.25,difference:.25,differenceUsdt:.25,trendData:[1954800,1954900,1955e3,1955100,1955000.5,1955000.6,1955000.7,1955000.75,1955000.8,1955000.75,1955000.75,1955000.75],updateTime:"2025-10-24T10:30:00Z"},{id:"dai-008",currency:"DAI",chainHoldings:{ETH:725000.75,BSC:45e4},userHoldings:1005000.5,projectHoldings:17e4,reserveAmount:2500,assetDifference:-2499.75,netAssetDifference:.25,difference:.25,differenceUsdt:.25,trendData:[1174900,1174950,1175e3,1175000.5,1175000.6,1175000.7,1175000.75,1175000.75,1175000.75,1175000.75,1175000.75,1175000.75],updateTime:"2025-10-24T10:30:00Z"},{id:"sol-009",currency:"SOL",chainHoldings:{ETH:8500.12345678},userHoldings:7200,projectHoldings:1300,reserveAmount:5,assetDifference:-4.87654322,netAssetDifference:.12345678,difference:.12345678,differenceUsdt:18.52,trendData:[8495,8496,8497,8498,8499,8500,8500.5,8500.3,8500.2,8500.15,8500.13,8500.12],updateTime:"2025-10-24T10:30:00Z"},{id:"avax-010",currency:"AVAX",chainHoldings:{ETH:12000.5},userHoldings:10200.25,projectHoldings:1800,reserveAmount:3,assetDifference:-2.75,netAssetDifference:.25,difference:.25,differenceUsdt:9,trendData:[11998,11999,12e3,12000.2,12000.3,12000.4,12000.5,12000.5,12000.5,12000.5,12000.5,12000.5],updateTime:"2025-10-24T10:30:00Z"},{id:"link-011",currency:"LINK",chainHoldings:{ETH:45000.75,BSC:28000.25},userHoldings:62500.5,projectHoldings:10500,reserveAmount:100,assetDifference:-99.5,netAssetDifference:.5,difference:.5,differenceUsdt:7.5,trendData:[72995,72997,72999,73e3,73000.5,73001,73001,73001,73001,73001,73001,73001],updateTime:"2025-10-24T10:30:00Z"},{id:"uni-012",currency:"UNI",chainHoldings:{ETH:32e3},userHoldings:27500,projectHoldings:4500,reserveAmount:50,assetDifference:-50,netAssetDifference:0,difference:0,differenceUsdt:0,trendData:[31995,31996,31997,31998,31999,32e3,32e3,32e3,32e3,32e3,32e3,32e3],updateTime:"2025-10-24T10:30:00Z"},{id:"dot-013",currency:"DOT",chainHoldings:{ETH:65000.5},userHoldings:55500.25,projectHoldings:9500,reserveAmount:200,assetDifference:-199.75,netAssetDifference:.25,difference:.25,differenceUsdt:1.5,trendData:[64998,64999,65e3,65000.2,65000.3,65000.4,65000.5,65000.5,65000.5,65000.5,65000.5,65000.5],updateTime:"2025-10-24T10:30:00Z"},{id:"ada-014",currency:"ADA",chainHoldings:{ETH:850000.75},userHoldings:725000.5,projectHoldings:125e3,reserveAmount:1e3,assetDifference:-999.75,netAssetDifference:.25,difference:.25,differenceUsdt:.15,trendData:[849998,849999,85e4,850000.3,850000.5,850000.6,850000.7,850000.75,850000.75,850000.75,850000.75,850000.75],updateTime:"2025-10-24T10:30:00Z"},{id:"xrp-015",currency:"XRP",chainHoldings:{ETH:12e5},userHoldings:105e4,projectHoldings:150500,reserveAmount:2e3,assetDifference:-2500,netAssetDifference:-500,difference:-500,differenceUsdt:-300,trendData:[1200500,1200400,1200300,1200200,1200100,1200050,1200020,1200010,1200005,1200002,1200001,12e5],updateTime:"2025-10-24T10:30:00Z"},{id:"shib-016",currency:"SHIB",chainHoldings:{ETH:5e10},userHoldings:425e8,projectHoldings:75e8,reserveAmount:1e9,assetDifference:-1e9,netAssetDifference:0,difference:0,differenceUsdt:0,trendData:[4999e7,49992e6,49995e6,49997e6,49999e6,5e10,5e10,5e10,5e10,5e10,5e10,5e10],updateTime:"2025-10-24T10:30:00Z"},{id:"doge-017",currency:"DOGE",chainHoldings:{ETH:15000000.5,BSC:95e5},userHoldings:20900000.25,projectHoldings:36e5,reserveAmount:1e5,assetDifference:-99999.75,netAssetDifference:.25,difference:.25,differenceUsdt:.05,trendData:[24499998,24499999,245e5,24500000.2,24500000.3,24500000.4,24500000.5,24500000.5,24500000.5,24500000.5,24500000.5,24500000.5],updateTime:"2025-10-24T10:30:00Z"}],U={title:{assetMonitor:"資產監控"},field:{currency:"幣種",chainHoldings:"錢包持有量",userHoldings:"平台用戶持有量",projectHoldings:"平台項目方持有量",difference:"資產差額",assetDifference:"資產差額",netAssetDifference:"淨資產差額",reserveAmount:"保留額度",differenceAmount:"扣減後差額",trend:"走勢",updateTime:"更新時間"},action:{refresh:"重新整理",search:"搜尋",filter:"篩選",export:"匯出"},filter:{allChains:"全部鏈路",selectChain:"選擇鏈路",searchPlaceholder:"請輸入幣種名稱"},message:{noData:"暫無數據",refreshSuccess:"數據已更新",lastUpdate:"最後更新時間"},status:{normal:"正常",warning:"警告",error:"異常"}},S={title:{assetMonitor:"Asset Monitor"},field:{currency:"Currency",chainHoldings:"Wallet Holdings",userHoldings:"User Holdings",projectHoldings:"Project Holdings",difference:"Difference",assetDifference:"Asset Difference",netAssetDifference:"Net Asset Difference",reserveAmount:"Reserve Amount",differenceAmount:"Difference After Deduction",trend:"Trend",updateTime:"Update Time"},action:{refresh:"Refresh",search:"Search",filter:"Filter",export:"Export"},filter:{allChains:"All Chains",selectChain:"Select Chain",searchPlaceholder:"Enter currency name"},message:{noData:"No data available",refreshSuccess:"Data updated",lastUpdate:"Last update"},status:{normal:"Normal",warning:"Warning",error:"Error"}},b={class:"asset-monitor"},C={class:"card-header"},E={class:"card-title"},O={class:"header-actions"},I={key:0,class:"currency-cell"},Z={key:1,class:"chain-holdings-cell"},N={class:"chain-total"},B={class:"chain-tags"},L={key:2,class:"number-cell"},M={key:3,class:"number-cell"},_={key:4,class:"asset-difference-cell"},P={class:"reserve-amount"},R={class:"usdt-value"},Y=["onClick"],$={width:"120",height:"40",viewBox:"0 0 120 40"},F=["points"],G={key:7,class:"time-cell"},z={key:0,class:"trend-chart-container"},X=j(i({__name:"AssetMonitor",setup(i){const{t:j,locale:X}=e({messages:{zh:U,en:S}}),W=a([]),V=a(!1),J=a(""),K=a(""),Q=a("Fameex"),q=d((()=>[{label:"Fameex",value:"Fameex"},{label:"Topone",value:"Topone"}])),ee=d((()=>[{title:j("field.currency"),dataIndex:"currency",key:"currency",width:100,fixed:"left"},{title:j("field.chainHoldings"),dataIndex:"chainHoldings",key:"chainHoldings",width:300,align:"left"},{title:j("field.userHoldings"),dataIndex:"userHoldings",key:"userHoldings",width:180,align:"right"},{title:j("field.projectHoldings"),dataIndex:"projectHoldings",key:"projectHoldings",width:180,align:"right"},{title:j("field.assetDifference"),dataIndex:"assetDifference",key:"assetDifference",width:180,align:"right",sorter:(e,n)=>e.assetDifference-n.assetDifference},{title:j("field.netAssetDifference"),dataIndex:"netAssetDifference",key:"netAssetDifference",width:150,align:"right",sorter:(e,n)=>e.netAssetDifference-n.netAssetDifference},{title:j("field.trend"),dataIndex:"trendData",key:"trend",width:150,align:"center"},{title:j("field.updateTime"),dataIndex:"updateTime",key:"updateTime",width:180}])),ne=d((()=>{let e=[...W.value];if(K.value){const n=K.value.toLowerCase();e=e.filter((e=>e.currency.toLowerCase().includes(n)))}return e})),te=async()=>{V.value=!0,await new Promise((e=>setTimeout(e,800))),W.value=[...w],J.value=(new Date).toISOString(),V.value=!1},re=()=>{},se=e=>{const n=Object.values(e).reduce(((e,n)=>e+n),0);return`總計: ${ae(n)}`},ie=e=>({ETH:"geekblue",BSC:"gold",TRON:"red",POLYGON:"purple",SOLANA:"cyan",AVALANCHE:"orange",ARBITRUM:"blue",OPTIMISM:"magenta"}[e]||"cyan"),ae=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:8}).format(e),de=e=>e>0?"difference-positive":e<0?"difference-negative":"difference-zero",ce=e=>{if(!e||0===e.length)return"";const n=Math.min(...e),t=Math.max(...e)-n||1;return e.map(((r,s)=>`${s/(e.length-1)*110+5},${35-(r-n)/t*30}`)).join(" ")},le=a(!1),oe=a(null),fe=a(null);let ue=null;return c(le,(async e=>{e&&oe.value&&(await x(),(()=>{if(!fe.value||!oe.value)return;ue&&ue.dispose(),ue=t(fe.value);const e=oe.value.trendData,n={tooltip:{trigger:"axis",formatter:e=>{const n=e[0].value;return`${j("field.trend")}: ${ae(n)}`}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:e.map(((e,n)=>`${n+1}`)),boundaryGap:!1},yAxis:{type:"value",axisLabel:{formatter:e=>ae(e)}},series:[{name:oe.value.currency,type:"line",data:e,smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:2},areaStyle:{opacity:.1}}]};ue.setOption(n)})())})),l((()=>{W.value=w,J.value=(new Date).toISOString()})),(e,t)=>{var i;const a=g("a-select"),d=g("a-input-search"),c=g("a-button"),l=g("a-card"),x=g("a-tag"),w=g("a-table"),U=g("a-modal");return m(),o("div",b,[f(l,{bordered:!1,class:"header-card"},{title:u((()=>[h("div",C,[h("span",E,H(p(j)("title.assetMonitor")),1),h("div",O,[f(a,{value:Q.value,"onUpdate:value":t[0]||(t[0]=e=>Q.value=e),style:{width:"150px","margin-right":"12px"},options:q.value},null,8,["value","options"]),f(d,{value:K.value,"onUpdate:value":t[1]||(t[1]=e=>K.value=e),placeholder:p(j)("filter.searchPlaceholder"),style:{width:"200px","margin-right":"12px"},onSearch:re,"allow-clear":""},null,8,["value","placeholder"]),f(c,{type:"primary",onClick:te,loading:V.value},{icon:u((()=>[f(p(r))])),default:u((()=>[D(" "+H(p(j)("action.refresh")),1)])),_:1},8,["loading"])])])])),_:1}),f(l,{bordered:!1,class:"table-card",style:{"margin-top":"16px"}},{default:u((()=>[f(w,{columns:ee.value,"data-source":ne.value,pagination:{total:ne.value.length,pageSize:20,showSizeChanger:!1,showQuickJumper:!0,showTotal:e=>`共 ${e} 筆`},loading:V.value,bordered:!0,scroll:{x:1400},"row-key":"id"},{bodyCell:u((({column:e,record:t})=>{return["currency"===e.key?(m(),o("span",I,H(t.currency),1)):v("",!0),"chainHoldings"===e.key?(m(),o("div",Z,[h("div",N,H(se(t.chainHoldings)),1),h("div",B,[(m(!0),o(y,null,T(Object.entries(t.chainHoldings),(([e,n])=>(m(),A(x,{key:e,color:ie(e)},{default:u((()=>[D(H(e)+": "+H(ae(n)),1)])),_:2},1032,["color"])))),128))])])):v("",!0),"userHoldings"===e.key?(m(),o("span",L,H(ae(t.userHoldings)),1)):v("",!0),"projectHoldings"===e.key?(m(),o("span",M,H(ae(t.projectHoldings)),1)):v("",!0),"assetDifference"===e.key?(m(),o("div",_,[h("div",P,H(p(j)("field.reserveAmount"))+": "+H(ae(t.reserveAmount)),1),h("div",{class:k(de(t.assetDifference))},[D(H(p(j)("field.differenceAmount"))+": "+H(ae(t.assetDifference))+" ",1),t.assetDifference<0?(m(),A(p(s),{key:0,style:{"margin-left":"4px"}})):v("",!0)],2)])):v("",!0),"netAssetDifference"===e.key?(m(),o("div",{key:5,class:k(de(t.netAssetDifference))},[h("div",null,H(ae(t.netAssetDifference)),1),h("div",R,"("+H(ae(t.differenceUsdt))+" U)",1),t.netAssetDifference<0?(m(),A(p(s),{key:0,style:{"margin-left":"4px"}})):v("",!0)],2)):v("",!0),"trend"===e.key?(m(),o("div",{key:6,class:"trend-sparkline",onClick:e=>(e=>{oe.value=e,le.value=!0})(t)},[(m(),o("svg",$,[h("polyline",{points:ce(t.trendData),fill:"none",stroke:"#1890ff","stroke-width":"2"},null,8,F)]))],8,Y)):v("",!0),"updateTime"===e.key?(m(),o("span",G,H((r=t.updateTime,n(r).format("YYYY-MM-DD HH:mm:ss"))),1)):v("",!0)];var r})),_:1},8,["columns","data-source","pagination","loading"])])),_:1}),f(U,{open:le.value,"onUpdate:open":t[2]||(t[2]=e=>le.value=e),title:`${null==(i=oe.value)?void 0:i.currency} ${p(j)("field.trend")}`,width:"800px",footer:null},{default:u((()=>[le.value?(m(),o("div",z,[h("div",{ref_key:"chartRef",ref:fe,style:{width:"100%",height:"400px"}},null,512)])):v("",!0)])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-db7dbad3"]]);export{X as default};
