import{d as e,f as a,r as l,c as t,o as i,a0 as d,k as u,Y as n,u as o,X as s,Z as r,G as c,a1 as p,_ as v,W as m,a4 as f,$ as h,F as y,a2 as S,B as w}from"./vue-vendor-B-98Oggh.js";import{v as b}from"./vendor-BhfxMwoc.js";import{d as g,f as U,_}from"./index-BCb4CLWl.js";import{b as T,d as C,P as N}from"./ant-design-DorZdoiW.js";import"./lodash-CiXSdKEp.js";const k={merchantList:[{id:"M001",name:"測試商戶1",code:"TEST001",status:"active",updateTime:"2024-01-22 10:30:45"},{id:"M002",name:"測試商戶2",code:"TEST002",status:"inactive",updateTime:"2024-01-22 09:15:30"},{id:"M003",name:"測試商戶3",code:"TEST003",status:"active",updateTime:"2024-01-21 16:45:20"},{id:"M004",name:"測試商戶4",code:"TEST004",status:"active",updateTime:"2024-01-21 14:20:10"},{id:"M005",name:"測試商戶5",code:"TEST005",status:"inactive",updateTime:"2024-01-20 17:55:40"},{id:"M006",name:"測試商戶6",code:"TEST006",status:"active",updateTime:"2024-01-20 11:30:25"},{id:"M007",name:"測試商戶7",code:"TEST007",status:"active",updateTime:"2024-01-19 15:40:35"},{id:"M008",name:"測試商戶8",code:"TEST008",status:"inactive",updateTime:"2024-01-19 09:25:15"},{id:"M009",name:"測試商戶9",code:"TEST009",status:"active",updateTime:"2024-01-18 16:50:30"},{id:"M010",name:"測試商戶10",code:"TEST010",status:"active",updateTime:"2024-01-18 13:15:50"}]},M=[{code:"BTC",name:"Bitcoin"},{code:"ETH",name:"Ethereum"},{code:"USDT",name:"Tether"},{code:"BNB",name:"Binance Coin"},{code:"SOL",name:"Solana"},{code:"XRP",name:"Ripple"},{code:"ADA",name:"Cardano"},{code:"DOGE",name:"Dogecoin"},{code:"AVAX",name:"Avalanche"},{code:"DOT",name:"Polkadot"},{code:"MATIC",name:"Polygon"},{code:"UNI",name:"Uniswap"},{code:"LTC",name:"Litecoin"},{code:"LINK",name:"Chainlink"},{code:"ATOM",name:"Cosmos"},{code:"XLM",name:"Stellar"},{code:"NEAR",name:"NEAR Protocol"},{code:"ALGO",name:"Algorand"},{code:"FTM",name:"Fantom"},{code:"VET",name:"VeChain"},{code:"HBAR",name:"Hedera"},{code:"FIL",name:"Filecoin"},{code:"EOS",name:"EOS"},{code:"XTZ",name:"Tezos"},{code:"AAVE",name:"Aave"},{code:"EGLD",name:"MultiversX"},{code:"XMR",name:"Monero"},{code:"CAKE",name:"PancakeSwap"},{code:"NEO",name:"NEO"},{code:"QTUM",name:"Qtum"}],E={class:"merchants-container"},L={class:"table-container"},x={class:"currency-management-container"},A={class:"currency-grid"},D={class:"select-all-wrapper"},O={class:"currency-columns"},H={class:"chain-type-list"},W=["onClick"],B={class:"chain-type-name"},K={class:"currency-list"},R={class:"currency-list-header"},I={class:"currency-list-content"},$={class:"currency-config-list"},j={class:"currency-header"},q={key:0,class:"currency-settings"},X={class:"storage-limit-config"},z={key:0,class:"setting-row-inline"},P={class:"setting-field"},F={class:"setting-label"},G={class:"setting-field"},V={class:"setting-label"},Q=_(e({__name:"Merchants",setup(e){const _={zh:U,en:g},{t:Q}=b({messages:_,legacy:!1}),Z=[{title:Q("field.name"),dataIndex:"name",key:"name"},{title:Q("field.code"),dataIndex:"code",key:"code"},{title:Q("field.status"),dataIndex:"status",key:"status"},{title:Q("field.updateTime"),dataIndex:"updateTime",key:"updateTime"},{title:Q("field.action"),key:"action",fixed:"right",width:200}],J=["BSC","ETH","TRX","BTC"],Y={BSC:["USDT","USDC","BUSD","DAI"],ETH:["USDT","USDC","DAI"],TRX:["USDT","USDC"],BTC:["BTC"]},ee=a(J[0]),ae=a({}),le=l({name:"",status:void 0}),te=a(k.merchantList),ie=a(!1),de=a(!1),ue=a(""),ne=a(),oe=a(1);a(M);const se=a(!1),re=a(""),ce=a(""),pe=l({id:"",name:"",code:"",status:"active",updateTime:"",retryCount:3,depositStatus:!0,withdrawStatus:!0,swapStatus:!0,lpStatus:!0,depositNotifyUrl:"",withdrawNotifyUrl:"",swapNotifyUrl:"",lpNotifyUrl:"",swapSlippage:.5,lpSlippage:.5,txHashNotifyUrl:"",availableCurrencies:[]}),ve={name:[{required:!0,message:Q("validation.nameRequired")}],code:[{required:!0,message:Q("validation.codeRequired")}],status:[{required:!0,message:Q("validation.statusRequired")}],retryCount:[{required:!0,message:Q("validation.retryCountRequired")}]},me=l({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0}),fe=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let l=0;l<32;l++)a+=e.charAt(Math.floor(62*Math.random()));pe.privateKey=a,T.success(Q("message.generateKeySuccess"))},he=()=>{const e=k.merchantList.filter((e=>!(le.name&&!e.name.includes(le.name))&&(!le.status||e.status===le.status)));te.value=e},ye=()=>{ue.value=Q("title.addMerchant"),Object.assign(pe,{id:"",name:"",code:"",status:"active",updateTime:"",retryCount:3,depositStatus:!0,withdrawStatus:!0,swapStatus:!0,lpStatus:!0,depositNotifyUrl:"",withdrawNotifyUrl:"",swapNotifyUrl:"",lpNotifyUrl:"",swapSlippage:.5,lpSlippage:.5,txHashNotifyUrl:"",availableCurrencies:[]}),de.value=!0,oe.value=1},Se=()=>{T.success(Q("message.currencyConfigSaved")),se.value=!1},we=()=>{se.value=!1},be=(e,a,l)=>{ae.value[e]&&(ae.value[e][a]=l)},ge=e=>Y[e].map((a=>`${e}_${a}`)).every((e=>{var a;return null==(a=ae.value[e])?void 0:a.enabled})),Ue=e=>{const a=Y[e].map((a=>`${e}_${a}`)),l=a.filter((e=>{var a;return null==(a=ae.value[e])?void 0:a.enabled})).length;return l>0&&l<a.length},_e=t((()=>{const e=Object.values(ae.value);return 0!==e.length&&e.every((e=>null==e?void 0:e.enabled))})),Te=t((()=>{const e=Object.values(ae.value);if(0===e.length)return!1;const a=e.filter((e=>null==e?void 0:e.enabled)).length;return a>0&&a<e.length})),Ce=e=>{Object.keys(ae.value).forEach((a=>{ae.value[a]&&(ae.value[a].enabled=e.target.checked)}))},Ne=async()=>{try{await ne.value.validate(),T.success(Q("message.saveSuccess")),de.value=!1}catch(e){}},ke=()=>{var e;null==(e=ne.value)||e.resetFields(),de.value=!1},Me=e=>{me.current=e.current,me.pageSize=e.pageSize,Ee()},Ee=async()=>{ie.value=!0;try{te.value=k.merchantList,ie.value=!1}catch(e){T.error(Q("message.fetchError")),ie.value=!1}};return i((()=>{Ee()})),(e,a)=>{const l=s("a-input"),t=s("a-form-item"),i=s("a-select-option"),b=s("a-select"),g=s("a-button"),U=s("a-form"),_=s("a-card"),T=s("a-space"),k=s("a-table"),M=s("a-input-group"),Ee=s("a-input-number"),Le=s("a-tab-pane"),xe=s("a-tabs"),Ae=s("a-modal"),De=s("a-checkbox");return r(),d("div",E,[u(_,{title:o(Q)("title.queryCondition"),bordered:!1,class:"filter-card"},{default:n((()=>[u(U,{layout:"inline",model:le,class:"query-form"},{default:n((()=>[u(t,{label:o(Q)("field.name"),class:"form-item"},{default:n((()=>[u(l,{value:le.name,"onUpdate:value":a[0]||(a[0]=e=>le.name=e),placeholder:o(Q)("prompt.inputName"),"allow-clear":"",style:{width:"200px"}},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.status"),class:"form-item"},{default:n((()=>[u(b,{value:le.status,"onUpdate:value":a[1]||(a[1]=e=>le.status=e),placeholder:o(Q)("prompt.selectStatus"),style:{width:"200px"},"allow-clear":""},{default:n((()=>[u(i,{value:"active"},{default:n((()=>[c(p(o(Q)("status.active")),1)])),_:1}),u(i,{value:"inactive"},{default:n((()=>[c(p(o(Q)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{class:"form-item"},{default:n((()=>[u(g,{type:"primary",onClick:he},{icon:n((()=>[u(o(C))])),default:n((()=>[c(" "+p(o(Q)("action.search")),1)])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title"]),u(_,{title:o(Q)("title.merchantManagement"),bordered:!1,class:"table-card"},{extra:n((()=>[u(g,{type:"primary",onClick:ye},{icon:n((()=>[u(o(N))])),default:n((()=>[c(" "+p(o(Q)("action.add")),1)])),_:1})])),default:n((()=>[v("div",L,[u(k,{columns:Z,"data-source":te.value,loading:ie.value,rowKey:"id",pagination:me,bordered:!0,onChange:Me},{bodyCell:n((({column:e,record:a})=>["action"===e.key?(r(),m(T,{key:0},{default:n((()=>[u(g,{type:"link",onClick:e=>(e=>{ue.value=Q("title.editMerchant"),Object.assign(pe,{...e,depositStatus:e.depositStatus??!0,withdrawStatus:e.withdrawStatus??!0,swapStatus:e.swapStatus??!0,lpStatus:e.lpStatus??!0,depositNotifyUrl:e.depositNotifyUrl??"",withdrawNotifyUrl:e.withdrawNotifyUrl??"",swapNotifyUrl:e.swapNotifyUrl??"",lpNotifyUrl:e.lpNotifyUrl??"",swapSlippage:e.swapSlippage??.5,lpSlippage:e.lpSlippage??.5,txHashNotifyUrl:e.txHashNotifyUrl??"",availableCurrencies:e.availableCurrencies??["BSC_USDT","ETH_USDT","TRX_USDT"]}),de.value=!0,oe.value=1})(a)},{default:n((()=>[c(p(o(Q)("action.edit")),1)])),_:2},1032,["onClick"]),u(g,{type:"link",onClick:e=>(e=>{re.value=Q("title.currencyManagement")+` - ${e.name}`,ce.value=e.id;const a={};Object.entries(Y).forEach((([e,l])=>{l.forEach((l=>{const t=`${e}_${l}`,i=Math.random()>.5;a[t]={enabled:Math.random()>.3,enableStorageLimit:i,collectionWalletLimit:i?Math.floor(1e4*Math.random())+1e3:0,withdrawWalletLimit:i?Math.floor(5e3*Math.random())+500:0}}))})),ae.value=a,se.value=!0})(a)},{default:n((()=>[c(p(o(Q)("action.currencyManagement")),1)])),_:2},1032,["onClick"])])),_:2},1024)):"status"===e.key?(r(),d("span",{key:1,class:h(["status-tag","active"===a.status?"status-enabled":"status-disabled"])},p(o(Q)(`status.${a.status}`)),3)):f("",!0)])),_:1},8,["data-source","loading","pagination"])])])),_:1},8,["title"]),u(Ae,{open:de.value,"onUpdate:open":a[19]||(a[19]=e=>de.value=e),title:ue.value,onOk:Ne,onCancel:ke,width:"800px"},{default:n((()=>[u(xe,{activeKey:oe.value,"onUpdate:activeKey":a[18]||(a[18]=e=>oe.value=e)},{default:n((()=>[(r(),m(Le,{key:1,tab:o(Q)("title.merchantInfo")},{default:n((()=>[u(U,{ref_key:"formRef",ref:ne,model:pe,rules:ve,"label-col":{span:6},"wrapper-col":{span:16}},{default:n((()=>[u(t,{label:o(Q)("field.name"),name:"name"},{default:n((()=>[u(l,{value:pe.name,"onUpdate:value":a[2]||(a[2]=e=>pe.name=e),placeholder:o(Q)("prompt.inputName")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.code"),name:"code"},{default:n((()=>[u(l,{value:pe.code,"onUpdate:value":a[3]||(a[3]=e=>pe.code=e),placeholder:o(Q)("prompt.inputCode")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.status"),name:"status"},{default:n((()=>[u(b,{value:pe.status,"onUpdate:value":a[4]||(a[4]=e=>pe.status=e),placeholder:o(Q)("prompt.selectStatus")},{default:n((()=>[u(i,{value:"active"},{default:n((()=>[c(p(o(Q)("status.active")),1)])),_:1}),u(i,{value:"inactive"},{default:n((()=>[c(p(o(Q)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.privateKey"),name:"privateKey"},{default:n((()=>[u(M,{compact:""},{default:n((()=>[u(l,{value:pe.privateKey,"onUpdate:value":a[5]||(a[5]=e=>pe.privateKey=e),placeholder:o(Q)("field.privateKey"),style:{width:"calc(100% - 110px)"},readonly:""},null,8,["value","placeholder"]),u(g,{type:"primary",onClick:fe},{default:n((()=>[c(p(o(Q)("action.generateKey")),1)])),_:1})])),_:1})])),_:1},8,["label"]),u(t,{label:o(Q)("field.retryCount"),name:"retryCount"},{default:n((()=>[u(Ee,{value:pe.retryCount,"onUpdate:value":a[6]||(a[6]=e=>pe.retryCount=e),min:0,max:10,style:{width:"100%"}},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["tab"])),(r(),m(Le,{key:2,tab:o(Q)("title.merchantPermission")},{default:n((()=>[u(U,{model:pe,"label-col":{span:6},"wrapper-col":{span:16}},{default:n((()=>[u(t,{label:o(Q)("field.depositStatus"),name:"depositStatus"},{default:n((()=>[u(b,{value:pe.depositStatus,"onUpdate:value":a[7]||(a[7]=e=>pe.depositStatus=e),placeholder:o(Q)("prompt.selectStatus")},{default:n((()=>[u(i,{value:!0},{default:n((()=>[c(p(o(Q)("status.active")),1)])),_:1}),u(i,{value:!1},{default:n((()=>[c(p(o(Q)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.depositNotifyUrl"),name:"depositNotifyUrl"},{default:n((()=>[u(l,{value:pe.depositNotifyUrl,"onUpdate:value":a[8]||(a[8]=e=>pe.depositNotifyUrl=e),placeholder:o(Q)("prompt.inputDepositNotifyUrl")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.withdrawStatus"),name:"withdrawStatus"},{default:n((()=>[u(b,{value:pe.withdrawStatus,"onUpdate:value":a[9]||(a[9]=e=>pe.withdrawStatus=e),placeholder:o(Q)("prompt.selectStatus")},{default:n((()=>[u(i,{value:!0},{default:n((()=>[c(p(o(Q)("status.active")),1)])),_:1}),u(i,{value:!1},{default:n((()=>[c(p(o(Q)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.withdrawNotifyUrl"),name:"withdrawNotifyUrl"},{default:n((()=>[u(l,{value:pe.withdrawNotifyUrl,"onUpdate:value":a[10]||(a[10]=e=>pe.withdrawNotifyUrl=e),placeholder:o(Q)("prompt.inputWithdrawNotifyUrl")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.swapStatus"),name:"swapStatus"},{default:n((()=>[u(b,{value:pe.swapStatus,"onUpdate:value":a[11]||(a[11]=e=>pe.swapStatus=e),placeholder:o(Q)("prompt.selectStatus")},{default:n((()=>[u(i,{value:!0},{default:n((()=>[c(p(o(Q)("status.active")),1)])),_:1}),u(i,{value:!1},{default:n((()=>[c(p(o(Q)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.swapNotifyUrl"),name:"swapNotifyUrl"},{default:n((()=>[u(l,{value:pe.swapNotifyUrl,"onUpdate:value":a[12]||(a[12]=e=>pe.swapNotifyUrl=e),placeholder:o(Q)("prompt.inputSwapNotifyUrl")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.swapSlippage"),name:"swapSlippage"},{default:n((()=>[u(Ee,{value:pe.swapSlippage,"onUpdate:value":a[13]||(a[13]=e=>pe.swapSlippage=e),min:0,max:100,step:.1,precision:1,style:{width:"100%"},placeholder:o(Q)("prompt.inputSwapSlippage"),"addon-after":"%"},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.lpStatus"),name:"lpStatus"},{default:n((()=>[u(b,{value:pe.lpStatus,"onUpdate:value":a[14]||(a[14]=e=>pe.lpStatus=e),placeholder:o(Q)("prompt.selectStatus")},{default:n((()=>[u(i,{value:!0},{default:n((()=>[c(p(o(Q)("status.active")),1)])),_:1}),u(i,{value:!1},{default:n((()=>[c(p(o(Q)("status.inactive")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.lpNotifyUrl"),name:"lpNotifyUrl"},{default:n((()=>[u(l,{value:pe.lpNotifyUrl,"onUpdate:value":a[15]||(a[15]=e=>pe.lpNotifyUrl=e),placeholder:o(Q)("prompt.inputLpNotifyUrl")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.lpSlippage"),name:"lpSlippage"},{default:n((()=>[u(Ee,{value:pe.lpSlippage,"onUpdate:value":a[16]||(a[16]=e=>pe.lpSlippage=e),min:0,max:100,step:.1,precision:1,style:{width:"100%"},placeholder:o(Q)("prompt.inputLpSlippage"),"addon-after":"%"},null,8,["value","placeholder"])])),_:1},8,["label"]),u(t,{label:o(Q)("field.txHashNotifyUrl"),name:"txHashNotifyUrl"},{default:n((()=>[u(l,{value:pe.txHashNotifyUrl,"onUpdate:value":a[17]||(a[17]=e=>pe.txHashNotifyUrl=e),placeholder:o(Q)("prompt.inputTxHashNotifyUrl")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["tab"]))])),_:1},8,["activeKey"])])),_:1},8,["open","title"]),u(Ae,{open:se.value,"onUpdate:open":a[20]||(a[20]=e=>se.value=e),title:re.value,onOk:Se,onCancel:we,width:"1000px",bodyStyle:{maxHeight:"700px",overflow:"auto"}},{default:n((()=>{return[v("div",x,[v("div",A,[v("div",D,[u(De,{checked:_e.value,indeterminate:Te.value,onChange:Ce},{default:n((()=>[c(p(o(Q)("action.selectAll")),1)])),_:1},8,["checked","indeterminate"])]),v("div",O,[v("div",H,[(r(),d(y,null,S(J,(e=>v("div",{key:e,class:h(["chain-type-item",{active:ee.value===e}]),onClick:a=>(e=>{ee.value=e})(e)},[v("span",B,p(e),1),u(De,{checked:ge(e),indeterminate:Ue(e),onClick:w((a=>((e,a)=>{Y[a].map((e=>`${a}_${e}`)).forEach((a=>{ae.value[a]&&(ae.value[a].enabled=e.target.checked)}))})(a,e)),["stop"])},null,8,["checked","indeterminate","onClick"])],10,W))),64))]),v("div",K,[v("div",R,p(ee.value)+" "+p(o(Q)("field.currencies")),1),v("div",I,[v("div",$,[(r(!0),d(y,null,S((e=ee.value,Y[e].map((a=>({label:a,value:`${e}_${a}`})))),(e=>{var a,l,t,i,s,m;return r(),d("div",{key:e.value,class:"currency-config-item"},[v("div",j,[u(De,{checked:(null==(a=ae.value[e.value])?void 0:a.enabled)||!1,onChange:a=>{return l=e.value,t=a.target.checked,void(ae.value[l]&&(ae.value[l].enabled=t));var l,t}},{default:n((()=>[c(p(e.label),1)])),_:2},1032,["checked","onChange"])]),(null==(l=ae.value[e.value])?void 0:l.enabled)?(r(),d("div",q,[v("div",X,[u(De,{checked:(null==(t=ae.value[e.value])?void 0:t.enableStorageLimit)||!1,onChange:a=>{return l=e.value,t=a.target.checked,void(ae.value[l]&&(ae.value[l].enableStorageLimit=t,t||(ae.value[l].collectionWalletLimit=0,ae.value[l].withdrawWalletLimit=0)));var l,t}},{default:n((()=>[c(p(o(Q)("field.configStorageLimit")),1)])),_:2},1032,["checked","onChange"])]),(null==(i=ae.value[e.value])?void 0:i.enableStorageLimit)?(r(),d("div",z,[v("div",P,[v("label",F,p(o(Q)("field.collectionWalletLimit")),1),u(Ee,{value:(null==(s=ae.value[e.value])?void 0:s.collectionWalletLimit)||0,"onUpdate:value":a=>be(e.value,"collectionWalletLimit",a),min:0,precision:4,size:"small",placeholder:o(Q)("prompt.inputCollectionWalletLimit"),style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])]),v("div",G,[v("label",V,p(o(Q)("field.withdrawWalletLimit")),1),u(Ee,{value:(null==(m=ae.value[e.value])?void 0:m.withdrawWalletLimit)||0,"onUpdate:value":a=>be(e.value,"withdrawWalletLimit",a),min:0,precision:4,size:"small",placeholder:o(Q)("prompt.inputWithdrawWalletLimit"),style:{width:"100%"}},null,8,["value","onUpdate:value","placeholder"])])])):f("",!0)])):f("",!0)])})),128))])])])])])])];var e})),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-0e43e3f7"]]);export{Q as default};
