import{v as e,y as a}from"./vendor-BhfxMwoc.js";import{c as t,X as l,W as s,Z as r,Y as n,a0 as d,F as o,a2 as i,k as u,G as c,a1 as p,u as f,d as m,f as y,l as h,o as v,_ as I,a4 as T,$ as g}from"./vue-vendor-B-98Oggh.js";/* empty css               */import{c as w,b as x,y as C,J as k}from"./ant-design-0M0Sv-BJ.js";import{_ as b}from"./index-D1LDp_gy.js";import"./lodash-CiXSdKEp.js";const _={placeholder:"請選擇狀態",status:{pending:"待處理",processing:"處理中",manualConfirm:"待人工確認",success:"成功",failed:"失敗"}},O={placeholder:"Please select status",status:{pending:"Pending",processing:"Processing",manualConfirm:"Manual Confirm",success:"Success",failed:"Failed"}},S={__name:"TransferStatusSelect",props:{modelValue:{type:String,default:void 0}},emits:["update:modelValue","change"],setup(a,{emit:m}){const y=a,h=m,v={zh:_,en:O},{t:I}=e({messages:v,legacy:!1}),T=["pending","processing","manualConfirm","success","failed"],g=t({get:()=>y.modelValue,set:e=>h("update:modelValue",e)}),w=e=>{h("change",e)};return(e,a)=>{const t=l("a-select-option"),m=l("a-select");return r(),s(m,{value:g.value,"onUpdate:value":a[0]||(a[0]=e=>g.value=e),placeholder:f(I)("placeholder"),allowClear:!0,onChange:w},{default:n((()=>[(r(),d(o,null,i(T,(e=>u(t,{key:e,value:e},{default:n((()=>[c(p(f(I)(`status.${e}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value","placeholder"])}}},A={placeholder:"請選擇轉賬類型",type:{manualOut:"人工出金",manualIn:"人工入金",systemError:"系統錯誤",deposit:"充值",withdraw:"提現",collection:"歸集",exchange:"兌換",replenish:"補充",manual:"人工",pendingConfirm:"待確認"}},R={placeholder:"Please select transfer type",type:{manualOut:"Manual Out",manualIn:"Manual In",systemError:"System Error",deposit:"Deposit",withdraw:"Withdraw",collection:"Collection",exchange:"Exchange",replenish:"Replenish",manual:"Manual",pendingConfirm:"Pending Confirm"}},H={__name:"TransferTypeSelect",props:{modelValue:{type:String,default:void 0}},emits:["update:modelValue","change"],setup(a,{emit:m}){const y=a,h=m,v={zh:A,en:R},{t:I}=e({messages:v,legacy:!1}),T=["manualOut","manualIn","systemError","deposit","withdraw","collection","exchange","replenish","manual","pendingConfirm"],g=t({get:()=>y.modelValue,set:e=>h("update:modelValue",e)}),w=e=>{h("change",e)};return(e,a)=>{const t=l("a-select-option"),m=l("a-select");return r(),s(m,{value:g.value,"onUpdate:value":a[0]||(a[0]=e=>g.value=e),placeholder:f(I)("placeholder"),allowClear:!0,onChange:w},{default:n((()=>[(r(),d(o,null,i(T,(e=>u(t,{key:e,value:e},{default:n((()=>[c(p(f(I)(`type.${e}`)),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value","placeholder"])}}},W={title:{transferOrderQuery:"轉帳訂單查詢",transferList:"轉帳列表",notifyDetail:"通知詳情"},field:{orderId:"訂單編號",walletId:"錢包編號",address:"地址",relatedOrderId:"關聯訂單編號",status:"狀態",transferType:"轉帳類型",createTime:"創建時間",onChainTime:"上鏈時間",successTime:"成功時間",reason:"原因",transferId:"轉帳單號",fromWallet:"來源錢包",toWallet:"目標錢包",transferAmount:"轉帳數量",timeInfo:"時間信息",action:"操作",txHash:"交易哈希",fromAddress:"來源地址",toAddress:"目標地址"},prompt:{pleaseInputOrderId:"請輸入訂單編號",pleaseInputWalletId:"請輸入錢包編號",pleaseInputAddress:"請輸入地址",pleaseInputTxHash:"請輸入交易哈希",pleaseInputRelatedOrderId:"請輸入關聯訂單編號",pleaseSelectTransferType:"請選擇轉帳類型",pleaseInputReason:"請輸入原因",noReasonProvided:"未提供原因",changeTransferType:"修改轉帳類型",transferTypeReason:"轉帳類型原因"},action:{reset:"重置",query:"查詢",changeType:"修改類型",download:"下載"},status:{pending:"待處理",processing:"處理中",manualConfirm:"待人工確認",success:"成功",failed:"失敗"},transferType:{deposit:"充值",withdraw:"提現",collection:"歸集",exchange:"兌幣",replenish:"補幣",manual:"手動",manualOut:"手動轉出",manualIn:"手動轉入",systemError:"系統錯誤",pendingConfirm:"待確認",fee:"手續費"},message:{copySuccess:"複製成功",copyFailed:"複製失敗",updateSuccess:"更新成功"}},P={title:{transferOrderQuery:"Transfer Order Query",transferList:"Transfer List",notifyDetail:"Notification Details"},field:{orderId:"Order ID",walletId:"Wallet ID",address:"Address",relatedOrderId:"Related Order ID",status:"Status",transferType:"Transfer Type",createTime:"Create Time",onChainTime:"On Chain Time",successTime:"Success Time",reason:"Reason",transferId:"Transfer ID",fromWallet:"From Wallet",toWallet:"To Wallet",transferAmount:"Transfer Amount",timeInfo:"Time Info",action:"Action"},prompt:{pleaseInputOrderId:"Please input order ID",pleaseInputWalletId:"Please input wallet ID",pleaseInputAddress:"Please input address",pleaseInputTxHash:"Please input transaction hash",pleaseInputRelatedOrderId:"Please input related order ID",pleaseSelectTransferType:"Please select transfer type",pleaseInputReason:"Please input reason",noReasonProvided:"No reason provided",changeTransferType:"Change Transfer Type",transferTypeReason:"Transfer Type Reason"},action:{reset:"Reset",query:"Query",changeType:"Change Type"},status:{pending:"Pending",processing:"Processing",manualConfirm:"Manual Confirm",success:"Success",failed:"Failed"},transferType:{deposit:"Deposit",withdraw:"Withdraw",collection:"Collection",exchange:"Exchange",replenish:"Replenish",manual:"Manual",manualOut:"Manual Out",manualIn:"Manual In",systemError:"System Error",pendingConfirm:"Pending Confirm",fee:"Fee"},message:{copySuccess:"Copy Success",copyFailed:"Copy Failed",updateSuccess:"Update successful"}},E=100,U=[{id:"TR001",transferId:"TF20240315001",fromAddress:"0x1234567890abcdef1234567890abcdef12345678",toAddress:"0xabcdef1234567890abcdef1234567890abcdef12",amount:"1.5",coinCode:"ETH",txHash:"0x9876543210fedcba9876543210fedcba98765432",status:"success",createTime:"2024-03-15 10:00:00",onChainTime:"2024-03-15 10:01:00",successTime:"2024-03-15 10:02:00",transferType:{type:"deposit",orderId:"DEP20240315001"}},{id:"TR002",transferId:"TF20240315002",fromAddress:"0x2345678901abcdef2345678901abcdef23456789",toAddress:"0xbcdef1234567890abcdef1234567890abcdef123",amount:"2.0",coinCode:"BTC",txHash:"0x8765432109fedcba8765432109fedcba87654321",status:"pending",createTime:"2024-03-15 11:00:00",onChainTime:null,successTime:null,transferType:{type:"withdraw",orderId:"WD20240315001"}}],D={class:"transfer-record"},V={class:"form-row"},$={class:"form-row"},F={class:"form-item-sm button-group"},j={key:1,class:"hash-container"},M={class:"icon-group"},q={key:3,class:"time-info"},z={class:"info-item"},L={class:"label"},Q={class:"info-item"},B={class:"label"},J={class:"info-item"},N={class:"label"},G={key:1,class:"transfer-type-container"},X={class:"type-text"},Y={key:0,class:"order-id"},Z=b(m({__name:"TransferRecord",setup(i){const m={zh:W,en:P},{t:b}=e({messages:m,legacy:!1}),_=y({orderId:"",walletId:"",address:"",fromAddress:"",toAddress:"",txHash:"",relatedOrderId:"",status:void 0,transferType:void 0}),O=a(),A=()=>{_.value={orderId:"",walletId:"",address:"",fromAddress:"",toAddress:"",txHash:"",relatedOrderId:"",status:void 0,transferType:void 0},R()},R=()=>{Z.value=U,K.value.total=E};t((()=>[{title:b("field.transferId"),dataIndex:"transferId",key:"transferId",width:150},{title:b("field.fromWallet"),dataIndex:"fromWalletId",key:"fromWalletId",width:150},{title:b("field.toWallet"),dataIndex:"toWalletId",key:"toWalletId",width:150},{title:b("field.transferType"),dataIndex:"transferType",key:"transferType",width:200},{title:b("field.transferAmount"),dataIndex:"amount",key:"amount",width:150,align:"right"},{title:b("field.status"),dataIndex:"status",key:"status",width:120},{title:"TxHash",dataIndex:"txHash",key:"txHash",width:200},{title:b("field.timeInfo"),dataIndex:"timeInfo",key:"timeInfo",width:300},{title:b("field.action"),key:"action",fixed:"right",width:120}]));const Z=y([]),K=y({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0}),ee=(e,a,t)=>{K.value.current=e.current||1,K.value.pageSize=e.pageSize||10,R()},ae=e=>e?`${e.slice(0,8)}...${e.slice(-8)}`:"-",te=async e=>{try{await navigator.clipboard.writeText(e),x.success(b("message.copySuccess"))}catch(a){x.error(b("message.copyFailed"))}},le=y(!1),se=y({type:void 0,reason:"",recordId:null}),re=()=>{se.value.type?se.value.reason.trim()?(x.success(b("updateSuccess")),le.value=!1):x.error(b("pleaseInputReason")):x.error(b("pleaseSelectTransferType"))},ne=()=>{le.value=!1},de=y(!1),oe=y(""),ie=()=>{const e=pe.value,a=[e.map((e=>e.title)).join(","),...Z.value.map((a=>e.map((e=>{let t="";if("string"==typeof e.dataIndex)t=a[e.dataIndex]||"";else if(Array.isArray(e.dataIndex)){let l=a;for(const a of e.dataIndex)l=null==l?void 0:l[a];t=l||""}return`"${t}"`})).join(",")))].join("\n"),t=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),s=URL.createObjectURL(t);l.setAttribute("href",s),l.setAttribute("download",`transfer_record_${(new Date).toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),x.success(b("message.downloadSuccess"))},ue=e=>e?`${e.slice(0,4)}***${e.slice(-4)}`:"-",ce=async e=>{try{await navigator.clipboard.writeText(e),x.success(b("message.copySuccess"))}catch(a){x.error(b("message.copyFailed"))}},pe=t((()=>[{title:b("field.transferId"),dataIndex:"transferId",key:"transferId",width:150},{title:b("field.fromAddress"),dataIndex:"fromAddress",key:"fromAddress",width:200,customRender:({text:e,record:a})=>h("div",{class:"address-container"},[h("span",{},ue(e)),h(w,{class:"copy-icon",onClick:()=>ce(e)})])},{title:b("field.toAddress"),dataIndex:"toAddress",key:"toAddress",width:200,customRender:({text:e,record:a})=>h("div",{class:"address-container"},[h("span",{},ue(e)),h(w,{class:"copy-icon",onClick:()=>ce(e)})])},{title:b("field.txHash"),dataIndex:"txHash",key:"txHash",width:200,customRender:({text:e,record:a})=>h("div",{class:"hash-container"},[h("span",{},ae(e)),h(w,{class:"copy-icon",onClick:()=>te(e)})])},{title:b("field.status"),dataIndex:"status",key:"status",width:120,customRender:({text:e})=>{return a=e,{pending:b("status.pending"),processing:b("status.processing"),manualConfirm:b("status.manualConfirm"),success:b("status.success"),failed:b("status.failed")}[a];var a}},{title:b("field.transferType"),dataIndex:["transferType","type"],key:"transferType",width:120,customRender:({text:e})=>{return a=e,{deposit:b("transferType.deposit"),withdraw:b("transferType.withdraw"),collection:b("transferType.collection"),exchange:b("transferType.exchange"),replenish:b("transferType.replenish"),manual:b("transferType.manual")}[a];var a}}]));return v((()=>{R()})),(e,a)=>{const t=l("a-input"),i=l("a-form-item"),m=l("a-button"),y=l("a-space"),h=l("a-form"),v=l("a-card"),x=l("a-tag"),W=l("a-table"),P=l("a-select-option"),E=l("a-select"),U=l("a-textarea"),ue=l("a-modal");return r(),d("div",D,[u(v,{title:f(b)("title.transferOrderQuery"),class:"filter-card"},{default:n((()=>[u(h,{layout:"vertical",model:_.value,class:"query-form"},{default:n((()=>[I("div",V,[u(i,{label:f(b)("field.orderId"),class:"form-item-lg"},{default:n((()=>[u(t,{value:_.value.orderId,"onUpdate:value":a[0]||(a[0]=e=>_.value.orderId=e),placeholder:f(b)("prompt.pleaseInputOrderId"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),u(i,{label:f(b)("field.walletId"),class:"form-item-lg"},{default:n((()=>[u(t,{value:_.value.walletId,"onUpdate:value":a[1]||(a[1]=e=>_.value.walletId=e),placeholder:f(b)("prompt.pleaseInputWalletId"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),u(i,{label:f(b)("field.address"),class:"form-item-lg"},{default:n((()=>[u(t,{value:_.value.address,"onUpdate:value":a[2]||(a[2]=e=>_.value.address=e),placeholder:f(b)("prompt.pleaseInputAddress"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"])]),I("div",$,[u(i,{label:"TxHash",class:"form-item-lg"},{default:n((()=>[u(t,{value:_.value.txHash,"onUpdate:value":a[3]||(a[3]=e=>_.value.txHash=e),placeholder:f(b)("prompt.pleaseInputTxHash"),"allow-clear":""},null,8,["value","placeholder"])])),_:1}),u(i,{label:f(b)("field.relatedOrderId"),class:"form-item-lg"},{default:n((()=>[u(t,{value:_.value.relatedOrderId,"onUpdate:value":a[4]||(a[4]=e=>_.value.relatedOrderId=e),placeholder:f(b)("prompt.pleaseInputRelatedOrderId"),"allow-clear":""},null,8,["value","placeholder"])])),_:1},8,["label"]),u(i,{label:f(b)("field.status"),class:"form-item-md"},{default:n((()=>[u(S,{modelValue:_.value.status,"onUpdate:modelValue":a[5]||(a[5]=e=>_.value.status=e),style:{width:"100%"}},null,8,["modelValue"])])),_:1},8,["label"]),u(i,{label:f(b)("field.transferType"),class:"form-item-md"},{default:n((()=>[u(H,{modelValue:_.value.transferType,"onUpdate:modelValue":a[6]||(a[6]=e=>_.value.transferType=e),style:{width:"100%"}},null,8,["modelValue"])])),_:1},8,["label"]),I("div",F,[u(y,null,{default:n((()=>[u(m,{onClick:A},{default:n((()=>[c(p(f(b)("action.reset")),1)])),_:1}),u(m,{type:"primary",onClick:R},{default:n((()=>[c(p(f(b)("action.query")),1)])),_:1})])),_:1})])])])),_:1},8,["model"])])),_:1},8,["title"]),u(v,{title:f(b)("title.transferList"),class:"list-card"},{extra:n((()=>[u(m,{type:"primary",onClick:ie},{icon:n((()=>[u(f(k))])),default:n((()=>[c(" "+p(f(b)("action.download")),1)])),_:1})])),default:n((()=>[u(W,{columns:pe.value,"data-source":Z.value,pagination:K.value,bordered:!0,scroll:{x:1500},onChange:ee},{bodyCell:n((({column:e,record:a})=>["transferId"===e.key?(r(),d(o,{key:0},[c(p(a.transferId),1)],64)):"txHash"===e.key?(r(),d("div",j,[I("span",null,p(ae(a.txHash)),1),I("div",M,[u(f(w),{class:"action-icon",onClick:e=>te(a.txHash)},null,8,["onClick"]),u(f(C),{class:"action-icon",onClick:e=>{return t=a.txHash,void window.open(`https://example.com/tx/${t}`,"_blank");var t}},null,8,["onClick"])])])):"status"===e.key?(r(),s(x,{key:2,class:g(["status-tag",`status-${a.status}`])},{default:n((()=>{return[c(p((e=a.status,{pending:b("status.pending"),processing:b("status.processing"),manualConfirm:b("status.manualConfirm"),success:b("status.success"),failed:b("status.failed")}[e]||e)),1)];var e})),_:2},1032,["class"])):"timeInfo"===e.key?(r(),d("div",q,[I("div",z,[I("span",L,p(f(b)("field.createTime"))+":",1),I("span",null,p(a.createTime),1)]),I("div",Q,[I("span",B,p(f(b)("field.onChainTime"))+":",1),I("span",null,p(a.onChainTime||"-"),1)]),I("div",J,[I("span",N,p(f(b)("field.successTime"))+":",1),I("span",null,p(a.successTime||"-"),1)])])):"transferType"===e.key?(r(),d(o,{key:4},[["manualOut","manualIn","systemError"].includes(a.transferType.type)?(r(),s(m,{key:0,type:"link",onClick:e=>(e=>{["manualOut","manualIn","systemError"].includes(e.transferType.type)&&(oe.value=e.transferType.reason||b("noReasonProvided"),de.value=!0)})(a)},{default:n((()=>[c(p(f(b)(`transferType.${a.transferType.type}`)),1)])),_:2},1032,["onClick"])):(r(),d("div",G,[I("div",X,p(f(b)(`transferType.${a.transferType.type}`)),1),["deposit","withdraw","collection","exchange","replenish","manual"].includes(a.transferType.type)?(r(),d("div",Y,[u(m,{type:"link",class:"order-link",onClick:e=>((e,a)=>{const t={deposit:"/order/deposit",withdraw:"/order/withdraw",collection:"/wallet/collection",exchange:"/wallet/exchange",replenish:"/wallet/replenish",manual:"/order/manual"}[a];t&&O.push({path:t,query:{orderId:e}})})(a.transferType.orderId,a.transferType.type)},{default:n((()=>[c(p(a.transferType.orderId),1)])),_:2},1032,["onClick"])])):T("",!0)]))],64)):"action"===e.key?(r(),d(o,{key:5},["pendingConfirm"===a.transferType.type?(r(),s(m,{key:0,type:"link",onClick:e=>(e=>{se.value.recordId=e.key,se.value.type=void 0,se.value.reason="",le.value=!0})(a)},{default:n((()=>[c(p(f(b)("action.changeType")),1)])),_:2},1032,["onClick"])):T("",!0)],64)):T("",!0)])),_:1},8,["columns","data-source","pagination"])])),_:1},8,["title"]),u(ue,{open:le.value,"onUpdate:open":a[9]||(a[9]=e=>le.value=e),title:f(b)("prompt.changeTransferType"),onOk:re,onCancel:ne},{default:n((()=>[u(h,{model:se.value,layout:"vertical"},{default:n((()=>[u(i,{label:f(b)("field.transferType"),required:""},{default:n((()=>[u(E,{value:se.value.type,"onUpdate:value":a[7]||(a[7]=e=>se.value.type=e),placeholder:f(b)("prompt.pleaseSelectTransferType")},{default:n((()=>[u(P,{value:"manualOut"},{default:n((()=>[c(p(f(b)("transferType.manualOut")),1)])),_:1}),u(P,{value:"manualIn"},{default:n((()=>[c(p(f(b)("transferType.manualIn")),1)])),_:1}),u(P,{value:"systemError"},{default:n((()=>[c(p(f(b)("transferType.systemError")),1)])),_:1})])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),u(i,{label:f(b)("field.reason"),required:""},{default:n((()=>[u(U,{value:se.value.reason,"onUpdate:value":a[8]||(a[8]=e=>se.value.reason=e),placeholder:f(b)("prompt.pleaseInputReason"),rows:4},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["open","title"]),u(ue,{open:de.value,"onUpdate:open":a[10]||(a[10]=e=>de.value=e),title:f(b)("prompt.transferTypeReason"),footer:null},{default:n((()=>[I("p",null,p(oe.value),1)])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-15f9d30b"]]);export{Z as default};
