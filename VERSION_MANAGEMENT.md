# CAMS ç‰ˆæœ¬ç®¡ç†èˆ‡ç™¼å¸ƒæµç¨‹

## ğŸ“‹ æ¦‚è¿°

æ­¤æ–‡ä»¶èªªæ˜ CAMS å°ˆæ¡ˆçš„ç‰ˆæœ¬ç®¡ç†æµç¨‹ã€Git æ¨™ç±¤ä½¿ç”¨è¦ç¯„ä»¥åŠç™¼å¸ƒéƒ¨ç½²æµç¨‹ã€‚

## ğŸ”¢ ç‰ˆæœ¬è™Ÿè¦ç¯„

### èªç¾©åŒ–ç‰ˆæœ¬è¦ç¯„ (SemVer)
ç‰ˆæœ¬æ ¼å¼ï¼š`MAJOR.MINOR.PATCH[-SUFFIX]`

- **MAJOR** (ä¸»ç‰ˆæœ¬è™Ÿ): ä¸å…¼å®¹çš„ API ä¿®æ”¹
- **MINOR** (æ¬¡ç‰ˆæœ¬è™Ÿ): å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **PATCH** (ä¿®è¨‚ç‰ˆæœ¬è™Ÿ): å‘ä¸‹å…¼å®¹çš„å•é¡Œä¿®æ­£
- **SUFFIX** (å¾Œç¶´): é ç™¼å¸ƒç‰ˆæœ¬æ¨™è­˜ (å¦‚: alpha, beta, rc, fix1, fix2)

### ç•¶å‰ç‰ˆæœ¬ç®¡ç†
- ç•¶å‰ç‰ˆæœ¬ï¼š`v0.0.12`
- ç‰ˆæœ¬æ­·å²ï¼šåƒè€ƒ `git tag -l` æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬
- ç‰ˆæœ¬é¡¯ç¤ºï¼šå‰ç«¯é é¢å³ä¸Šè§’é¡¯ç¤ºç•¶å‰ç‰ˆæœ¬è™Ÿ

## ğŸ“¦ ç‰ˆæœ¬ç™¼å¸ƒæµç¨‹

### 1. é–‹ç™¼éšæ®µ
```bash
# é–‹ç™¼æ–°åŠŸèƒ½æˆ–ä¿®å¾© bug
git checkout -b feature/new-feature
# ... é–‹ç™¼å·¥ä½œ ...
git add .
git commit -m "feat: æ–°å¢åŠŸèƒ½æè¿°"
git push origin feature/new-feature
```

### 2. ç‰ˆæœ¬æ›´æ–°æ­¥é©Ÿ

#### 2.1 æ›´æ–°ç‰ˆæœ¬è™Ÿ
```bash
# ç·¨è¼¯ package.json æ›´æ–°ç‰ˆæœ¬è™Ÿ
vim package.json  # ä¿®æ”¹ "version" æ¬„ä½

# ä¾‹å¦‚ï¼šå¾ "0.0.12" æ›´æ–°åˆ° "0.0.13"
```

#### 2.2 å»ºæ§‹ç”Ÿç”¢ç‰ˆæœ¬
```bash
# æœ¬æ©Ÿå»ºæ§‹éœæ…‹æª”æ¡ˆ
npm install
npm run build

# é©—è­‰å»ºæ§‹çµæœ
ls -la dist/
```

#### 2.3 æäº¤ç‰ˆæœ¬æ›´æ–°
```bash
# æäº¤ç‰ˆæœ¬æ›´æ–°
git add package.json dist/
git commit -m "release: ç‰ˆæœ¬ v0.0.13

âœ¨ æ–°åŠŸèƒ½:
- åŠŸèƒ½1æè¿°
- åŠŸèƒ½2æè¿°

ğŸ› ä¿®å¾©:
- å•é¡Œ1ä¿®å¾©
- å•é¡Œ2ä¿®å¾©

ğŸ¤– Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>"
```

#### 2.4 å‰µå»º Git æ¨™ç±¤
```bash
# å‰µå»ºå¸¶è¨»è§£çš„æ¨™ç±¤
git tag -a v0.0.13 -m "ç‰ˆæœ¬ v0.0.13 ç™¼å¸ƒ

ä¸»è¦æ›´æ–°ï¼š
- æ–°åŠŸèƒ½èªªæ˜
- é‡è¦ä¿®å¾©èªªæ˜
- æ€§èƒ½å„ªåŒ–ç­‰

ç™¼å¸ƒæ—¥æœŸï¼š$(date '+%Y-%m-%d')"

# é©—è­‰æ¨™ç±¤
git tag -l -n3 v0.0.13
```

#### 2.5 æ¨é€è‡³é ç¨‹å€‰åº«
```bash
# æ¨é€ä»£ç¢¼å’Œæ¨™ç±¤
git push origin main
git push origin v0.0.13

# æˆ–ä¸€æ¬¡æ€§æ¨é€æ‰€æœ‰æ¨™ç±¤
git push origin main --follow-tags
```

## ğŸ·ï¸ Git æ¨™ç±¤ç®¡ç†

### æŸ¥çœ‹æ¨™ç±¤
```bash
# åˆ—å‡ºæ‰€æœ‰æ¨™ç±¤
git tag -l

# æŸ¥çœ‹ç‰¹å®šæ¨™ç±¤è©³æƒ…
git show v0.0.12

# åˆ—å‡ºæ¨™ç±¤ä¸¦é¡¯ç¤ºè¨»è§£
git tag -l -n3
```

### æ¨™ç±¤å‘½åè¦ç¯„
- æ­£å¼ç‰ˆæœ¬ï¼š`v0.0.1`, `v0.0.2`, `v1.0.0`
- ä¿®å¾©ç‰ˆæœ¬ï¼š`v0.0.9-fix1`, `v0.0.11-fix1`
- é ç™¼å¸ƒç‰ˆæœ¬ï¼š`v1.0.0-alpha`, `v1.0.0-beta`, `v1.0.0-rc1`

### åˆªé™¤æ¨™ç±¤ (å¦‚éœ€è¦)
```bash
# åˆªé™¤æœ¬åœ°æ¨™ç±¤
git tag -d v0.0.12

# åˆªé™¤é ç¨‹æ¨™ç±¤
git push origin :refs/tags/v0.0.12
```

## ğŸš€ éƒ¨ç½²æµç¨‹

### Docker éƒ¨ç½²æµç¨‹

#### 1. æœ¬æ©Ÿæº–å‚™
```bash
# ç¢ºä¿å·²å»ºæ§‹æœ€æ–°ç‰ˆæœ¬
npm run build

# æª¢æŸ¥ Docker é…ç½®
ls -la Dockerfile docker-compose.yml
```

#### 2. é ç¨‹æœå‹™å™¨éƒ¨ç½²
```bash
# ç™»å…¥é ç¨‹æœå‹™å™¨
ssh user@your-server

# é€²å…¥å°ˆæ¡ˆç›®éŒ„
cd /path/to/cams

# æ‹‰å–æœ€æ–°ä»£ç¢¼
git pull origin main

# é‡å»ºä¸¦å•Ÿå‹• Docker å®¹å™¨
docker-compose down
docker-compose build
docker-compose up -d

# æª¢æŸ¥å®¹å™¨ç‹€æ…‹
docker-compose ps
docker-compose logs cams-web
```

#### 3. é©—è­‰éƒ¨ç½²
```bash
# æª¢æŸ¥æ‡‰ç”¨æ˜¯å¦æ­£å¸¸é‹è¡Œ
curl -I http://localhost:3001

# æª¢æŸ¥ç‰ˆæœ¬é¡¯ç¤ºæ˜¯å¦æ­£ç¢º
curl -s http://localhost:3001 | grep -o 'v[0-9]\+\.[0-9]\+\.[0-9]\+'
```

## ğŸ”„ å›æ»¾æµç¨‹

### ä»£ç¢¼å›æ»¾
```bash
# æŸ¥çœ‹ç‰ˆæœ¬æ­·å²
git log --oneline -10

# å›æ»¾åˆ°ç‰¹å®šç‰ˆæœ¬
git checkout v0.0.11

# æˆ–å»ºç«‹å›æ»¾åˆ†æ”¯
git checkout -b rollback/v0.0.11 v0.0.11
```

### Docker å®¹å™¨å›æ»¾
```bash
# åœæ­¢ç•¶å‰å®¹å™¨
docker-compose down

# æª¢å‡ºèˆŠç‰ˆæœ¬
git checkout v0.0.11

# é‡å»ºå®¹å™¨
docker-compose build
docker-compose up -d
```

## ğŸ“ æäº¤ä¿¡æ¯è¦ç¯„

### æäº¤é¡å‹
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¾©å•é¡Œ
- `docs`: æ–‡æª”æ›´æ–°
- `style`: ä»£ç¢¼æ ¼å¼èª¿æ•´
- `refactor`: é‡æ§‹
- `test`: æ¸¬è©¦ç›¸é—œ
- `chore`: å»ºæ§‹å·¥å…·ã€ä¾è³´ç®¡ç†
- `release`: ç‰ˆæœ¬ç™¼å¸ƒ

### æäº¤æ ¼å¼ç¯„ä¾‹
```bash
git commit -m "feat: æ–°å¢ç”¨æˆ¶ç®¡ç†åŠŸèƒ½

- æ–°å¢ç”¨æˆ¶åˆ—è¡¨é é¢
- æ–°å¢ç”¨æˆ¶æ–°å¢/ç·¨è¼¯åŠŸèƒ½
- æ–°å¢ç”¨æˆ¶æ¬Šé™ç®¡ç†

ğŸ¤– Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>"
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤å¿«é€Ÿåƒè€ƒ

### ç‰ˆæœ¬ç®¡ç†
```bash
# æŸ¥çœ‹ç•¶å‰ç‰ˆæœ¬
grep '"version"' package.json

# æŸ¥çœ‹æ‰€æœ‰æ¨™ç±¤
git tag -l

# æŸ¥çœ‹æœ€æ–°æ¨™ç±¤
git describe --tags --abbrev=0

# æŸ¥çœ‹æ¨™ç±¤èˆ‡æäº¤çš„é—œä¿‚
git log --oneline --graph --all
```

### å»ºæ§‹èˆ‡éƒ¨ç½²
```bash
# å®Œæ•´å»ºæ§‹æµç¨‹
npm install && npm run build

# Docker éƒ¨ç½²æµç¨‹
docker-compose down && docker-compose build && docker-compose up -d

# æŸ¥çœ‹æ‡‰ç”¨æ—¥èªŒ
docker-compose logs -f cams-web
```

## ğŸ“Š ç‰ˆæœ¬ç™¼å¸ƒæª¢æŸ¥æ¸…å–®

ç™¼å¸ƒå‰è«‹ç¢ºèªï¼š

- [ ] ä»£ç¢¼å·²åˆä½µåˆ° main åˆ†æ”¯
- [ ] æ‰€æœ‰æ¸¬è©¦é€šé
- [ ] package.json ç‰ˆæœ¬è™Ÿå·²æ›´æ–°
- [ ] åŸ·è¡Œ `npm run build` æˆåŠŸ
- [ ] æª¢æŸ¥ dist/ ç›®éŒ„åŒ…å«æœ€æ–°å»ºæ§‹æª”æ¡ˆ
- [ ] VersionDisplay çµ„ä»¶é¡¯ç¤ºæ­£ç¢ºç‰ˆæœ¬è™Ÿ
- [ ] æäº¤ä¿¡æ¯åŒ…å«è©³ç´°çš„æ›´æ–°èªªæ˜
- [ ] å‰µå»ºå°æ‡‰çš„ Git æ¨™ç±¤
- [ ] æ¨é€ä»£ç¢¼å’Œæ¨™ç±¤åˆ°é ç¨‹å€‰åº«
- [ ] åœ¨é ç¨‹æœå‹™å™¨æˆåŠŸéƒ¨ç½²
- [ ] é©—è­‰æ‡‰ç”¨åŠŸèƒ½æ­£å¸¸
- [ ] è¨˜éŒ„ç™¼å¸ƒæ—¥èªŒ

## ğŸ“ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **Docker å»ºæ§‹å¤±æ•—**
   - æª¢æŸ¥ Dockerfile èªæ³•
   - ç¢ºèª dist/ ç›®éŒ„å­˜åœ¨
   - æª¢æŸ¥ç¶²çµ¡é€£æ¥ (å°ç£æœå‹™å™¨ä½¿ç”¨ npm é¡åƒ)

2. **ç‰ˆæœ¬è™Ÿä¸åŒ¹é…**
   - ç¢ºèª package.json å·²æ›´æ–°
   - é‡æ–°å»ºæ§‹ dist/ æª”æ¡ˆ
   - æª¢æŸ¥ VersionDisplay çµ„ä»¶

3. **Git æ¨é€å¤±æ•—**
   - æª¢æŸ¥é ç¨‹å€‰åº«æ¬Šé™
   - ç¢ºèªç¶²çµ¡é€£æ¥
   - è™•ç†å¯èƒ½çš„åˆä½µè¡çª

4. **éƒ¨ç½²å¾ŒåŠŸèƒ½ç•°å¸¸**
   - æª¢æŸ¥ Docker å®¹å™¨æ—¥èªŒ
   - é©—è­‰éœæ…‹æª”æ¡ˆæ˜¯å¦æ­£ç¢ºéƒ¨ç½²
   - ç¢ºèªç’°å¢ƒé…ç½®ä¸€è‡´æ€§

---

**æœ€å¾Œæ›´æ–°**: 2025-08-25
**æ–‡æª”ç‰ˆæœ¬**: v1.0.0